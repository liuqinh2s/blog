<!DOCTYPE html>



  


<html class="theme-next pisces use-motion" lang="en">
<head><meta name="generator" content="Hexo 3.8.0">
  <meta charset="UTF-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
<meta name="theme-color" content="#222">









<meta http-equiv="Cache-Control" content="no-transform">
<meta http-equiv="Cache-Control" content="no-siteapp">
















  
  
  <link href="/lib/fancybox/source/jquery.fancybox.css?v=2.1.5" rel="stylesheet" type="text/css">







<link href="/lib/font-awesome/css/font-awesome.min.css?v=4.6.2" rel="stylesheet" type="text/css">

<link href="/css/main.css?v=5.1.4" rel="stylesheet" type="text/css">


  <link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon-next.png?v=5.1.4">


  <link rel="icon" type="image/png" sizes="32x32" href="/favicon.ico?v=5.1.4">


  <link rel="icon" type="image/png" sizes="16x16" href="/favicon.ico?v=5.1.4">


  <link rel="mask-icon" href="/images/logo.svg?v=5.1.4" color="#222">





  <meta name="keywords" content="liuqinh2s">





  <link rel="alternate" href="/atom.xml" title="liuqinh2s' blog" type="application/atom+xml">






<meta name="description" content="这里主要用来记录我生活中的所思所想，当然大部分可能是跟计算机、编程有关的。这些想法或者摘抄比较短小，不足以形成一篇文章，但仍然值得记录下来反复品味，回顾。它们的编排方式是按日期倒序来的。 2023-11-14今日需求  山城导航  在重庆的时候，发现地图导航完全是错的，不管是步行导航，还是驾驶导航。然后司机说要用本地的离线地图包，我当时在想离线地图包还有此等神奇的作用吗？像重庆这种山城，高度定位似">
<meta name="keywords" content="Coding Writing Thinking">
<meta property="og:type" content="website">
<meta property="og:title" content="札记">
<meta property="og:url" content="https://liuqinh2s.xyz/notes/index.html">
<meta property="og:site_name" content="liuqinh2s&#39; blog">
<meta property="og:description" content="这里主要用来记录我生活中的所思所想，当然大部分可能是跟计算机、编程有关的。这些想法或者摘抄比较短小，不足以形成一篇文章，但仍然值得记录下来反复品味，回顾。它们的编排方式是按日期倒序来的。 2023-11-14今日需求  山城导航  在重庆的时候，发现地图导航完全是错的，不管是步行导航，还是驾驶导航。然后司机说要用本地的离线地图包，我当时在想离线地图包还有此等神奇的作用吗？像重庆这种山城，高度定位似">
<meta property="og:locale" content="en">
<meta property="og:image" content="https://liuqinh2s.xyz/images/2023/正则表达式的坑1.png">
<meta property="og:image" content="https://liuqinh2s.xyz/images/2023/正则表达式的坑2.png">
<meta property="og:image" content="https://liuqinh2s.xyz/images/2023/rider目录树自动定位到文件.jpg">
<meta property="og:image" content="https://liuqinh2s.xyz/images/2022/ClashX默认配置.jpg">
<meta property="og:image" content="https://s2.loli.net/2022/06/11/rbelB5sHhZQLofY.png">
<meta property="og:updated_time" content="2023-11-19T15:43:53.894Z">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="札记">
<meta name="twitter:description" content="这里主要用来记录我生活中的所思所想，当然大部分可能是跟计算机、编程有关的。这些想法或者摘抄比较短小，不足以形成一篇文章，但仍然值得记录下来反复品味，回顾。它们的编排方式是按日期倒序来的。 2023-11-14今日需求  山城导航  在重庆的时候，发现地图导航完全是错的，不管是步行导航，还是驾驶导航。然后司机说要用本地的离线地图包，我当时在想离线地图包还有此等神奇的作用吗？像重庆这种山城，高度定位似">
<meta name="twitter:image" content="https://liuqinh2s.xyz/images/2023/正则表达式的坑1.png">



<script type="text/javascript" id="hexo.configurations">
  var NexT = window.NexT || {};
  var CONFIG = {
    root: '/',
    scheme: 'Pisces',
    version: '5.1.4',
    sidebar: {"position":"left","display":"post","offset":12,"b2t":false,"scrollpercent":false,"onmobile":false},
    fancybox: true,
    tabs: true,
    motion: {"enable":true,"async":false,"transition":{"post_block":"fadeIn","post_header":"slideDownIn","post_body":"slideDownIn","coll_header":"slideLeftIn","sidebar":"slideUpIn"}},
    duoshuo: {
      userId: '0',
      author: 'Author'
    },
    algolia: {
      applicationID: '',
      apiKey: '',
      indexName: '',
      hits: {"per_page":10},
      labels: {"input_placeholder":"Search for Posts","hits_empty":"We didn't find any results for the search: ${query}","hits_stats":"${hits} results found in ${time} ms"}
    }
  };
</script>



  <link rel="canonical" href="https://liuqinh2s.xyz/notes/">





  <title>札记 | liuqinh2s' blog</title>
  




<script async src="https://www.googletagmanager.com/gtag/js?id=G-JKEL3MWXN4"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'G-JKEL3MWXN4');
</script>





</head>

<body itemscope itemtype="http://schema.org/WebPage" lang="en">

  
  
    
  

  <div class="container sidebar-position-left page-post-detail">
    <div class="headband"></div>

    <header id="header" class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-brand-wrapper">
  <div class="site-meta ">
    

    <div class="custom-logo-site-title">
      <a href="/" class="brand" rel="start">
        <span class="logo-line-before"><i></i></span>
        <span class="site-title">liuqinh2s' blog</span>
        <span class="logo-line-after"><i></i></span>
      </a>
    </div>
      
        <h1 class="site-subtitle" itemprop="description">Do something cool!</h1>
      
  </div>

  <div class="site-nav-toggle">
    <button>
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
    </button>
  </div>
</div>

<nav class="site-nav">
  

  
    <ul id="menu" class="menu">
      
        
        <li class="menu-item menu-item-home">
          <a href="/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-home"></i> <br>
            
            Home
          </a>
        </li>
      
        
        <li class="menu-item menu-item-about">
          <a href="/about/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-user"></i> <br>
            
            About
          </a>
        </li>
      
        
        <li class="menu-item menu-item-tags">
          <a href="/tags/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-tags"></i> <br>
            
            Tags
          </a>
        </li>
      
        
        <li class="menu-item menu-item-categories">
          <a href="/categories/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-th"></i> <br>
            
            Categories
          </a>
        </li>
      
        
        <li class="menu-item menu-item-archives">
          <a href="/archives/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-archive"></i> <br>
            
            Archives
          </a>
        </li>
      
        
        <li class="menu-item menu-item-mark">
          <a href="/Mark/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-star"></i> <br>
            
            Mark
          </a>
        </li>
      
        
        <li class="menu-item menu-item-computer-science">
          <a href="/ComputerScience/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-code"></i> <br>
            
            Computer Science
          </a>
        </li>
      
        
        <li class="menu-item menu-item-notes">
          <a href="/notes/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-book"></i> <br>
            
            Notes
          </a>
        </li>
      
        
        <li class="menu-item menu-item-interview">
          <a href="/Interview/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-bank"></i> <br>
            
            Interview
          </a>
        </li>
      
        
        <li class="menu-item menu-item-english">
          <a href="/English/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-language"></i> <br>
            
            English
          </a>
        </li>
      
        
        <li class="menu-item menu-item-navigation">
          <a href="/Navigation/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-compass"></i> <br>
            
            Navigation
          </a>
        </li>
      
        
        <li class="menu-item menu-item-reading">
          <a href="/Reading/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-list"></i> <br>
            
            Reading
          </a>
        </li>
      
        
        <li class="menu-item menu-item-leetcode">
          <a href="/leetcode/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-coffee"></i> <br>
            
            leetcode
          </a>
        </li>
      
        
        <li class="menu-item menu-item-link">
          <a href="/Link/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-link"></i> <br>
            
            Link
          </a>
        </li>
      

      
        <li class="menu-item menu-item-search">
          
            <a href="javascript:;" class="popup-trigger">
          
            
              <i class="menu-item-icon fa fa-search fa-fw"></i> <br>
            
            Search
          </a>
        </li>
      
    </ul>
  

  
    <div class="site-search">
      
  <div class="popup search-popup local-search-popup">
  <div class="local-search-header clearfix">
    <span class="search-icon">
      <i class="fa fa-search"></i>
    </span>
    <span class="popup-btn-close">
      <i class="fa fa-times-circle"></i>
    </span>
    <div class="local-search-input-wrapper">
      <input autocomplete="off" placeholder="Searching..." spellcheck="false" type="text" id="local-search-input">
    </div>
  </div>
  <div id="local-search-result"></div>
</div>



    </div>
  
</nav>



 </div>
    </header>

    <main id="main" class="main">
      <div class="main-inner">
        <div class="content-wrap">
          <div id="content" class="content">
            

  <div id="posts" class="posts-expand">
    
    
    
    <div class="post-block page">
      <header class="post-header">

	<h2 class="post-title" itemprop="name headline">札记</h2>



</header>

      
      
      
      <div class="post-body">
        
        
          <p>这里主要用来记录我生活中的所思所想，当然大部分可能是跟计算机、编程有关的。这些想法或者摘抄比较短小，不足以形成一篇文章，但仍然值得记录下来反复品味，回顾。它们的编排方式是按日期倒序来的。</p>
<h1 id="2023-11-14"><a href="#2023-11-14" class="headerlink" title="2023-11-14"></a>2023-11-14</h1><p>今日需求</p>
<ol>
<li>山城导航</li>
</ol>
<p>在重庆的时候，发现地图导航完全是错的，不管是步行导航，还是驾驶导航。然后司机说要用本地的离线地图包，我当时在想离线地图包还有此等神奇的作用吗？像重庆这种山城，高度定位似乎很不准，在不同的海拔高度，路线根本不一样。要怎么解决这种问题呢</p>
<p>I had a dream that I speak English in any situation all the night.</p>
<p>我昨晚梦到自己在梦里一直讲英语，就是任何场景下都在用英语输出。真是个怪现象</p>
<p>但确实可以做到其实，现在有了 chatgpt 就相当于有了一个随身的英语老师，它甚至可以帮我零成本的同声传译。</p>
<h1 id="2023-11-13"><a href="#2023-11-13" class="headerlink" title="2023-11-13"></a>2023-11-13</h1><p>今日发现的 bug：</p>
<ol>
<li>在用 label for 的时候发现 id 重复，导致无法点击触发 checkbox 勾选</li>
<li>http post 参数传错导致 404</li>
</ol>
<p>朋友提出，可以用<a href="https://zh-hans.react.dev/reference/react/useId" target="_blank" rel="noopener">useId</a>来避免 id 重复</p>
<p>今日发现的需求：</p>
<ol>
<li>二维表格：画一个笛卡尔积（二位表格）的时候发现，二维表格用 markdown 很不好画，想要在一个单元格里面画一根斜线更是难（画斜线其实可以直接敲个字符<code>\</code>，毕竟是给人看的，人能懂就行）。于是我用 eda 画了一个二位表格</li>
<li>查找项目中的一个文件的某个函数中的历史代码（想看演变过程），发现没有很好的工具，只能看到文件的提交历史。能否自己做一个出来</li>
</ol>
<h2 id="window-location-href-和-hash（-）"><a href="#window-location-href-和-hash（-）" class="headerlink" title="window location href 和 hash（#）"></a>window location href 和 hash（#）</h2><ol>
<li>修改了 hash 不会刷新，修改了非 hash 会刷新</li>
<li>有<code>#</code>的情况下，自己等于自己不会刷新，<strong>没带<code>#</code>的情况下，自己等于自己会刷新</strong></li>
<li>去掉<code>#</code>会刷新</li>
<li>加上<code>#</code>不会刷新</li>
</ol>
<h1 id="2023-10-23"><a href="#2023-10-23" class="headerlink" title="2023-10-23"></a>2023-10-23</h1><h2 id="ts-项目使用-js-包"><a href="#ts-项目使用-js-包" class="headerlink" title="ts 项目使用 js 包"></a>ts 项目使用 js 包</h2><p>ts 项目引入 js 包会报错，我们只需要在项目的任意位置新建一个<code>xxx.d.ts</code>文件，内容填入：</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">declare <span class="built_in">module</span> <span class="string">'【import 的第三方库名】'</span>;</span><br></pre></td></tr></table></figure>
<p>即可解决报错</p>
<blockquote>
<p>TODO: 发布一个 typescript 的 npm 包</p>
</blockquote>
<h2 id="nginx-同一端口不同路径映射到不同项目"><a href="#nginx-同一端口不同路径映射到不同项目" class="headerlink" title="nginx 同一端口不同路径映射到不同项目"></a>nginx 同一端口不同路径映射到不同项目</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">location /project1 &#123;</span><br><span class="line">  alias /xxx/project1</span><br><span class="line">  index index.html</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">location /project2 &#123;</span><br><span class="line">  alias /xxx/project2</span><br><span class="line">  index index.html</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h1 id="2023-10-20"><a href="#2023-10-20" class="headerlink" title="2023-10-20"></a>2023-10-20</h1><p>发现一个问题 Object.defineProperty 一旦设置了 set 方法，就没办法设置值到该属性上了，只能通过 get 的时候返回对应值来达到不影响原来代码的目的。比如：</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> a = &#123; <span class="attr">a</span>: <span class="number">1</span> &#125;;</span><br><span class="line"><span class="built_in">Object</span>.defineProperty(a, <span class="string">"a"</span>, &#123;</span><br><span class="line">  <span class="keyword">set</span>(x) &#123;</span><br><span class="line">    <span class="built_in">console</span>.log(x);</span><br><span class="line">    <span class="keyword">this</span>.b = x;</span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="keyword">get</span>() &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="keyword">this</span>.b;</span><br><span class="line">  &#125;,</span><br><span class="line">&#125;);</span><br><span class="line">a.a = <span class="number">8</span>;</span><br><span class="line"><span class="built_in">console</span>.log(a);</span><br><span class="line"><span class="built_in">console</span>.log(a.a);</span><br></pre></td></tr></table></figure>
<p>尝试在 set 里面写<code>this.a = x;</code>会导致死循环，而写<code>return x;</code>则依旧没有设置上 a.a</p>
<h1 id="2023-10-18"><a href="#2023-10-18" class="headerlink" title="2023-10-18"></a>2023-10-18</h1><h2 id="如何发布自己的-npm-包？"><a href="#如何发布自己的-npm-包？" class="headerlink" title="如何发布自己的 npm 包？"></a>如何发布自己的 npm 包？</h2><ol>
<li>到<code>https://www.npmjs.com/</code>注册账号</li>
<li><code>npm init -y</code>新建一个项目</li>
<li>在控制台<code>npm login</code>登录自己账号</li>
<li>到项目目录下<code>npm publish --access public</code>，发布公开包（私有包要收费）</li>
</ol>
<blockquote>
<p>注意事项，新建项目的目录不能是中文会报错，如果没充钱<code>--access public</code>是必须的，包名可能会跟已有的包名冲突，可以通过<code>npm search xxx</code>查询</p>
</blockquote>
<h2 id="npm-依赖包版本号"><a href="#npm-依赖包版本号" class="headerlink" title="npm 依赖包版本号"></a>npm 依赖包版本号</h2><p><a href="https://blog.51cto.com/u_15127697/3633383" target="_blank" rel="noopener">npm 语义版本(npm 依赖包版本的~、&gt;、^符号各代表什么？)</a></p>
<h1 id="2023-10-17"><a href="#2023-10-17" class="headerlink" title="2023-10-17"></a>2023-10-17</h1><p>SVG 默认开了抗锯齿，会把 1 像素的线条用 2 像素显示</p>
<p>SVG 如果想展示真实的像素（关闭抗锯齿），可以设置 css：<code>shape-rendering: crispEdges</code></p>
<p>但 HTML5 canvas 不能这样达到目的</p>
<p><a href="https://stackoverflow.com/questions/11353499/svg-canvas-shape-rendering-crispedges-via-javascript" target="_blank" rel="noopener">graphics - SVG / Canvas :: shape-rendering=&quot;crispEdges&quot; via JavaScript? - Stack Overflow</a></p>
<p>canvas 可以通过以下方法来达到目的：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">当线宽为偶数时，坐标应指定为整数。否则坐标应指定为整数+0.5px。</span><br></pre></td></tr></table></figure>
<p><a href="https://blog.csdn.net/qq_33933205/article/details/107337882" target="_blank" rel="noopener">canvas 图像重叠处理 - Kaiqisan</a></p>
<h1 id="2023-10-16"><a href="#2023-10-16" class="headerlink" title="2023-10-16"></a>2023-10-16</h1><p>在 disabled 的 input 上面，右键，父级 div 的 onMouseDown 进不了，要怎么办？可以在事件的捕获阶段监听：</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">elem.addEventListener(..., &#123;<span class="attr">capture</span>: <span class="literal">true</span>&#125;)</span><br><span class="line"><span class="comment">// 或者，用 &#123;capture: true&#125; 的别名 "true"</span></span><br><span class="line">elem.addEventListener(..., <span class="literal">true</span>)</span><br></pre></td></tr></table></figure>
<p>DOM 事件标准描述了事件传播的 3 个阶段：</p>
<p>捕获阶段（Capturing phase）—— 事件（从 Window）向下走近元素。<br>目标阶段（Target phase）—— 事件到达目标元素。<br>冒泡阶段（Bubbling phase）—— 事件从元素上开始冒泡。</p>
<p>如果是 react 的话，就用 onMouseDownCapture。</p>
<p>不过最后发现依然不行，要用 onPointerDownCapture 才可以。</p>
<h1 id="2023-08-11"><a href="#2023-08-11" class="headerlink" title="2023-08-11"></a>2023-08-11</h1><p><a href="https://pjonori.blog/posts/systems-math-explosions/" target="_blank" rel="noopener">Systems, math and explosions (in no particular order)</a></p>
<p>这篇文章讲系统是怎么变复杂的（因连接而复杂），以及怎么消除复杂和混乱（减少节点）。</p>
<p><a href="https://pjonori.blog/" target="_blank" rel="noopener">PJ Onori’s blog</a></p>
<h1 id="2023-08-10"><a href="#2023-08-10" class="headerlink" title="2023-08-10"></a>2023-08-10</h1><p><a href="https://www.ruanyifeng.com/blog/2015/11/circular-dependency.html" target="_blank" rel="noopener">JavaScript 模块的循环加载</a></p>
<h1 id="2023-08-07"><a href="#2023-08-07" class="headerlink" title="2023-08-07"></a>2023-08-07</h1><h2 id="html-空格自动合并的问题"><a href="#html-空格自动合并的问题" class="headerlink" title="html 空格自动合并的问题"></a>html 空格自动合并的问题</h2><p>HTML 提供了 5 种空格实体（space entity），它们拥有不同的宽度，非断行空格( )是常规空格的宽度，可运行于所有主流浏览器。其他几种空格( <code>&amp;ensp;&amp;emsp;&amp;thinsp;&amp;zwnj;&amp;zwj;</code>）在不同浏览器中宽度各异。</p>
<p><code>&amp;nbsp;</code>它叫不换行空格，全称 No-Break Space，它是最常见和我们使用最多的空格，按下 space 键产生的空格。在 HTML 中，如果你用空格键产生此空格，空格是不会累加的（只算 1 个）。要使用 html 实体表示才可累加，该空格占据宽度受字体影响明显而强烈。</p>
<p><code>&amp;ensp;</code>它叫&quot;半角空格&quot;，全称是 En Space，en 是字体排印学的计量单位，为 em 宽度的一半。根据定义，它等同于字体度的一半（如 16px 字体中就是 8px）。名义上是小写字母 n 的宽度。此空格传承空格家族一贯的特性：透明的，其占据的宽度正好是 1/2 个中文宽度，而且基本上不受字体影响。</p>
<p><code>&amp;emsp;</code>它叫“全角空格”，全称是 Em Space，em 是字体排印学的计量单位，相当于当前指定的点数。例如，1 em 在 16px 的字体中就是 16px。此空格也传承空格家族一贯的特性：透明的，其占据的宽度正好是 1 个中文宽度，而且基本上不受字体影响。</p>
<p><code>&amp;thinsp;</code>它叫窄空格，全称是 Thin Space。我们不妨称之为&quot;瘦弱空格&quot;;，就是该空格占据的宽度比较小。它是 em 之六分之一宽。</p>
<p><code>&amp;zwnj;</code>它叫零宽不连字，全称是 Zero Width Non Joiner，简称&quot;ZWNJ&quot;，是一个不打印字符，放在电子文本的两个字符之间，抑制本来会发生的连字，改为以这两个字符原本的字形来绘制。Unicode 中的零宽不连字字符映射为<code>&amp;ldquo;&amp;rdquo</code>;（zero width non-joiner，U+200C），HTML 字符值引用为:<code>&amp;zwnj</code>;</p>
<p><code>&amp;zwj;</code>它叫零宽连字，全称是 Zero Width Joiner，简称“ZWJ”，是一个不打印字符，放在某些需要复杂排版语言（如阿拉伯语、印地语）的两个字符之间，使得这两个本不会发生连字的字符产生了连字效果。零宽连字符的 Unicode 码位是 U+200D(HTML: ‍ <code>&amp;zwj;</code>）。</p>
<p>此外，浏览器还会把以下字符当作空白进行解析：空格（<code>&amp;#x0020;</code>）、制表位（<code>&amp;#x0009;</code>）、换行（<code>&amp;#x000A;</code>）和回车（ <code>&amp;#x000D;</code>）还有中文全角空格（<code>&amp;#12288;</code>）等等。</p>
<blockquote>
<p>用<code>tspan</code>标签和<code>xml:space=&quot;preserve&quot;</code>也可以解决</p>
</blockquote>
<h1 id="2023-08-02"><a href="#2023-08-02" class="headerlink" title="2023-08-02"></a>2023-08-02</h1><p>最近想把某个消息放在组件文件中进行监听，但发现消息总线可能还没注册好，这个时候可以用<code>DOMContentLoaded</code>这个事件。</p>
<p>官方文档：<a href="https://developer.mozilla.org/en-US/docs/Web/API/Window/DOMContentLoaded_event" target="_blank" rel="noopener">Window: DOMContentLoaded event</a></p>
<ol>
<li>默认情况下，脚本只阻塞其后的 dom 元素解析</li>
<li>defer 告诉浏览器，脚本需要等 HTML 解析完后执行（多个 defer 脚本按出现顺序执行）</li>
<li>async 告诉浏览器，脚本异步下载（与 HTML 解析一起进行），下载完后会立即执行（不会等 HTML 解析完）</li>
</ol>
<p>所以一般来说，如果脚本与 HTML 有关，就用 defer，无关就用 async</p>
<h1 id="2023-07-26"><a href="#2023-07-26" class="headerlink" title="2023-07-26"></a>2023-07-26</h1><h2 id="localeCompare"><a href="#localeCompare" class="headerlink" title="localeCompare"></a>localeCompare</h2><p>js 自然排序：<a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/String/localeCompare" target="_blank" rel="noopener">localeCompare</a></p>
<p><a href="https://idealark.cn/archives/12/" target="_blank" rel="noopener">用 localeCompare 实现字符串自然排序</a></p>
<figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">arr.sort(<span class="function">(<span class="params">a, b</span>) =&gt;</span> b.localeCompare(a));</span><br></pre></td></tr></table></figure>
<h2 id="对象遍历的速度比较"><a href="#对象遍历的速度比较" class="headerlink" title="对象遍历的速度比较"></a>对象遍历的速度比较</h2><p><code>Object.keys()</code>，<code>Object.values()</code>，<code>Object.entries()</code>的性能差异如何呢？</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> res = &#123;&#125;;</span><br><span class="line"><span class="keyword">for</span>(<span class="keyword">let</span> i=<span class="number">0</span>;i&lt;<span class="number">100</span>_0000;i++)&#123;</span><br><span class="line">    res[i]=i;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">let</span> count=<span class="number">0</span>;</span><br><span class="line"><span class="comment">// console.time('Object.keys()')</span></span><br><span class="line"><span class="comment">// for(let k of Object.keys(res||&#123;&#125;))&#123;</span></span><br><span class="line"><span class="comment">//     count++;</span></span><br><span class="line"><span class="comment">// &#125;</span></span><br><span class="line"><span class="comment">// console.timeEnd('Object.keys()')</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// count=0;</span></span><br><span class="line"><span class="comment">// console.time('Object.values()')</span></span><br><span class="line"><span class="comment">// for(let v of Object.values(res||&#123;&#125;))&#123;</span></span><br><span class="line"><span class="comment">//     count++;</span></span><br><span class="line"><span class="comment">// &#125;</span></span><br><span class="line"><span class="comment">// console.timeEnd('Object.values()')</span></span><br><span class="line"></span><br><span class="line">count=<span class="number">0</span>;</span><br><span class="line"><span class="built_in">console</span>.time(<span class="string">'Object.entries()'</span>)</span><br><span class="line"><span class="keyword">for</span>(<span class="keyword">let</span> [k,v] <span class="keyword">of</span> <span class="built_in">Object</span>.entries(res||&#123;&#125;))&#123;</span><br><span class="line">    count++;</span><br><span class="line">&#125;</span><br><span class="line"><span class="built_in">console</span>.timeEnd(<span class="string">'Object.entries()'</span>)</span><br></pre></td></tr></table></figure>
<p>测试结果是 values()速度最快，values()速度&gt;keys()速度&gt;entries()速度</p>
<p>values()大概只有 keys()执行时间的十分之一，而 keys 执行时间大概是 entries 的一半</p>
<p>而写法上把<code>Object.keys</code>写在 for 里面和 for 外面其实是一样的速度：</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">for</span>(<span class="keyword">let</span> v <span class="keyword">of</span> <span class="built_in">Object</span>.keys(res||&#123;&#125;))</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> values = <span class="built_in">Object</span>.keys(res||&#123;&#125;);</span><br><span class="line"><span class="keyword">for</span>(<span class="keyword">let</span> v <span class="keyword">of</span> values)</span><br></pre></td></tr></table></figure>
<p>for 循环只会在初始化的时候计算一次<code>Object.keys</code>，以下代码可以验证：</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> a = &#123;&#125;;</span><br><span class="line"><span class="keyword">for</span> (<span class="keyword">let</span> i = <span class="number">0</span>; i &lt; <span class="number">10</span>; i++) &#123;</span><br><span class="line">  a[i] = i;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">for</span> (<span class="keyword">let</span> k <span class="keyword">of</span> <span class="built_in">Object</span>.keys(a || &#123;&#125;)) &#123;</span><br><span class="line">  a[k + <span class="string">"a"</span>] = k + <span class="string">"a"</span>;</span><br><span class="line">  <span class="built_in">console</span>.log(<span class="string">"1"</span>);</span><br><span class="line">&#125;</span><br><span class="line"><span class="built_in">console</span>.log(a);</span><br></pre></td></tr></table></figure>
<p><code>1</code>只会打印 10 次</p>
<p>以下写法类似：</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> a = &#123;&#125;;</span><br><span class="line"><span class="keyword">for</span> (<span class="keyword">let</span> i = <span class="number">0</span>; i &lt; <span class="number">100</span>_0000; i++) &#123;</span><br><span class="line">  a[i] = i;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">let</span> count = <span class="number">0</span>;</span><br><span class="line"><span class="built_in">console</span>.time(<span class="string">"a"</span>);</span><br><span class="line"><span class="keyword">for</span> (<span class="keyword">let</span> k <span class="keyword">of</span> <span class="built_in">Object</span>.keys(a || &#123;&#125;)) &#123;</span><br><span class="line">  a[k] = k + <span class="string">"a"</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="built_in">console</span>.timeEnd(<span class="string">"a"</span>);</span><br><span class="line">count = <span class="number">0</span>;</span><br><span class="line"><span class="built_in">console</span>.time(<span class="string">"b"</span>);</span><br><span class="line"><span class="keyword">for</span> (<span class="keyword">let</span> i = <span class="number">0</span>, keys = <span class="built_in">Object</span>.keys(a || &#123;&#125;); i &lt; keys.length; i++) &#123;</span><br><span class="line">  a[keys[i]] = keys[i] + <span class="string">"a"</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="built_in">console</span>.timeEnd(<span class="string">"b"</span>);</span><br></pre></td></tr></table></figure>
<h2 id="for-of-和-for-in"><a href="#for-of-和-for-in" class="headerlink" title="for of 和 for in"></a><code>for of</code> 和 <code>for in</code></h2><p><code>for of</code>用于遍历可迭代对象（数组之类的），<code>for in</code>用于遍历对象</p>
<p><code>for in</code>速度跟<code>for of</code>+<code>Object.keys()</code>差不多，区别是 in 会遍历到 prototype 上的属性，而后者则不会。所以如果不想遍历到原型上的属性，要么别用<code>for in</code>，要么要多写一个 obj.hasOwnProperty 的判断</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">A</span> </span>&#123;</span><br><span class="line">  a = <span class="string">"a"</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">B</span> <span class="keyword">extends</span> <span class="title">A</span> </span>&#123;</span><br><span class="line">  b = <span class="string">"b"</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">let</span> bb = <span class="keyword">new</span> B();</span><br><span class="line">bb.__proto__.c = <span class="string">"c"</span>;</span><br><span class="line"><span class="keyword">for</span> (<span class="keyword">let</span> k <span class="keyword">in</span> bb) &#123;</span><br><span class="line">  <span class="keyword">if</span> (bb.hasOwnProperty(k)) &#123;</span><br><span class="line">    <span class="built_in">console</span>.log(k);</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="comment">// console.log(k)</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">for</span> (<span class="keyword">let</span> k <span class="keyword">of</span> <span class="built_in">Object</span>.keys(bb || &#123;&#125;)) &#123;</span><br><span class="line">  <span class="built_in">console</span>.log(k);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>官方文档：</p>
<ul>
<li><a href="https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Reference/Statements/for...of" target="_blank" rel="noopener">for of</a></li>
<li><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Statements/for...in" target="_blank" rel="noopener">for in</a></li>
</ul>
<h2 id="for-of和-C-语言语法的遍历速度比较"><a href="#for-of和-C-语言语法的遍历速度比较" class="headerlink" title="for of和 C 语言语法的遍历速度比较"></a><code>for of</code>和 C 语言语法的遍历速度比较</h2><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> res = <span class="keyword">new</span> <span class="built_in">Array</span>(<span class="number">100</span>_0000);</span><br><span class="line"><span class="keyword">let</span> count = <span class="number">0</span>;</span><br><span class="line"><span class="built_in">console</span>.time(<span class="string">"a"</span>);</span><br><span class="line"><span class="keyword">for</span> (<span class="keyword">let</span> i = <span class="number">0</span>; i &lt; res.length; i++) &#123;</span><br><span class="line">  count++;</span><br><span class="line">&#125;</span><br><span class="line"><span class="built_in">console</span>.timeEnd(<span class="string">"a"</span>);</span><br><span class="line">count = <span class="number">0</span>;</span><br><span class="line"><span class="built_in">console</span>.time(<span class="string">"b"</span>);</span><br><span class="line"><span class="keyword">for</span> (<span class="keyword">let</span> i <span class="keyword">of</span> res) &#123;</span><br><span class="line">  count++;</span><br><span class="line">&#125;</span><br><span class="line"><span class="built_in">console</span>.timeEnd(<span class="string">"b"</span>);</span><br></pre></td></tr></table></figure>
<p>大概有 6 倍的差距</p>
<h1 id="2023-07-19"><a href="#2023-07-19" class="headerlink" title="2023-07-19"></a>2023-07-19</h1><p>消息总线和函数调用的区别：消息总线用了一个集合来收集事件回调函数，导致了消息总线可以在外部零散的注册回调，而函数调用则相当于是在消息发出的地方集中注册消息监听。<strong>所以消息总线很好的对依赖进行了倒置，因为，是事件回调函数依赖了事件，而不是事件依赖了事件的响应函数</strong>。</p>
<blockquote>
<p>所以从本质上来说，就是 A 依赖 B，还是 B 依赖 A 的问题。你有一段逻辑 A 和一段逻辑 B，其中 B 要在 A 之后执行，如果你认为应该是 A 依赖了 B，那么直接调用即可，如果你认为是 B 依赖了 A，那么就用消息总线。</p>
</blockquote>
<p>用浏览器的 window.postMessage 或者 worker.postMessage，可以把消息发到其他的 window 或者 worker 来执行事件回调函数。但这样的话就是异步执行了。</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">window1.postMessage(<span class="string">"hello"</span>, <span class="string">"*"</span>);</span><br><span class="line">window2.addEventListener(<span class="string">"message"</span>, (event) =&gt; &#123;</span><br><span class="line">  <span class="comment">// event.source is window1</span></span><br><span class="line">  <span class="comment">// event.data is "hello"</span></span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>
<p>异步的不是消息总线，而是 postMessage。</p>
<h1 id="2023-07-17"><a href="#2023-07-17" class="headerlink" title="2023-07-17"></a>2023-07-17</h1><p>移动 iframe 元素会造成 iframe 重新加载 src，所以如果想移动 iframe 而不引起刷新就只能用 css。</p>
<blockquote>
<p><a href="https://cloud.tencent.com/developer/ask/sof/102869" target="_blank" rel="noopener">如何在不丢失状态的情况下在 DOM 中移动 iFrame？</a><br>无论何时附加 iframe 并应用了 src 属性，它都会触发一个加载操作，这与通过 JS 创建 Image 标记时类似。因此，当您删除并附加它们时，它们是全新的实体，它们会刷新。这就是 window.location = window.location 重新加载页面的方式。<br>我所知道的重新定位 iframes 的唯一方法是通过 CSS。</p>
</blockquote>
<p>所以最好的方法实际上是弃用 iframe，改用 div 或者 canvas。</p>
<p>另外就是我发现移动 dom 元素只需要 appendChild 到新的位置即可，并不需要删除原 dom。</p>
<h2 id="importmap"><a href="#importmap" class="headerlink" title="importmap"></a>importmap</h2><p>javascript 现在支持跨脚本 import 了：<a href="https://web.dev/import-maps-in-all-modern-browsers/" target="_blank" rel="noopener">JavaScript import maps are now supported cross-browser</a></p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">script</span> <span class="attr">type</span>=<span class="string">"importmap"</span>&gt;</span><span class="undefined"></span></span><br><span class="line"><span class="undefined">  &#123;</span></span><br><span class="line"><span class="javascript">    <span class="string">"imports"</span>: &#123;</span></span><br><span class="line"><span class="javascript">      <span class="string">"browser-fs-access"</span>: <span class="string">"https://unpkg.com/browser-fs-access@0.33.0/dist/index.modern.js"</span></span></span><br><span class="line"><span class="undefined">    &#125;</span></span><br><span class="line"><span class="undefined">  &#125;</span></span><br><span class="line"><span class="undefined"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">button</span>&gt;</span>Select a text file<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span> <span class="attr">type</span>=<span class="string">"module"</span>&gt;</span><span class="undefined"></span></span><br><span class="line"><span class="javascript">  <span class="keyword">import</span> &#123; fileOpen &#125; <span class="keyword">from</span> <span class="string">"browser-fs-access"</span>;</span></span><br><span class="line"><span class="undefined"></span></span><br><span class="line"><span class="javascript">  <span class="keyword">const</span> button = <span class="built_in">document</span>.querySelector(<span class="string">"button"</span>);</span></span><br><span class="line"><span class="javascript">  button.addEventListener(<span class="string">"click"</span>, <span class="keyword">async</span> () =&gt; &#123;</span></span><br><span class="line"><span class="javascript">    <span class="keyword">const</span> file = <span class="keyword">await</span> fileOpen(&#123;</span></span><br><span class="line"><span class="javascript">      mimeTypes: [<span class="string">"text/plain"</span>],</span></span><br><span class="line"><span class="undefined">    &#125;);</span></span><br><span class="line"><span class="javascript">    <span class="built_in">console</span>.log(<span class="keyword">await</span> file.text());</span></span><br><span class="line"><span class="undefined">  &#125;);</span></span><br><span class="line"><span class="undefined"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br></pre></td></tr></table></figure>
<h1 id="2023-07-08"><a href="#2023-07-08" class="headerlink" title="2023-07-08"></a>2023-07-08</h1><p>关于 iframe 的基本知识：</p>
<ol>
<li>获取外层 window：<code>window.parent</code></li>
<li>获取顶层 window: <code>window.top</code></li>
<li>获取当前文档所在的 iframe 元素: <code>window.frameElement</code></li>
<li>获取当前文档内所有的 iframe: <code>window.frames</code>，这是个可迭代对象，可以像数组一样使用</li>
</ol>
<h1 id="2023-07-07"><a href="#2023-07-07" class="headerlink" title="2023-07-07"></a>2023-07-07</h1><p>在立创 EDA 的编程中经常遇到的问题：</p>
<ol>
<li>公用混乱，代码腐烂（参数无约定，随意修改）</li>
<li>某些地方没有同步更新（比如修改名称，需要同步更新属性面板，底部库，tab 页，画布等等诸多地方）</li>
</ol>
<h1 id="2023-07-06"><a href="#2023-07-06" class="headerlink" title="2023-07-06"></a>2023-07-06</h1><p>最近同事遇到一个 react 的坑，他把 root 缓存了起来，然后发现整个组件不更新：</p>
<figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">root = root || ReactDOMClient.createRoot(dom);</span><br><span class="line">root.render(&lt;App &#123;...props&#125;&gt;&lt;<span class="regexp">/App&gt;);</span></span><br></pre></td></tr></table></figure>
<p>不缓存就可以更新了。</p>
<p>实际上 react 的 useState 是只在初始化的时候用参数的值的，而想要让组件重新初始化，可以加 key，key 改变，就会重新初始化。</p>
<p>父组件 render，子组件也会 render，但不一定会用 useState 里面的值（除非子组件重新初始化）</p>
<p>父组件重新初始化，子组件也会重新初始化，且一定会用 useState 里面的值</p>
<h1 id="2023-06-15"><a href="#2023-06-15" class="headerlink" title="2023-06-15"></a>2023-06-15</h1><p><a href="https://forum-zh.obsidian.md/t/topic/19728/3" target="_blank" rel="noopener">如何在 win7 上安装 obsidian</a></p>
<p>简而言之就是去 github 上下载 1.1.x 的老版本的 obsidian，我下载的是 1.1.16</p>
<h1 id="2023-06-13"><a href="#2023-06-13" class="headerlink" title="2023-06-13"></a>2023-06-13</h1><p>搞定了 obsidian 多端同步，通过 git 插件自动和远端 github 同步。可以愉快的在手机上码博客了。而且据说 obsidian 挺好用的，应该比 vscode 写博客强吧。</p>
<p>添加了 google analytics，GA4。在主题里面找到<code>google-analytics.swig</code>，代码如下：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">&#123;% if theme.google_analytics %&#125;</span><br><span class="line">&lt;script async src=&quot;https://www.googletagmanager.com/gtag/js?id=&#123;&#123; theme.google_analytics &#125;&#125;&quot;&gt;&lt;/script&gt;</span><br><span class="line">&lt;script&gt;</span><br><span class="line">  window.dataLayer = window.dataLayer || [];</span><br><span class="line">  function gtag()&#123;dataLayer.push(arguments);&#125;</span><br><span class="line">  gtag(&apos;js&apos;, new Date());</span><br><span class="line"></span><br><span class="line">  gtag(&apos;config&apos;, &apos;&#123;&#123; theme.google_analytics &#125;&#125;&apos;);</span><br><span class="line">&lt;/script&gt;</span><br><span class="line">&#123;% endif %&#125;</span><br></pre></td></tr></table></figure>
<p>主题配置文件<code>_config.yml</code>中添加变量：<code>google_analytics: G-xxx</code></p>
<p><a href="https://analytics.google.com/analytics/web/#/p383781563/reports/intelligenthome" target="_blank" rel="noopener">谷歌分析看板</a></p>
<h1 id="2023-06-10"><a href="#2023-06-10" class="headerlink" title="2023-06-10"></a>2023-06-10</h1><p>搞了两天 kcptun，最后发现居然更新一下版本就解决了问题</p>
<p>问题描述：</p>
<p>手机上用 kcptun 有问题（纯 shadowsocks 无问题），但电脑上没问题。</p>
<p>我解决问题是主线是把报错信息放到谷歌上面搜，这已经是我惯用的手段了，搜了一大波，把可能的方法都试了一遍，正当我快要放弃的时候，我还是搜到了一个答案：<code>Upgrading to latest kcptun solve this problem</code>，但是用其他的报错信息搜到的，一共有两个报错信息，在安卓版 shadowsocks 5.3.3 上是：<code>unable to resolve host &quot;cp.cloudflare.com&quot;: no address associated with hostname</code>，在安卓版 shadowsocks 4.8.7 上是：<code>libsslocal exits too fast (exit code 70)</code></p>
<p>以下是我试过的办法：</p>
<ol>
<li>把 shadowsocks 服务端换成 go，<a href="https://github.com/shadowsocks/go-shadowsocks2。Python版也试过，shadowsocks-libev也试过" target="_blank" rel="noopener">https://github.com/shadowsocks/go-shadowsocks2。Python版也试过，shadowsocks-libev也试过</a></li>
<li>换客户端版本，安卓版 shadowsocks 5.3.3，5.2.6，5.1.1，4.8.7</li>
<li>换 kcptun 的端口</li>
<li>在服务器开放 53 端口，安装 dns 服务</li>
</ol>
<p>结论，以后出问题，第一解决方案应该是，<strong>确保所有软件版本都是最新的</strong>。</p>
<h2 id="使用-VPS-挖矿挖点本回来"><a href="#使用-VPS-挖矿挖点本回来" class="headerlink" title="使用 VPS 挖矿挖点本回来"></a>使用 VPS 挖矿挖点本回来</h2><p>乌龟币迁移到了 FTM，而且感觉这个项目已经死亡了，服务器还是继续挖门罗币吧，说真的虚拟货币的生命力才是最重要的</p>
<p>如何避免 CPU 占满：<a href="https://www.azurew.com/life/%E6%8C%96%E7%9F%BF/7650.html，我采用的是加-t参数，限制线程数" target="_blank" rel="noopener">https://www.azurew.com/life/%E6%8C%96%E7%9F%BF/7650.html，我采用的是加-t参数，限制线程数</a></p>
<h2 id="下载-github-release-文件"><a href="#下载-github-release-文件" class="headerlink" title="下载 github release 文件"></a>下载 github release 文件</h2><p>链接格式如下：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">wget --no-check-certificate --content-disposition https://github.com/xmrig/xmrig/releases/download/v6.19.3/xmrig-6.19.3-linux-x64.tar.gz</span><br><span class="line"></span><br><span class="line">curl -LJO https://github.com/ctripcorp/apollo/releases/download/v1.5.1/apollo-adminservice-1.5.1-github.zip</span><br></pre></td></tr></table></figure>
<h1 id="2023-06-08"><a href="#2023-06-08" class="headerlink" title="2023-06-08"></a>2023-06-08</h1><p>有这样一个 bug，在拖动一个三角图标（专门用于拖拽的组件）的时候，光标要显示<code>col-resize</code>：</p>
<figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-tag">cursor</span>: <span class="selector-tag">col-resize</span>;</span><br></pre></td></tr></table></figure>
<p>项目中有两个其他的组件的表现都是符合要求的（拖动时候是<code>col-resize</code>），但我不清楚，原生的表现是什么，所以一直以为是我这边的代码有问题。</p>
<p>后来发现原来是那两个组件做了特殊处理，在 mousemove 的时候把这个 cursor 的样式加到了 body 上。</p>
<p>有的时候问题的关键在于你锁定的范围，假如一开始就先入为主找错了方向，那就根本不可能解决问题了。</p>
<p>想要弄清楚原生的表现，其实可以写个简单的例子，或者你的组件足够简单，你就可以自信的认为，问题不出在你这边，转而开始思考其他的可能性。</p>
<h1 id="2023-06-07"><a href="#2023-06-07" class="headerlink" title="2023-06-07"></a>2023-06-07</h1><h2 id="vite-打包使用相对路径"><a href="#vite-打包使用相对路径" class="headerlink" title="vite 打包使用相对路径"></a>vite 打包使用相对路径</h2><p>坑爹的 vite 打包默认使用绝对路径，想要使用相对路径可以在配置中填：<code>base: &#39;./&#39;</code></p>
<p><a href="http://www.oceanpresent.art/posts/hard-boiled-wonderland/viteassetpath" target="_blank" rel="noopener">为什么 vite 打包后 dist 文件无法直接运行</a></p>
<h2 id="ResizeObserver"><a href="#ResizeObserver" class="headerlink" title="ResizeObserver"></a>ResizeObserver</h2><p>监听 dom 的宽高变化：<a href="https://developer.mozilla.org/zh-CN/docs/Web/API/ResizeObserver" target="_blank" rel="noopener">ResizeObserver</a></p>
<p>比如我做一个 scrollButton 组件（用来替代鼠标滚轮，实现点击触发 scroll），就要监听滚动对象父级的宽高变化来控制这个 scrollButton 组件的显示隐藏</p>
<h2 id="nginx"><a href="#nginx" class="headerlink" title="nginx"></a>nginx</h2><p>nginx 的配置位置：<code>/etc/nginx</code>中，在该目录下，主要的配置文件是 nginx.conf</p>
<h1 id="2023-06-06"><a href="#2023-06-06" class="headerlink" title="2023-06-06"></a>2023-06-06</h1><p>买了国外的域名和服务器，这样就可以避免国内特别麻烦的备案了，话说国外的域名和服务器真是便宜啊：</p>
<ul>
<li>服务器（VPS）：<a href="https://www.racknerd.com/" target="_blank" rel="noopener">racknerd.com</a></li>
<li>域名：<a href="https://www.name.com/" target="_blank" rel="noopener">name.com</a></li>
</ul>
<p>服务器购买参考了一篇文章：<a href="https://p3terx.com/archives/cheap-vps-racknerd.html，多亏这篇文章才买到了便宜的。" target="_blank" rel="noopener">https://p3terx.com/archives/cheap-vps-racknerd.html，多亏这篇文章才买到了便宜的。</a></p>
<p>Windows 平台好用的远程 shell 工具：<a href="https://github.com/kingToolbox/WindTerm" target="_blank" rel="noopener">WindTerm</a><br>Mac OS 平台好用的远程 shell 工具：<a href="http://www.hostbuf.com/t/988.html" target="_blank" rel="noopener">FinalShell</a></p>
<blockquote>
<p>现在 Windows 平台也有 FinalShell 了，体验终于又统一起来了</p>
</blockquote>
<p>以前搭 wordpress 博客的时候，被盗过两次，跟同事讨论了之后，发现可能是因为我使用了 root 账号远程登录，要论安全性的话，最好的方式是：</p>
<ol>
<li>禁止 root 账号远程登录（那么别人想要登录，就只能猜你的账号名+密码，如果你开放了 root 登录，别人就只需要猜 root 密码）</li>
<li>把 ssh 端口改为非 22 端口，那黑客想要破解，就需要猜端口</li>
<li>普通账号不给 root 权限，这样即便普通账号被盗，情况也不算严重</li>
<li>设置一个强的 root 密码</li>
</ol>
<p>这样一套组合拳打下来，黑客想要获取你服务器的最高权限，首先要知道你的 ssh 端口，然后要知道一对普通账号密码，最后要知道 root 的密码，才能最终获得最高权限。相比于只靠 root 密码的强度，安全了许多许多。</p>
<p>以下是需要用到的 linux 命令：</p>
<ul>
<li>新建用户：<code>useradd &lt;yourname&gt;</code></li>
<li>修改用户密码：<code>passwd &lt;yourname&gt;</code></li>
<li>修改 ssh 端口号：编辑<code>/etc/ssh/sshd_config</code>文件，修改<code>#Port 22</code>为：<code>Port xxxx</code></li>
<li>禁止 root 账号远程登录：编辑<code>/etc/ssh/sshd_config</code>文件，修改<code>#PermitRootLogin yes</code>为：<code>PermitRootLogin no</code></li>
</ul>
<p>修改完<code>/etc/ssh/sshd_config</code>文件后，需要重启一下服务：</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">setenforce 0</span><br><span class="line">sudo service sshd restart</span><br></pre></td></tr></table></figure>
<p>修改完端口，还要让防火墙放行此端口：</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">// 放行指定端口</span><br><span class="line">firewall-cmd --zone=public --add-port=xxxx/tcp --permanent</span><br><span class="line">// 重启防火墙</span><br><span class="line">systemctl restart firewalld.service</span><br><span class="line">// 重新载入配置</span><br><span class="line">firewall-cmd --reload</span><br></pre></td></tr></table></figure>
<h2 id="centos-安装-nginx"><a href="#centos-安装-nginx" class="headerlink" title="centos 安装 nginx"></a>centos 安装 nginx</h2><p>yum install 没有可用软件包 nginx。</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">已加载插件：fastestmirror</span><br><span class="line">Loading mirror speeds from cached hostfile</span><br><span class="line"> * base: mirror.lzu.edu.cn</span><br><span class="line"> * extras: mirror.lzu.edu.cn</span><br><span class="line"> * updates: mirror.lzu.edu.cn</span><br><span class="line">没有可用软件包 nginx。</span><br><span class="line">错误：无须任何处理</span><br></pre></td></tr></table></figure>
<p>原因是 nginx 位于第三方的 yum 源里面，而不在 centos 官方 yum 源里面</p>
<p>解决方法：</p>
<p>安装</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo yum install epel-release</span><br></pre></td></tr></table></figure>
<p>更新</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">yum update</span><br></pre></td></tr></table></figure>
<p>重新试一下：</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">yum install -y nginx</span><br></pre></td></tr></table></figure>
<h2 id="显卡挖矿"><a href="#显卡挖矿" class="headerlink" title="显卡挖矿"></a>显卡挖矿</h2><p>币安现在也有矿池了：<a href="https://pool.binance.com/zh-CN" target="_blank" rel="noopener">币安矿池</a></p>
<p>我用的显卡：<code>NVIDIA GeForce RTX 4060 Laptop GPU 8GB</code>，挖矿软件：<code>GMiner</code>，挖<code>ETC</code></p>
<p>速度：<code>31.10MH/s</code>，效能：<code>403.85KH/W</code></p>
<p>电费都收不回来</p>
<h2 id="hexo-部署后，CNAME-会被自动删除，怎么办？"><a href="#hexo-部署后，CNAME-会被自动删除，怎么办？" class="headerlink" title="hexo 部署后，CNAME 会被自动删除，怎么办？"></a>hexo 部署后，CNAME 会被自动删除，怎么办？</h2><p>将需要上传至 github 的内容放在 source 文件夹，例如 CNAME、favicon.ico、images 等。</p>
<p><a href="https://www.zhihu.com/question/28814437/answer/44207790" target="_blank" rel="noopener">hexo 部署后，CNAME 会被自动删除，怎么办？ - 沉简的回答 - 知乎</a></p>
<h2 id="拿图片生成-icon"><a href="#拿图片生成-icon" class="headerlink" title="拿图片生成 icon"></a>拿图片生成 icon</h2><p><a href="https://www.logosc.cn/logo/favicon" target="_blank" rel="noopener">免费 Favicon.ico 图标在线生成器</a></p>
<h1 id="2023-06-05"><a href="#2023-06-05" class="headerlink" title="2023-06-05"></a>2023-06-05</h1><h2 id="utterances"><a href="#utterances" class="headerlink" title="utterances"></a>utterances</h2><p>把博客的评论插件从来必力换成了 github issues，用的是 utterances 插件，主要参考了这篇文章：<a href="https://blog.lanweihong.com/posts/24011/，他的文章有一处错误导致我一开始没有成功：" target="_blank" rel="noopener">https://blog.lanweihong.com/posts/24011/，他的文章有一处错误导致我一开始没有成功：</a></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">&#123;% if theme.utterance and theme.utterance.enable %&#125;</span><br><span class="line"></span><br><span class="line">!function()&#123;var e=document.createElement(&quot;script&quot;);e.type=&quot;text/javascript&quot;,e.async=!0,e.setAttribute(&quot;issue-term&quot;,&quot;&#123;&#123; theme.utterance.issue_term &#125;&#125;&quot;),e.setAttribute(&quot;theme&quot;,&quot;&#123;&#123; theme.utterance.theme &#125;&#125;&quot;),e.setAttribute(&quot;repo&quot;,&quot;&#123;&#123; theme.utterance.repo &#125;&#125;&quot;),e.crossorigin=&quot;anonymous&quot;,e.src=&quot;https://utteranc.es/client.js&quot;,document.getElementById(&quot;utterance-container&quot;).appendChild(e)&#125;()</span><br><span class="line"></span><br><span class="line">&#123;% endif %&#125;</span><br></pre></td></tr></table></figure>
<p>将如上内容替换为：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">&#123;% if theme.utterance and theme.utterance.enable %&#125;</span><br><span class="line"></span><br><span class="line">&lt;script type=&quot;text/javascript&quot;&gt;</span><br><span class="line">(function()&#123;</span><br><span class="line">    var e=document.createElement(&quot;script&quot;);</span><br><span class="line">    e.type=&quot;text/javascript&quot;,</span><br><span class="line">    e.async=!0,</span><br><span class="line">    e.setAttribute(&quot;issue-term&quot;,&quot;&#123;&#123; theme.utterance.issue_term &#125;&#125;&quot;),</span><br><span class="line">    e.setAttribute(&quot;theme&quot;,&quot;&#123;&#123; theme.utterance.theme &#125;&#125;&quot;),</span><br><span class="line">    e.setAttribute(&quot;repo&quot;,&quot;&#123;&#123; theme.utterance.repo &#125;&#125;&quot;),</span><br><span class="line">    e.crossorigin=&quot;anonymous&quot;,</span><br><span class="line">    e.src=&quot;https://utteranc.es/client.js&quot;,</span><br><span class="line">    document.getElementById(&quot;utterance-container&quot;).appendChild(e)</span><br><span class="line">    &#125;)()</span><br><span class="line">&lt;/script&gt;</span><br><span class="line">&#123;% endif %&#125;</span><br></pre></td></tr></table></figure>
<p>就成功了</p>
<p>我的博客一直是零评论，而且浏览量也不高，这方面需要改善一下了，主要是 SEO 做的不好，还有就是平常也没有宣传过，再就是文章更新的比较少，虽然 notes 更新很频繁。</p>
<h2 id="网格布局"><a href="#网格布局" class="headerlink" title="网格布局"></a>网格布局</h2><p>最近搞 AwesomeWeb 项目，发现用 flex 布局没法满足这样一个需求：多行的情况下，既均匀，又从左开始，比如第一行四个元素，第二行三个元素。要实现这种布局就只能用 grid 布局了，flex 布局确实只适合一维的情况，但 grid 布局可以很自由的搞定二维布局。</p>
<h1 id="2023-06-02"><a href="#2023-06-02" class="headerlink" title="2023-06-02"></a>2023-06-02</h1><p>react router 用的比较少，参考以下几篇文章：</p>
<ul>
<li><a href="https://zhuanlan.zhihu.com/p/431389907" target="_blank" rel="noopener">react-router-dom 使用指南（最新 V6.0.1）</a></li>
<li><a href="https://www.freecodecamp.org/chinese/news/react-router-in-5-minutes-2/" target="_blank" rel="noopener">5 分钟内了解 React Router——初学者教程</a></li>
<li><a href="https://juejin.cn/post/7102047013818073096" target="_blank" rel="noopener">React 路由使用</a></li>
</ul>
<h1 id="2023-06-01"><a href="#2023-06-01" class="headerlink" title="2023-06-01"></a>2023-06-01</h1><h2 id="正则表达式的坑"><a href="#正则表达式的坑" class="headerlink" title="正则表达式的坑"></a>正则表达式的坑</h2><p><img src="../images/2023/正则表达式的坑1.png" alt="正则表达式的坑1"></p>
<p><code>g</code>的作用是全局搜索，不加<code>g</code>的话，匹配到第一个匹配项就停止了匹配，加了<code>g</code>就会匹配上所有匹配项。但我们在用 test 的时候，其实并不需要<code>g</code>，因为匹配到一个就是 true 了。但如果加了<code>g</code>的话，正则表达式对象的 lastindex 属性就会编程最后一个匹配项，那你继续再用这个正则表达式对象的话，就是从最后一个匹配项之后开始匹配了，就啥也找不到（啥也找不到之后，就会把 lastindex 又置为 0）</p>
<p><img src="../images/2023/正则表达式的坑2.png" alt="正则表达式的坑2"></p>
<p>实际上我觉得 js 应该在使用 test 时，屏蔽掉<code>g</code></p>
<h2 id="UI-美学"><a href="#UI-美学" class="headerlink" title="UI 美学"></a>UI 美学</h2><p>我发现 UI 就是要匀称才好看，比如要均匀的平铺界面，留足缝隙（padding 和 margin），就是好看的关键要素，挤在一起就不好看了。人体也是如此，可以说匀称是个试金石。</p>
<h2 id="雪碧图"><a href="#雪碧图" class="headerlink" title="雪碧图"></a>雪碧图</h2><p>根据雪碧图+<code>background-position</code>+固定的图片宽高，可以从雪碧图中抽取某个图片。</p>
<p>以下来自 chatgpt 的回答（输入：雪碧图）：</p>
<p>雪碧图（Sprite）是一种在网页设计和开发中常用的技术，用于将多个小图标、按钮或其他图像元素合并到一张大图中。这个大图被称为雪碧图或精灵图。使用雪碧图可以减少页面加载时间，因为只需要加载一张大图而不是多张小图。在页面上显示不同的图像元素时，可以通过 CSS 来控制显示的位置和尺寸，从而实现不同元素的显示。</p>
<p>创建雪碧图的一般步骤如下：</p>
<ol>
<li>收集需要合并到雪碧图中的小图标或图像元素。</li>
<li>将这些小图标按照一定的规则排列在一张大图上，通常是水平或垂直排列。</li>
<li>使用图像编辑工具（如 Adobe Photoshop、GIMP 等）调整图像大小和位置，确保它们正确地对齐。</li>
<li>保存雪碧图为一张图像文件，通常是 PNG 格式。</li>
<li>在网页中使用 CSS 来引用雪碧图，并通过设置背景位置、尺寸等属性来控制显示不同的图像元素。</li>
</ol>
<p>下面是一个示例 CSS 代码，展示如何使用雪碧图中的图像元素：</p>
<figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-tag">Copy</span> <span class="selector-tag">code</span> <span class="selector-class">.icon</span> &#123;</span><br><span class="line">  <span class="attribute">background-image</span>: <span class="built_in">url</span>(<span class="string">"sprites.png"</span>);</span><br><span class="line">  <span class="attribute">background-repeat</span>: no-repeat;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-class">.icon-home</span> &#123;</span><br><span class="line">  <span class="attribute">background-position</span>: <span class="number">0</span> <span class="number">0</span>; <span class="comment">/* 雪碧图中home图标的位置 */</span></span><br><span class="line">  <span class="attribute">width</span>: <span class="number">32px</span>;</span><br><span class="line">  <span class="attribute">height</span>: <span class="number">32px</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-class">.icon-mail</span> &#123;</span><br><span class="line">  <span class="attribute">background-position</span>: -<span class="number">32px</span> <span class="number">0</span>; <span class="comment">/* 雪碧图中mail图标的位置 */</span></span><br><span class="line">  <span class="attribute">width</span>: <span class="number">32px</span>;</span><br><span class="line">  <span class="attribute">height</span>: <span class="number">32px</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>在上述示例中，<code>.icon</code>类指定了使用雪碧图作为背景图像，并禁止重复背景图像。<code>.icon-home</code>和<code>.icon-mail</code>类分别表示了使用雪碧图中的 home 图标和 mail 图标。通过设置<code>background-position</code>属性，可以指定在雪碧图中的位置。同时，通过设置 width 和 height 属性，可以控制显示的尺寸。</p>
<p>使用雪碧图可以提高网页加载速度和性能，减少 HTTP 请求次数，并且对于移动设备和低带宽环境尤其有益。</p>
<h1 id="2023-05-30"><a href="#2023-05-30" class="headerlink" title="2023-05-30"></a>2023-05-30</h1><p>如何白嫖到免费的 office 官方软件：<a href="https://www.youtube.com/watch?v=VSjRx7Hoa60&amp;ab_channel=%E9%9B%B6%E5%BA%A6%E8%A7%A3%E8%AF%B4" target="_blank" rel="noopener">Word、Excel、Pointpot 最强免费安装教程！ | 零度解说</a></p>
<h1 id="2023-05-29"><a href="#2023-05-29" class="headerlink" title="2023-05-29"></a>2023-05-29</h1><p>电脑不够轻巧便携，手机的系统不够有生产力，对于编程开发来说甚至都没有 chrome 调试工具，当然手机屏幕太小也是个问题，但我还是搞了个 aidlux 来折腾一番。想要在 aidlux 里面用上电脑版的 chrome，就要通过 xfce4 来运行，一进去就让选是 wayland 还是 vnc 方式，那么这两个方式有何区别呢？</p>
<h2 id="Wayland-与-VNC-有什么区别呢"><a href="#Wayland-与-VNC-有什么区别呢" class="headerlink" title="Wayland 与 VNC 有什么区别呢"></a>Wayland 与 VNC 有什么区别呢</h2><p>建议在平板和手机上面使用 Wayland，启动的过程需要一点时间，但是启动过后不过是 xfce 本身还是里面的程序运行的速度更快，但是 wayland 也有一些缺点，就是有部分较老的应用程序不支持，例如谷歌拼音需要 fcitx5 以后的版本。</p>
<p>如果是通过电脑端去访问，则使用 VNC 的方式，因为浏览器需要网络协议去或的渲染。</p>
<p>VNC 的速度虽然慢一点,但是兼容性更好，几乎支持所有的 Linux 桌面软件。</p>
<p>至于选择 Wayland 还是 VNC，可以先在 Wayland 中试试你要运行的程序，如果没有运行报错，闪退等情况，那么就可以选择 Wayland 的方式，如果有就需要选用 VNC 的方式。</p>
<p>参考：<a href="https://zhuanlan.zhihu.com/p/584177202" target="_blank" rel="noopener">AidLux 中正确使用 Wayland 的方式 - 知乎</a></p>
<h1 id="2023-05-27"><a href="#2023-05-27" class="headerlink" title="2023-05-27"></a>2023-05-27</h1><p>一直都想测一下新买的火影 t6a 的跑分，我朋友写了个奇怪的测试 CPU 的程序：<a href="http://118.190.10.34/mini-span-tree-kruskal-js/" target="_blank" rel="noopener">最小生成树 kruskal 算法 js 实现</a>，测试结果是插电源开 balance 模式，118ms。还行</p>
<h1 id="2023-05-26"><a href="#2023-05-26" class="headerlink" title="2023-05-26"></a>2023-05-26</h1><p>怎么用按钮控制滚动效果（产品经理说某些用户没有鼠标滚轮），其实跟滚轮的代码是一样的：</p>
<figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">targetElem.scrollLeft += evt.deltaY; <span class="comment">// 把evt.deltaY替换成每次点击按钮，要滚动的距离</span></span><br></pre></td></tr></table></figure>
<h1 id="2023-05-24"><a href="#2023-05-24" class="headerlink" title="2023-05-24"></a>2023-05-24</h1><p>公司项目遇到一个表情符号导致打开图页失败的问题，原因是转码错误：</p>
<figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">svgStr.replace(</span><br><span class="line">  /[^\x00-\x7f]/g,</span><br><span class="line">  (s) =&gt; <span class="string">"&amp;#x"</span> + s.codePointAt(<span class="number">0</span>).toString(<span class="number">16</span>) + <span class="string">";"</span></span><br><span class="line">);</span><br></pre></td></tr></table></figure>
<p>正确的转码应该是这样：</p>
<figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">export</span> <span class="function"><span class="keyword">function</span> <span class="title">unicodeEncode</span>(<span class="params">s: <span class="built_in">string</span></span>) </span>&#123;</span><br><span class="line">  <span class="keyword">const</span> arr = <span class="built_in">Array</span>.from(s);</span><br><span class="line">  <span class="keyword">let</span> res = <span class="string">""</span>;</span><br><span class="line">  <span class="keyword">for</span> (<span class="keyword">let</span> i = <span class="number">0</span>; i &lt; arr.length; i++) &#123;</span><br><span class="line">    res += <span class="string">"&amp;#x"</span> + <span class="built_in">Number</span>(arr[i].codePointAt(<span class="number">0</span>)).toString(<span class="number">16</span>) + <span class="string">";"</span>;</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">return</span> res;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>这里要提一下两个 api：<code>charCodeAt</code>和<code>codePointAt</code>，用 codePointAt 才能解析出正确的 unicode 编码，另外就是用数组来承载字符串，才能获得正确的字符长度，否则一个表情符号就会被判断成长度是 2</p>
<figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">console</span>.log(<span class="string">"😁"</span>.length); <span class="comment">// 2</span></span><br><span class="line"><span class="built_in">console</span>.log(<span class="built_in">Array</span>.from(<span class="string">"😁"</span>).length); <span class="comment">// 1</span></span><br></pre></td></tr></table></figure>
<p>最后说一下，其实不用转码就能解析出正确的 dom 了：</p>
<figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">new</span> DOMParser().parseFromString(<span class="string">'&lt;a value="😁"&gt;😁&lt;/a&gt;'</span>, <span class="string">"text/xml"</span>);</span><br></pre></td></tr></table></figure>
<h1 id="2023-05-20"><a href="#2023-05-20" class="headerlink" title="2023-05-20"></a>2023-05-20</h1><p>很少自己搭建项目，我发现我可能连搭建项目都不是很熟练，最近想自己做一个视频 app，视频资源用努努的，那么如何搭建一个 react+typescript+webpack 的应用呢？</p>
<p><a href="https://jsramblings.com/creating-a-react-app-with-webpack/" target="_blank" rel="noopener">Creating a React app with Webpack</a><br><a href="https://jsramblings.com/create-a-react-and-typescript-app-with-webpack/" target="_blank" rel="noopener">Create a React and Typescript app with Webpack</a></p>
<h1 id="2023-05-18"><a href="#2023-05-18" class="headerlink" title="2023-05-18"></a>2023-05-18</h1><p>安卓系统可以安装 linux 啦:aidlux，各大应用商店都有下载。安卓平板配合这个 app，生产力甩 iPad 几条街呀，我这条信息就是用 aidlux 里面的 vscode 编辑并发布的。</p>
<h1 id="2023-05-15"><a href="#2023-05-15" class="headerlink" title="2023-05-15"></a>2023-05-15</h1><p>测试 replit+githubpages，比较难搞，replit 的控制台环境并非完全可用的 linux 环境，连安装软件都不让。</p>
<p>有些链接是在本页打开，有些是新开一页，新开一页需要给标签填属性：<code>target=&quot;_blank&quot;</code></p>
<h1 id="2023-05-14"><a href="#2023-05-14" class="headerlink" title="2023-05-14"></a>2023-05-14</h1><p>之前看零度解说的时候，经常看到一个软件：IDM，今天我也下载了这个软件，下载网址：<a href="https://www.internetdownloadmanager.cn/download" target="_blank" rel="noopener">https://www.internetdownloadmanager.cn/download</a></p>
<p>激活方法：<a href="https://www.ygxz.in/idea/1650/" target="_blank" rel="noopener">https://www.ygxz.in/idea/1650/</a></p>
<p>脚本我也存了一份：<a href="../assets/IDM 激活工具.cmd">IDM 激活工具.cmd</a></p>
<h1 id="2023-05-10"><a href="#2023-05-10" class="headerlink" title="2023-05-10"></a>2023-05-10</h1><h2 id="express-use-next"><a href="#express-use-next" class="headerlink" title="express use next"></a>express use next</h2><p>前端搭建本地开发环境，一般都用 node 的 express 框架，其中 app use 中的 next 函数的含义是，当对同一个路径定义了多个回调函数，要调用 next()才会执行下一个回调函数。</p>
<p>参考：<a href="https://www.geeksforgeeks.org/what-is-the-use-of-next-function-in-express-js/" target="_blank" rel="noopener">What is the use of next() function in Express.js ? - GeeksforGeeks</a></p>
<h2 id="vscode-上移一行代码的快捷键"><a href="#vscode-上移一行代码的快捷键" class="headerlink" title="vscode 上移一行代码的快捷键"></a>vscode 上移一行代码的快捷键</h2><p><code>alt+up/down</code></p>
<h1 id="2023-05-03"><a href="#2023-05-03" class="headerlink" title="2023-05-03"></a>2023-05-03</h1><p>最近开始用 rider 开发 unity 游戏，很多编辑器的习惯跟 vscode 不一样，比如 vscode 打开文件左侧目录树会自动定位到相应的文件，感觉还是很方便的，在 rider 可以进行相应的设置：</p>
<p><img src="../images/2023/rider目录树自动定位到文件.jpg" alt="rider目录树自动定位到文件"></p>
<h1 id="2023-05-02"><a href="#2023-05-02" class="headerlink" title="2023-05-02"></a>2023-05-02</h1><p>最近买了一台火影 t6a 笔记本，性价比很高，重新部署博客的时候遇到报错：<code>bash: hexo: command not found</code>，需要安装<code>hexo-cli</code>，最好是全局：<code>npm i hexo-cli -g</code></p>
<h1 id="2023-04-28"><a href="#2023-04-28" class="headerlink" title="2023-04-28"></a>2023-04-28</h1><p>以前一直是用一个公共的 ChatGPT 账号，由于每次用都要登录很麻烦，今天终于自己创建了一个账号，创建账号有两个必要条件：</p>
<ol>
<li>国外手机号</li>
<li>翻墙的梯子</li>
</ol>
<p>国外手机号我一直没弄过，这次买了一个 2 美元的服务：<a href="https://sms-activate.org/" target="_blank" rel="noopener">https://sms-activate.org/</a></p>
<h1 id="2023-04-21"><a href="#2023-04-21" class="headerlink" title="2023-04-21"></a>2023-04-21</h1><p>useEffect 的变量监听有什么坑？useEffect 的变量监听是用的 Object.is()，对于对象是没法深入对比的，只比较两个对象的地址</p>
<p>试验 demo：<a href="https://replit.com/@liuqinh2s/useEffect#src/App.tsx" target="_blank" rel="noopener">useEffect - Replit</a></p>
<h1 id="2023-04-18"><a href="#2023-04-18" class="headerlink" title="2023-04-18"></a>2023-04-18</h1><p>最近养了多肉，在看多肉的养殖常识的时候，看到多肉必须要照紫外线而非普通的阳光，特别是不能隔着玻璃晒太阳，就在网上搜了一下玻璃隔离紫外线，结果还真涨知识了：</p>
<ul>
<li><a href="http://m.ce.cn/bwzg/202007/16/t20200716_35335869.shtml" target="_blank" rel="noopener">透过窗户玻璃照射进来的阳光会把你晒黑么？_中国经济网</a></li>
<li><a href="https://zh.wikipedia.org/wiki/%E7%B4%AB%E5%A4%96%E7%BA%BF" target="_blank" rel="noopener">紫外线-维基百科</a></li>
</ul>
<h2 id="scrollbar-的研究"><a href="#scrollbar-的研究" class="headerlink" title="scrollbar 的研究"></a>scrollbar 的研究</h2><p>chrome 的 scrollbar 可定制性比较高：</p>
<p><a href="https://segmentfault.com/a/1190000012800450" target="_blank" rel="noopener">https://segmentfault.com/a/1190000012800450</a></p>
<p>firefox 的 scrollbar 连宽度都无法定制 px：</p>
<p><a href="https://developer.mozilla.org/zh-CN/docs/Web/CSS/scrollbar-width" target="_blank" rel="noopener">https://developer.mozilla.org/zh-CN/docs/Web/CSS/scrollbar-width</a></p>
<p>鼠标滚轮横向滚动：<a href="https://codepen.io/zxuqian/pen/KKWyxja，就是把deltaY加到scrollLeft上" target="_blank" rel="noopener">https://codepen.io/zxuqian/pen/KKWyxja，就是把deltaY加到scrollLeft上</a></p>
<h1 id="2023-03-20"><a href="#2023-03-20" class="headerlink" title="2023-03-20"></a>2023-03-20</h1><p>为什么要保持饱满的精力，因为我发现，在精神状态不好的时候，人更加容易失控，比如精神状态不佳的时候，会去玩游戏，看抖音。而想要学习，或者做些比较复杂，枯燥，有难度的事情，是需要消耗大量精力的，这些事只能在精神状态好的时候才能做好。</p>
<h1 id="2023-03-08"><a href="#2023-03-08" class="headerlink" title="2023-03-08"></a>2023-03-08</h1><p>怎么获取 window 下的 iframe：<code>window.frames</code></p>
<p>官方文档：<a href="https://developer.mozilla.org/en-US/docs/Web/API/Window/frames" target="_blank" rel="noopener">Window.frames</a></p>
<p>怎么判断当前的执行环境是不是在 iframe 里面，如果是，则 <code>console.log(window.frameElement)</code> 一定可以打印出当前 iframe 的。</p>
<h1 id="2023-03-02"><a href="#2023-03-02" class="headerlink" title="2023-03-02"></a>2023-03-02</h1><p>useRef 今天又学会了一点，对于非原生组件，必须要写 useImperativeHandle，否则拿不到东西，原生组件则不用写这个，默认拿到的 ref.current 就是 dom 对象</p>
<h1 id="2023-02-28"><a href="#2023-02-28" class="headerlink" title="2023-02-28"></a>2023-02-28</h1><p>一直以来都对 useEffect 有个误解，以为它的作用范围是全局的，我的意思是在组件外部改了某个变量，我可以在组件内监听到，实际上是不行的。</p>
<p><strong>useEffect 的触发前提必须是组件正在 render，如果组件不 render，根本不会触发</strong></p>
<p>举个例子：</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">export</span> <span class="keyword">const</span> globalData = &#123; <span class="attr">data</span>: &#123; <span class="attr">a</span>: <span class="number">0</span> &#125; &#125;;</span><br><span class="line"><span class="keyword">export</span> <span class="keyword">const</span> App = <span class="function"><span class="params">()</span> =&gt;</span> &#123;</span><br><span class="line">  useEffect(<span class="function"><span class="params">()</span> =&gt;</span> &#123;</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="string">"触发监听"</span>);</span><br><span class="line">  &#125;, [globalData.data]);</span><br><span class="line">  <span class="keyword">return</span> <span class="xml"><span class="tag">&lt;&gt;</span><span class="tag">&lt;/&gt;</span>;</span></span><br><span class="line"><span class="xml">&#125;;</span></span><br><span class="line"><span class="xml">setTimeout(() =&gt; &#123;</span></span><br><span class="line"><span class="xml">  console.log("由我触发的监听");</span></span><br><span class="line"><span class="xml">  globalData.data = &#123; a: 1 &#125;;</span></span><br><span class="line"><span class="xml">&#125;, 1000);</span></span><br></pre></td></tr></table></figure>
<p>以上代码是不会触发监听的，因为组件没有 render，也就不会执行 useEffect()函数，也就不会对比变量，进监听函数。它不像消息总线和 dom 事件这种全局的监听，它仅限于组件 render 的过程中监听</p>
<p>如果要实现全局的监听，就要自己实现一个 useWatch 了，自己实现一个 useWatch 比较复杂，先埋个坑，以后再填。</p>
<h1 id="2023-02-23"><a href="#2023-02-23" class="headerlink" title="2023-02-23"></a>2023-02-23</h1><p>刚 commit 的代码想撤回到工作区：</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">git reset --soft HEAD</span><br></pre></td></tr></table></figure>
<p>想一步并作两步，彻底抹除痕迹：</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">git reset --hard HEAD</span><br></pre></td></tr></table></figure>
<p>对 git 还是不够熟悉，之后抽空再巩固一下</p>
<p>两种方式不清除本地提交和清除本地提交的方法</p>
<p>1、回退到上次提交并清除本地提交的代码</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">git reset --hard HEAD^</span><br></pre></td></tr></table></figure>
<p>2、回退到上次提交不清除本地提交的代码</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">git reset --soft HEAD~1</span><br></pre></td></tr></table></figure>
<h1 id="2023-02-14"><a href="#2023-02-14" class="headerlink" title="2023-02-14"></a>2023-02-14</h1><p>js 最简单的打包是用 rollup.js：</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">rollup main.js --file bundle.js</span><br></pre></td></tr></table></figure>
<p><a href="https://www.ruanyifeng.com/blog/2022/05/rollup.html" target="_blank" rel="noopener">打包工具 rollup.js 入门教程 - 阮一峰的网络日志</a></p>
<p>比 webpack 简单易用</p>
<h1 id="2023-02-10"><a href="#2023-02-10" class="headerlink" title="2023-02-10"></a>2023-02-10</h1><p>最近想自己做些软件的想法越来越强烈，感觉一直为公司打工不是出路，必须要另寻出路：</p>
<ol>
<li>一方面我可以把自己博客中的精华部分发布到其他的流量平台获取流量和关注，以及认识更多的人，增加自己的机遇，和行业氛围。</li>
<li>我可以模仿其他的工具类网站，自己实现一些简单的小工具，甚至当做服务发布出去，赚钱</li>
</ol>
<p>看到几个不错的网站：</p>
<ol>
<li><a href="http://www.atoolbox.net/" target="_blank" rel="noopener">http://www.atoolbox.net/</a></li>
<li><a href="https://www.juhe.cn/" target="_blank" rel="noopener">https://www.juhe.cn/</a></li>
</ol>
<p>接下来我打算研究一下数独的生成，自己做一个数独小游戏</p>
<h2 id="useContext-的使用"><a href="#useContext-的使用" class="headerlink" title="useContext 的使用"></a>useContext 的使用</h2><p>用起来很简单就是一句：</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> context = useContext(xxxContext);</span><br></pre></td></tr></table></figure>
<p>但是准备这个环境变量的写法稍微有点复杂：</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 先定义一个全局变量</span></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">const</span> xxxContext = React.createContext &lt; xxxType &gt; &#123;&#125;;</span><br><span class="line"><span class="comment">// 然后用这个.Provider包裹起来，再传入一个value</span></span><br><span class="line">&lt;xxxContext.Provider value=&#123;&#123;&#125;&#125;&gt;...&lt;<span class="regexp">/xxxContext.Provider&gt;;</span></span><br></pre></td></tr></table></figure>
<h1 id="2023-02-09"><a href="#2023-02-09" class="headerlink" title="2023-02-09"></a>2023-02-09</h1><p>svg use 可以用来复制一个 svg 元素：</p>
<p><a href="https://developer.mozilla.org/en-US/docs/Web/SVG/Element/use" target="_blank" rel="noopener">svg use</a></p>
<p>AI 学习：<a href="https://zhuanlan.zhihu.com/p/414450099" target="_blank" rel="noopener">https://zhuanlan.zhihu.com/p/414450099</a></p>
<h1 id="2023-02-08"><a href="#2023-02-08" class="headerlink" title="2023-02-08"></a>2023-02-08</h1><p>切角效果：</p>
<figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-tag">div</span> &#123;</span><br><span class="line">  <span class="attribute">width</span>: <span class="number">100px</span>;</span><br><span class="line">  <span class="attribute">height</span>: <span class="number">100px</span>;</span><br><span class="line">  <span class="attribute">background</span>: <span class="number">#58a</span>;</span><br><span class="line">  <span class="attribute">background</span>: <span class="built_in">linear-gradient</span>(135deg, transparent 15px, red 0) top left, <span class="built_in">linear-gradient</span>(</span><br><span class="line">        -135deg,</span><br><span class="line">        transparent 15px,</span><br><span class="line">        yellow 0</span><br><span class="line">      ) top right,</span><br><span class="line">    <span class="built_in">linear-gradient</span>(-45deg, transparent 15px, green 0) bottom right, <span class="built_in">linear-gradient</span>(</span><br><span class="line">        45deg,</span><br><span class="line">        transparent 15px,</span><br><span class="line">        blue 0</span><br><span class="line">      ) bottom left;</span><br><span class="line">  <span class="attribute">background-size</span>: <span class="number">50%</span> <span class="number">50%</span>;</span><br><span class="line">  <span class="attribute">background-repeat</span>: no-repeat;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p><a href="https://codepen.io/liuqinh2s/pen/XWBKvEe" target="_blank" rel="noopener">效果演示</a></p>
<h1 id="2023-02-07"><a href="#2023-02-07" class="headerlink" title="2023-02-07"></a>2023-02-07</h1><p>一月份的目标：金铲铲之战打上大师段位，并写一份游戏攻略，已经完成了。2 月份我打算看完这本《CSS 揭秘》，因为已经拖了很久了，虽然说前面看的不少内容已经忘了，但是先完整的看完一遍再说。</p>
<p>把一个图片裁剪出菱形：</p>
<figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-tag">clip-path</span>: <span class="selector-tag">polygon</span>(50% 0, 100% 50%, 50% 100%, 0 50%);</span><br></pre></td></tr></table></figure>
<p><a href="https://codepen.io/liuqinh2s/pen/mdjOgvz?editors=1111" target="_blank" rel="noopener">效果演示</a></p>
<h1 id="2023-01-30"><a href="#2023-01-30" class="headerlink" title="2023-01-30"></a>2023-01-30</h1><p>遇到一个<code>cannot access &quot;xxx&quot; before initialization</code>的问题，xxx 是一个抽象类，如果这个抽象类没有 import 任何其他的东西应该不会报错才对，所以问题是出在它的引用上。最后查到是循环引用了。</p>
<h1 id="2023-01-12"><a href="#2023-01-12" class="headerlink" title="2023-01-12"></a>2023-01-12</h1><p>今早上尝试给多看 app 导入 mobi 格式的电子书，才发现 mobi 格式原来竟是 kindle 自己家的格式，不过也被后来的 azw 系列替代了，现在都是 azw3 格式。于是我只好转成 epub 格式，然后我发现多看 app 的看书体验比 kindle app 还好。只能说 kindle 不思进取吧。而且人家已经退出了中国，另外我的 kindle paper white3 用了 9 年也在前几日终于寿终正寝了（估计是主板坏了），另外为了贯彻我的一个手机一台电脑的极简主义风格，不打算修或者买个新的 kindle 了。以后都不会再用 kindle，电脑上看电子书用 calibre，手机上用多看。</p>
<h1 id="2023-01-10"><a href="#2023-01-10" class="headerlink" title="2023-01-10"></a>2023-01-10</h1><p>css 如何生成一个椭圆？</p>
<figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-tag">border-radius</span>: 50%;</span><br></pre></td></tr></table></figure>
<p>如何生成一个半椭圆：</p>
<figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">border-radius: 50% / 100% 100% 0 0;</span><br><span class="line">border-radius: 100% 0 0 100% / 50%;</span><br></pre></td></tr></table></figure>
<p>这两种都是简写模式，比方说<code>border-radius: 50% / 100% 100% 0 0;</code>是<code>border-radius: 50% 50% 50% 50% / 100% 100% 0 0;</code>的简写，斜杠区分宽高</p>
<blockquote>
<p>不过，真正简洁的方法还是使用 border-radius 这个简写属性，因为<br>我们可以向它一次性提供用空格分开的多个值。如果我们传给它四个值，这<br>四个值就会被分别从左上角开始以顺时针顺序应用到元素的各个拐角。如果<br>我们提供的值少于四个，则它们会以 CSS 的常规方式重复，类似于 borderwidth 的值。如果只提供了三个值，则意味着第四个值与第二值相同；如果<br>只有两个值，则意味着第三个值与第一个相同。</p>
</blockquote>
<p>四分之一椭圆：</p>
<figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-tag">border-radius</span>: 100% 0 0 0;</span><br></pre></td></tr></table></figure>
<h1 id="2023-01-09"><a href="#2023-01-09" class="headerlink" title="2023-01-09"></a>2023-01-09</h1><p>之前看过一篇文章，讲中国的每个朝代差不多都活不过 300 年，因为持续不断的贫富分化（土地兼并），让整个社会民不聊生，社会动荡，重新洗牌。现在是建国 74 周年，150 年后达到当朝的顶峰，也就是 2099 年，我们这一代还能活的比较滋润，后面几代基本上是活的不像人样了。每一代人都有每一代人的宿命。这是历史的进程。</p>
<h1 id="2023-01-08"><a href="#2023-01-08" class="headerlink" title="2023-01-08"></a>2023-01-08</h1><p>中午吃饭的时候，讨论到春节的车票问题，突然发现我没有很好的利用区间来解决车票问题，<strong>众所周知：区间选得越大，放的票越多，越容易买到票</strong>。我抢到的是一等座，一等座比二等座贵了 200 块，如果我加点区间抢二等座，说不定比我一等座要便宜。以后一定要记住这一点，高铁公司是希望所有人都从始发站做到终点站的，这样它才能赚得最多，所以故意把区间越大的票弄得越多，据说始发站到终点站的票，是其他区间的三倍。</p>
<h1 id="2023-01-07"><a href="#2023-01-07" class="headerlink" title="2023-01-07"></a>2023-01-07</h1><p>怎么防止重复添加同一个事件回调函数？</p>
<p>答案是在每次添加前都 off 掉旧的，但是一定要注意，要指定回调函数，不然所有的事件回调函数都被移除了（影响到其他地方）。而且只需要一个 off 就能移除掉 n 个重复的：</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">for</span> (<span class="keyword">let</span> i = <span class="number">0</span>; i &lt; n; i++) &#123;</span><br><span class="line">  $dom.on(<span class="string">"click"</span>, func1);</span><br><span class="line">&#125;</span><br><span class="line">$dom.off(<span class="string">"click"</span>, func1);</span><br></pre></td></tr></table></figure>
<p>另外 off 和 one 是有区别的，one 添加的多个 func1，执行完一个后是不会影响到其他的 one 执行:</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">for</span> (<span class="keyword">let</span> i = <span class="number">0</span>; i &lt; n; i++) &#123;</span><br><span class="line">  $dom.one(<span class="string">"click"</span>, func1);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>这样写回调函数还是能执行 n 次，但下面的代码回调函数只会执行一次</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">for</span> (<span class="keyword">let</span> i = <span class="number">0</span>; i &lt; n; i++) &#123;</span><br><span class="line">  $dom.off(<span class="string">"click"</span>, func1);</span><br><span class="line">  $dom.on(<span class="string">"click"</span>, func1);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h2 id="calibre-分享电子书到-kindle，书名自动变拼音"><a href="#calibre-分享电子书到-kindle，书名自动变拼音" class="headerlink" title="calibre 分享电子书到 kindle，书名自动变拼音"></a>calibre 分享电子书到 kindle，书名自动变拼音</h2><p>解决办法：<a href="https://bookfere.com/post/1042.html" target="_blank" rel="noopener">https://bookfere.com/post/1042.html</a></p>
<h1 id="2023-01-06"><a href="#2023-01-06" class="headerlink" title="2023-01-06"></a>2023-01-06</h1><p>年度计划基本上是这样：</p>
<ol>
<li>戒游戏，短视频，小黄片</li>
<li>看书，看长视频，学习新技能</li>
<li>学英语，数学</li>
</ol>
<p>要看的书有哪些？今年的第一本书是：《CSS 揭秘》</p>
<h2 id="CSS-揭秘读书笔记"><a href="#CSS-揭秘读书笔记" class="headerlink" title="CSS 揭秘读书笔记"></a>CSS 揭秘读书笔记</h2><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-tag">background</span>: <span class="selector-tag">repeating-linear-gradient</span>(</span><br><span class="line">  60<span class="selector-tag">deg</span>,</span><br><span class="line">  <span class="selector-tag">red</span>,</span><br><span class="line">  <span class="selector-tag">blue</span> 15<span class="selector-tag">px</span>,</span><br><span class="line">  <span class="selector-tag">green</span> 0,</span><br><span class="line">  <span class="selector-tag">yellow</span> 30<span class="selector-tag">px</span></span><br><span class="line">);</span><br></pre></td></tr></table></figure>
<p>green 0 的意思是什么？</p>
<blockquote>
<p>为了避免每次改动条纹宽度时都要修改两个数字，我们可以再次从规范那里找到捷径。“如果某个色标的位置值比整个列表中在它之前的色标的位置值都要小，则该色标的位置值会被设置为它前面所有色标位置值的最大值。”这意味着，如果我们把第二个色标的位置值设置为 0，那它的位置就总是会被浏览器调整为前一个色标的位置值，这个结果正是我们想要的。</p>
</blockquote>
<h1 id="2023-01-05"><a href="#2023-01-05" class="headerlink" title="2023-01-05"></a>2023-01-05</h1><p>发现 react 里面用不了 dispatchEvent，有个需求是对输入框按 enter 触发跟 onBlur 一样的效果，我在 onKeyUp 里面这么写：</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">onKeyUp=&#123;e =&gt; &#123;</span><br><span class="line">  <span class="keyword">if</span>(e.key === <span class="string">'Enter'</span>)&#123;</span><br><span class="line">    e.target.dispatchEvent(<span class="keyword">new</span> Event(<span class="string">'blur'</span>));</span><br><span class="line">  &#125;</span><br><span class="line">&#125;&#125;</span><br></pre></td></tr></table></figure>
<p>根本没效果</p>
<p>只好改成这样：</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">onKeyDown=&#123;e =&gt; &#123;</span><br><span class="line">  <span class="keyword">if</span>(e.key === <span class="string">'Enter'</span>)&#123;</span><br><span class="line">    e.currentTarget.blur();</span><br><span class="line">  &#125;</span><br><span class="line">&#125;&#125;</span><br></pre></td></tr></table></figure>
<p>target 和 currentTarget 的区别：target 是注册事件的 dom，但不一定是真正触发事件的 dom，currentTarget 是真正触发事件的 dom。有一种很常见的做法是在祖先节点上注册事件，然后再在事件里面分辨具体是哪个子节点，这就叫：事件委托，可以有效减少事件注册的数量</p>
<h1 id="2023-01-03"><a href="#2023-01-03" class="headerlink" title="2023-01-03"></a>2023-01-03</h1><p>新的一年又开始了，麻木了，但还是寻求着改变。我跟我堂弟说了一些东西，我自己觉得很有道理，便写在这里吧：</p>
<p>总结：我的学校生涯算是比较成功的，我的高考后的人生算是比较失败的（上了好大学，但没有努力，工作没有找好）</p>
<ol>
<li>学校生涯的成功，我总结为，肯竞争，有先发优势，只要具备这两样，即可成功。因为学校里面的目标是一致的，清晰的，有学校的制度管着，只要有一定的天赋，有竞争意识，有优势能尝到甜头，就会越来越优秀。</li>
<li>高考结束后的人生，必须转换驱动力。因为失去了学校的管束，和清晰的目标。必须要自己管自己，自己给自己定目标。而这最好的一种情况是有自己所热爱的领域和事业，兴趣爱好。只要有，这之后的整个人生就可以很成功，没有就会很失败。一份热爱的事业，必须对自己有着独特的意义，跟其他事的区别很明显。比如我特别喜欢科幻，向往科幻中的未来世界，我对人类意识的数字化很感兴趣，但这个过于前沿，不能和当下的事结合。</li>
</ol>
<p>不管怎么说，我觉得我新的一年必须要戒网络游戏，短视频。同时要看书，看长视频。别人戒毒都可以成功，我戒个这个怎么就不可以。</p>
<h2 id="CSS-解密读书笔记"><a href="#CSS-解密读书笔记" class="headerlink" title="CSS 解密读书笔记"></a>CSS 解密读书笔记</h2><p>目前还在看背景与边框，书中提得比较多的是 DRY（Do not Repeat Yourself），就是尽量少的减少重复，因为重复意味着改动不方便。</p>
<p>书似乎是按一个个难题进行编排的，比如半透明边框，多重边框，灵活背景定位。</p>
<h1 id="2022-12-21"><a href="#2022-12-21" class="headerlink" title="2022-12-21"></a>2022-12-21</h1><p>如何给女朋友拍照</p>
<ol>
<li>构图，拍全身还是上半身，还是头颈部，要想清楚</li>
</ol>
<ul>
<li>拍全身如何显腿长：<ol>
<li>低机位+把腿放在镜头偏下的边缘（原理是近大远小，广角畸变）</li>
<li>如果是坐着的，尽量让腿伸出来，用侧面对着镜头</li>
</ol>
</li>
</ul>
<ol start="2">
<li>表情，一定要抓拍到好的表情，美的表情，过滤掉不好的，丑的</li>
</ol>
<ul>
<li>脸小：斜向上 45 度</li>
</ul>
<ol start="3">
<li>光线，光线是否充足，是要拍清晰，还是故意背光取剪影。光线的方向</li>
</ol>
<ul>
<li>脸白：记得点对焦框旁边的小太阳调整曝光补偿，侧光，侧逆光</li>
</ul>
<ol start="3">
<li>后期：磨皮，美白，背景虚化</li>
</ol>
<h1 id="2022-12-14"><a href="#2022-12-14" class="headerlink" title="2022-12-14"></a>2022-12-14</h1><h2 id="搜索引擎小技巧"><a href="#搜索引擎小技巧" class="headerlink" title="搜索引擎小技巧"></a>搜索引擎小技巧</h2><p>努努视频的搜索从昨天开始就挂了，遇到这种情况我们怎么搜索呢？其实可以用谷歌的搜索引擎来完成这个需求：</p>
<p><code>site:nunuyy5.org &quot;斗罗大陆&quot;</code></p>
<p>还有一个用来找 pdf 或者种子的技巧：</p>
<p><code>filetype:pdf &quot;Vue.js设计与实现&quot;</code></p>
<h1 id="2022-12-12"><a href="#2022-12-12" class="headerlink" title="2022-12-12"></a>2022-12-12</h1><h2 id="深入对比对象"><a href="#深入对比对象" class="headerlink" title="深入对比对象"></a>深入对比对象</h2><p>怎么深入比较两个对象是否相等（不管引用是否相等，只看值），最简单的办法就是使用<code>JSON.stringify</code>。</p>
<p><code>===</code>和<code>Object.is()</code>有什么区别？</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="literal">NaN</span> === <span class="literal">NaN</span>; <span class="comment">// false</span></span><br><span class="line"><span class="built_in">Object</span>.is(<span class="literal">NaN</span>, <span class="literal">NaN</span>); <span class="comment">// true</span></span><br><span class="line"></span><br><span class="line"><span class="number">-0</span> === +<span class="number">0</span>; <span class="comment">// true</span></span><br><span class="line"><span class="built_in">Object</span>.is(<span class="number">-0</span>, +<span class="number">0</span>); <span class="comment">// false</span></span><br></pre></td></tr></table></figure>
<h2 id="文本溢出常用处理手段"><a href="#文本溢出常用处理手段" class="headerlink" title="文本溢出常用处理手段"></a>文本溢出常用处理手段</h2><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-class">.ellipsis</span> &#123;</span><br><span class="line">  <span class="attribute">white-space</span>: nowrap;</span><br><span class="line">  <span class="attribute">overflow</span>: hidden;</span><br><span class="line">  <span class="attribute">text-overflow</span>: ellipsis;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h2 id="width-100-和-auto-的区别"><a href="#width-100-和-auto-的区别" class="headerlink" title="width 100%和 auto 的区别"></a>width 100%和 auto 的区别</h2><p><a href="https://stackoverflow.com/questions/17468733/difference-between-width-auto-and-width-100-percent" target="_blank" rel="noopener">difference between width auto and width 100 percent</a></p>
<p>实验:<a href="https://replit.com/@liuqinh2s1/css-textOverflow#src/App.tsx" target="_blank" rel="noopener">https://replit.com/@liuqinh2s1/css-textOverflow#src/App.tsx</a></p>
<h2 id="一个单词是不会换行的"><a href="#一个单词是不会换行的" class="headerlink" title="一个单词是不会换行的"></a>一个单词是不会换行的</h2><p>发现行内元素居然不会换行，原来是因为被当成一个单词了</p>
<p>实验：<a href="https://replit.com/@liuqinh2s1/cssTest2#src/App.tsx" target="_blank" rel="noopener">https://replit.com/@liuqinh2s1/cssTest2#src/App.tsx</a></p>
<p>用样式可以控制每个字母换行：</p>
<figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-tag">word-break</span>: <span class="selector-tag">break-all</span>;</span><br><span class="line"><span class="selector-tag">word-wrap</span>: <span class="selector-tag">break-word</span>;</span><br></pre></td></tr></table></figure>
<h1 id="2022-12-09"><a href="#2022-12-09" class="headerlink" title="2022-12-09"></a>2022-12-09</h1><h2 id="Http-请求的数据格式"><a href="#Http-请求的数据格式" class="headerlink" title="Http 请求的数据格式"></a>Http 请求的数据格式</h2><p>Http 请求中，dataType 和 ContentType 的区别</p>
<p>http 的头其实是可以随意书写的，只要服务器能适配就行，当然大部分是约定的。我只看到 Content-Type，request 和 response 都有，但没有 dataType。dataType 用于客户端通知服务器，客户端需要什么类型的返回数据。说有用也有用，说没用也没啥用，服务器会返回什么类型的数据，客户端肯定是知道的啊，一开始就约定了</p>
<p>常见的数据格式：</p>
<ol>
<li><code>application/json</code></li>
<li><code>application/x-www-form-urlencoded</code></li>
</ol>
<h2 id="flex，flex-grow，flex-shrink，flex-basis"><a href="#flex，flex-grow，flex-shrink，flex-basis" class="headerlink" title="flex，flex-grow，flex-shrink，flex-basis"></a>flex，flex-grow，flex-shrink，flex-basis</h2><p>这个东西的计算公式官网没有公布，导致只能查别人写的资料，或者自己推导。经过多次实验后，结论如下：</p>
<p>grow 的计算跟自身宽高无关，直接按比例分配剩余的空间，shrink 的计算是跟自身宽高有关的，需要根据自身宽高，按加权比例平摊（缩减）超出的空间。</p>
<p>假设计算的是水平方向的 flex：</p>
<p>grow 的算法如下：</p>
<p>单个元素需要 grow 的量：<code>(单个子元素 flex-grow/总的 flex-grow)*(父容器宽度-子元素宽度之和)</code></p>
<p>shrink 的算法如下：</p>
<p>假设 div1 是 100px, flex-shrink:1；div2 是 200px, flex-shrink:2；div3 是 300px, flex-shrink: 3。容器宽度 400px</p>
<p>div1 元素需要 shrink 的量：<code>(100*1)/(100*1+200*2+300*3)*(100+200+300-400)</code></p>
<p>也就是加权比例，需要用到自身的宽高</p>
<p>flex-basis 就是宽高的意思，但比宽高优先级高，比如定义了 width: 100px; flex-basis: 0px;那么就是按 0 去进行 flex 的。</p>
<p>实验地址：<a href="https://replit.com/@liuqinh2s1/css-flex#src/App.tsx" target="_blank" rel="noopener">https://replit.com/@liuqinh2s1/css-flex#src/App.tsx</a></p>
<h1 id="2022-12-08"><a href="#2022-12-08" class="headerlink" title="2022-12-08"></a>2022-12-08</h1><h2 id="react-怎么区分父组件发起的渲染，还是子组件自身发起的渲染"><a href="#react-怎么区分父组件发起的渲染，还是子组件自身发起的渲染" class="headerlink" title="react 怎么区分父组件发起的渲染，还是子组件自身发起的渲染"></a>react 怎么区分父组件发起的渲染，还是子组件自身发起的渲染</h2><p>用 react 的过程中遇到一个需求：子组件渲染的时候，需要知道是父组件发起的，还是子组件自身发起的渲染。如果是父组件发起的，就用父组件传过来的数据，如果是子组件发起的，就用子组件自身的数据。</p>
<p>那么怎么达到这个目的呢，有两种方案：</p>
<p>（1）增加一个变量<code>xxx</code>标志父组件的刷新，然后子组件 useEffect 监听这个变量</p>
<p>代码如下：</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">useEffect(<span class="function"><span class="params">()</span> =&gt;</span> &#123;</span><br><span class="line">  setData(props.data);</span><br><span class="line">&#125;, [props.xxx]); <span class="comment">// 确保每次父组件渲染的时候xxx跟上次不同</span></span><br></pre></td></tr></table></figure>
<p>（2）还有一个方案是使用不同的 key 去渲染子组件（这样就能强制刷新子组件了）</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&lt;Child key=&#123;xxx&#125;&gt;<span class="xml"><span class="tag">&lt;/<span class="name">Child</span>&gt;</span></span> <span class="comment">// 确保每次父组件渲染的时候xxx跟上次不同</span></span><br></pre></td></tr></table></figure>
<p>这两种做法，还有本质上的区别，因为第二种方法会导致 react 的虚拟 dom 中直接干掉子组件（以及它的子节点），这会导致整个子节点刷新，而第一种方案则不会，第一种方案比较高效。</p>
<p>测试案例：<a href="https://replit.com/@liuqinh2s1/whereIsRerenderComeFrom#src/Sub.tsx" target="_blank" rel="noopener">https://replit.com/@liuqinh2s1/whereIsRerenderComeFrom#src/Sub.tsx</a></p>
<h2 id="如何打包-chrome-扩展程序"><a href="#如何打包-chrome-扩展程序" class="headerlink" title="如何打包 chrome 扩展程序"></a>如何打包 chrome 扩展程序</h2><p>在 chrome 扩展程序管理中找到了，开发者模式-&gt;打包扩展程序，但是提示我：<code>打包扩展程序错误 指定扩展程序的私有密钥已存在。请重复使用该密钥，或者先删除它。</code></p>
<p>上网查了一下，都说已经打包过了，要我找到第一次打包的位置，鬼记得啊，但最后还是借助一定的手段找到了。扩展程序都有自己的 id，然后我用 everything（一个很好用的搜文件软件支持 Windows 系统）搜索一下这个 id，居然真的找到了，是个目录名，还好我没有手贱去改目录名。</p>
<h1 id="2022-12-07"><a href="#2022-12-07" class="headerlink" title="2022-12-07"></a>2022-12-07</h1><p>没想到疫情说放开就放开了，现在开始准备个人防控，但药物却买不到，以前没有做准备，从别处抄了个清单：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">前期吃这个：</span><br><span class="line">1. 四季抗病毒合剂</span><br><span class="line">2. 复方一支蒿颗粒</span><br><span class="line">浑身疼吃：复方氨酚烷胺胶囊</span><br><span class="line">发烧吃：</span><br><span class="line">低于38.5°吃：乙烯氨基酚片</span><br><span class="line">高于38.5°吃：布洛芬缓释胶囊</span><br><span class="line">后期吃：</span><br><span class="line">1. 连花清瘟胶囊</span><br><span class="line">2. 蒲地蓝消炎片</span><br><span class="line">咳嗽吃：消炎止咳片</span><br></pre></td></tr></table></figure>
<h1 id="2022-12-06"><a href="#2022-12-06" class="headerlink" title="2022-12-06"></a>2022-12-06</h1><p><a href="https://juejin.cn/post/6844903937468792846" target="_blank" rel="noopener">react 父组件调用子组件的函数</a>：<code>useImperativeHandle</code></p>
<p>子组件：</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 必须是个函数，且函数参数是props和ref</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">children</span>(<span class="params">props, ref</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">const</span> func = <span class="function"><span class="params">()</span> =&gt;</span> &#123;</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="string">"执行func"</span>);</span><br><span class="line">  &#125;;</span><br><span class="line">  <span class="comment">// 用useImperativeHandle暴露一些外部ref能访问的属性，必须要写这个，不然ref什么也拿不到</span></span><br><span class="line">  useImperativeHandle(ref, () =&gt; &#123;</span><br><span class="line">    <span class="comment">// 需要将暴露的接口返回出去</span></span><br><span class="line">    <span class="keyword">return</span> &#123;</span><br><span class="line">      xxx: <span class="function"><span class="params">()</span> =&gt;</span> &#123;</span><br><span class="line">        func();</span><br><span class="line">      &#125;,</span><br><span class="line">    &#125;;</span><br><span class="line">  &#125;);</span><br><span class="line">  <span class="keyword">return</span> <span class="xml"><span class="tag">&lt;<span class="name">h1</span>&gt;</span>children<span class="tag">&lt;/<span class="name">h1</span>&gt;</span></span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> forwardRef(children);</span><br></pre></td></tr></table></figure>
<p>父组件：</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> childrenRef = useRef(<span class="literal">null</span>);</span><br><span class="line">childrenRef.current.xxx();</span><br><span class="line"><span class="keyword">return</span> <span class="xml"><span class="tag">&lt;<span class="name">children</span> <span class="attr">ref</span>=<span class="string">&#123;childrenRef&#125;</span> /&gt;</span>;</span></span><br></pre></td></tr></table></figure>
<p>试验基地：<a href="https://replit.com/@liuqinh2s/react-practice#README.md" target="_blank" rel="noopener">react-practice</a></p>
<h1 id="2022-12-05"><a href="#2022-12-05" class="headerlink" title="2022-12-05"></a>2022-12-05</h1><h2 id="css-两种盒模型"><a href="#css-两种盒模型" class="headerlink" title="css 两种盒模型"></a>css 两种盒模型</h2><figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">box-sizing: border-box; // 这个会把边框的宽度，以及padding计入width和height</span><br><span class="line">box-sizing: content-box; // 这个不会把边框的宽度，以及padding计入width和height，且这个是默认值</span><br></pre></td></tr></table></figure>
<blockquote>
<p>注意 margin 在两种盒模型都是不计入宽高的</p>
</blockquote>
<h2 id="react-受控组件和非受控组件"><a href="#react-受控组件和非受控组件" class="headerlink" title="react 受控组件和非受控组件"></a>react 受控组件和非受控组件</h2><p>使用 react 的过程中发现，有的时候需要写很多的更新代码，比如 Input 标签，需要在 onBlur 的时候更新 value，需要在 onKeyUp（按 enter）的时候更新 value，如此会非常麻烦，远不如以前用 jquery 的时候，直接获取 dom 的值。</p>
<p>如果对于一个组件，我们用 useState 来存储状态，并在每个更新事件中更新值，这种我们叫：受控组件</p>
<p>还有一种写法是，直接不使用 useState，也就不用更新值，需要拿值的时候，直接从 dom 获取（怎么获取 dom？用 useRef）。</p>
<p>官方文档：<a href="https://zh-hans.reactjs.org/docs/uncontrolled-components.html" target="_blank" rel="noopener">https://zh-hans.reactjs.org/docs/uncontrolled-components.html</a></p>
<h1 id="2022-12-02"><a href="#2022-12-02" class="headerlink" title="2022-12-02"></a>2022-12-02</h1><p>react 怎么获取 children，比如<code>&lt;Button&gt;&lt;span&gt;AA&lt;/span&gt;&lt;/Button&gt;</code></p>
<p><a href="https://reactjs.org/docs/glossary.html#propschildren" target="_blank" rel="noopener">https://reactjs.org/docs/glossary.html#propschildren</a></p>
<p>但问题来了，既然 children 占了 props 的一个键，如果这样写呢：<code>&lt;Button children=&quot;BB&quot;&gt;&lt;span&gt;AA&lt;/span&gt;&lt;/Button&gt;</code></p>
<p>如果是 ts 的话会报错：<code>&#39;children&#39; are specified twice. The attribute named &#39;children&#39; will be overwritten.</code></p>
<p>然后 node 控制台也会发出警告，但依旧是可以运行的，且 children 最终结果会是：<code>&lt;span&gt;AA&lt;/span&gt;</code></p>
<p>顺带说一句 replit.com 是真好用啊，比 codepen 强太多了。</p>
<h1 id="2022-12-01"><a href="#2022-12-01" class="headerlink" title="2022-12-01"></a>2022-12-01</h1><p>安装免费的正版的激活的 office，官方提供的白嫖渠道：</p>
<p><a href="https://www.youtube.com/watch?v=VSjRx7Hoa60&amp;t=319s&amp;ab_channel=%E9%9B%B6%E5%BA%A6%E8%A7%A3%E8%AF%B4" target="_blank" rel="noopener">https://www.youtube.com/watch?v=VSjRx7Hoa60&amp;t=319s&amp;ab_channel=%E9%9B%B6%E5%BA%A6%E8%A7%A3%E8%AF%B4</a></p>
<h1 id="2022-11-27"><a href="#2022-11-27" class="headerlink" title="2022-11-27"></a>2022-11-27</h1><p>用了 7 年的 macbook pro A1398 款，最近想换个屏幕以及键帽，F 键帽被磨掉漆了。尝试自己拆了一下键帽，还真是复杂，开机键的键帽支架差点装不回去了。上淘宝搜了一下价格，单 F 键帽和下面的软垫就要 20 块，F 键帽+开机键键帽要 30，胶水要 5 块。但是一个键盘带 C 壳总成才 130，加上我装回 F 键后，发现这个键的手感和其他键居然不一样。仔细试了一下，F 键的手感最软榻，感觉几乎快要坏了。据说要给软垫下面涂胶水固定，不过我也不清楚是不是涂了胶水，手感就好了，或者换了软垫就好了。</p>
<p>还是换键盘吧，最稳妥的决定。</p>
<h1 id="2022-11-26"><a href="#2022-11-26" class="headerlink" title="2022-11-26"></a>2022-11-26</h1><p>最近发现 surface 上推送的 blog，内容居然是空的，经过调查发现，是生成的 index.html 内容为空，再上网查发现了原来是 node 版本太高，hexo 版本太低，不匹配。我选择了升级 hexo 到 4.2.1。</p>
<p><a href="https://alanlee.fun/2021/02/28/hexo-empty-html/" target="_blank" rel="noopener">https://alanlee.fun/2021/02/28/hexo-empty-html/</a></p>
<p>光改 package.json 中的版本还不够，生成的内容样式丢了。所以决定用 hexo 官网推荐的方式来解决：</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">npm install hexo-cli -g</span><br><span class="line">hexo init blog</span><br><span class="line">cd blog</span><br><span class="line">npm install</span><br><span class="line">hexo server</span><br></pre></td></tr></table></figure>
<p>在 hexo init 的时候发现没有权限创建文件夹：</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">$ hexo init</span><br><span class="line">INFO  Cloning hexo-starter https://github.com/hexojs/hexo-starter.git</span><br><span class="line">fatal: unable to access <span class="string">'https://github.com/hexojs/hexo-starter.git/'</span>: Failed to connect to github.com port 443 after 21114 ms: Timed out</span><br><span class="line">WARN  git <span class="built_in">clone</span> failed. Copying data instead</span><br><span class="line">FATAL &#123;</span><br><span class="line">  err: [Error: EPERM: operation not permitted, mkdir <span class="string">'C:\'</span>] &#123;</span><br><span class="line">    errno: -4048,</span><br><span class="line">    code: <span class="string">'EPERM'</span>,</span><br><span class="line">    syscall: <span class="string">'mkdir'</span>,</span><br><span class="line">    path: <span class="string">'C:\\'</span></span><br><span class="line">  &#125;</span><br><span class="line">&#125; Something<span class="string">'s wrong. Maybe you can find the solution here: %s http://hexo.io/docs/troubleshooting.html</span></span><br></pre></td></tr></table></figure>
<p>在网上查了一圈，没找到合适的答案，不过我自己知道问题的原因，就是因为权限不够需要用管理员身份运行 mkdir 而已，我试着以管理员方式启动 vscode，没想到真的成功了，估计权限向下传递给了 vscode 的 bash，然后又传给了 bash 中运行的 hexo，以及由 hexo 启动的 mkdir。</p>
<p>但是在用了 hexo 最新版后各种问题，而且 next 新版主题我也不喜欢，为了避免折腾，还是决定保留 hexo 旧版，把 node 切回低版本：12.22.12。使用 nvm 可以很方便的切换版本，下载 node 等操作。</p>
<h1 id="2022-11-25"><a href="#2022-11-25" class="headerlink" title="2022-11-25"></a>2022-11-25</h1><p>安装 Android 子系统：<a href="https://www.cnblogs.com/frank-link/p/16390714.html" target="_blank" rel="noopener">https://www.cnblogs.com/frank-link/p/16390714.html</a></p>
<p>但我升级到 win11 后，再用这个方法安装的安卓子系统有很大问题，什么应用都打不开，完全不能用。我换了一种安装方式，现在快的飞起了：<a href="https://www.sysceo.com/article-article_info-id-1854.html" target="_blank" rel="noopener">https://www.sysceo.com/article-article_info-id-1854.html</a></p>
<p>用这个 360 的 win11 安卓助手：<a href="https://m.xitongzhijia.net/soft/246638.html" target="_blank" rel="noopener">https://m.xitongzhijia.net/soft/246638.html</a></p>
<p>安装 linux 子系统，遇到内核升级的问题，从 WSL1 升级到 WSL2，需要下载一个升级内核的程序：</p>
<ul>
<li><a href="https://github.com/microsoft/WSL/issues/5393" target="_blank" rel="noopener">https://github.com/microsoft/WSL/issues/5393</a></li>
<li><a href="https://learn.microsoft.com/zh-cn/windows/wsl/install-manual#step-4---download-the-linux-kernel-update-package" target="_blank" rel="noopener">https://learn.microsoft.com/zh-cn/windows/wsl/install-manual#step-4---download-the-linux-kernel-update-package</a></li>
</ul>
<p>下载地址：<a href="https://wslstorestorage.blob.core.windows.net/wslblob/wsl_update_arm64.msi" target="_blank" rel="noopener">https://wslstorestorage.blob.core.windows.net/wslblob/wsl_update_arm64.msi</a></p>
<p>其他相关资料：</p>
<ul>
<li><a href="https://www.cnblogs.com/aedjesse/p/14085217.html" target="_blank" rel="noopener">https://www.cnblogs.com/aedjesse/p/14085217.html</a></li>
<li><a href="https://cloud.tencent.com/developer/article/1632713" target="_blank" rel="noopener">https://cloud.tencent.com/developer/article/1632713</a></li>
<li><a href="https://zhuanlan.zhihu.com/p/258563812" target="_blank" rel="noopener">https://zhuanlan.zhihu.com/p/258563812</a></li>
</ul>
<p>安装的 kali linux 是最小型的，如果想扩充工具库，看这里：</p>
<ul>
<li><a href="https://www.kali.org/docs/troubleshooting/common-minimum-setup/" target="_blank" rel="noopener">https://www.kali.org/docs/troubleshooting/common-minimum-setup/</a></li>
</ul>
<h1 id="2022-11-24"><a href="#2022-11-24" class="headerlink" title="2022-11-24"></a>2022-11-24</h1><h2 id="安装-win11-arm64-位"><a href="#安装-win11-arm64-位" class="headerlink" title="安装 win11 arm64 位"></a>安装 win11 arm64 位</h2><p>我拿到的 surface pro x 默认装的是 win10，但是 arm 版的 win10 不支持 x64 程序，导致很多软件都无法使用，经过一番上网查找发现 win11 是可以支持 x64 程序的模拟的，而且还支持安卓模拟，简直太棒。搞了一晚上终于安装好了 win11，我没有使用 U 盘来安装，而是直接下载 ISO 文件，然后点击 setup.exe 直接安装。安装完后，原先的程序和设置全都在，非常的方便（这样都不用管驱动的问题了，一直听说 surface pro x 的驱动不好找）。</p>
<p>windows11 arm64 版下载地址：<a href="https://next.itellyou.cn/，这么多年一直是在itellyou下载正版软件的，真的非常方便。如果觉得下载慢，可以使用迅雷。" target="_blank" rel="noopener">https://next.itellyou.cn/，这么多年一直是在itellyou下载正版软件的，真的非常方便。如果觉得下载慢，可以使用迅雷。</a></p>
<h2 id="激活-jetbrains-家的软件"><a href="#激活-jetbrains-家的软件" class="headerlink" title="激活 jetbrains 家的软件"></a>激活 jetbrains 家的软件</h2><ul>
<li><a href="https://www.cnblogs.com/nihaorz/p/16517730.html" target="_blank" rel="noopener">https://www.cnblogs.com/nihaorz/p/16517730.html</a></li>
<li><a href="https://www.binfoo.com/2820" target="_blank" rel="noopener">https://www.binfoo.com/2820</a></li>
</ul>
<p>头一次发现激活这么简单，真的强烈推荐。</p>
<p>操作步骤：</p>
<ol>
<li>打开激活破解官方网站：<a href="https://search.censys.io/" target="_blank" rel="noopener">https://search.censys.io/</a></li>
<li>搜索框输入：services.http.response.headers.location: account.jetbrains.com/fls-auth。</li>
<li>点击搜索，在返回的结果随便找一个点进去，查找到 HTTP/302。</li>
<li>复制网址到 Jetbrains，选择许可证服务器/License server，粘贴刚刚复制的网址，激活。</li>
<li>如果发现服务器不可用，可以继续尝试更换一个进行激活。</li>
</ol>
<p>可以愉快的开始编程了</p>
<h1 id="2022-11-23"><a href="#2022-11-23" class="headerlink" title="2022-11-23"></a>2022-11-23</h1><p>新买了个 surface pro x，发现 windows 商店挂代理访问不了，解决办法：</p>
<p><a href="https://zhuanlan.zhihu.com/p/55906778" target="_blank" rel="noopener">https://zhuanlan.zhihu.com/p/55906778</a></p>
<p>不用其他软件，以管理员权限启动 powershell 敲下面命令即可：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">foreach ($n in (get-appxpackage).packagefamilyname) &#123;checknetisolation loopbackexempt -a -n=&quot;$n&quot;&#125;</span><br></pre></td></tr></table></figure>
<p>如果只想对某个特定 UWP 应用设置代理，用 $n=(get-appxpackage <em>应用名的独特部分，比如邮件应用是commu</em>).packagefamilyname | checknetisolation loopbackexempt -a -n=&quot;$n&quot;</p>
<p>npm i 之后遇到 hexo 找不到的问题：<code>bash: hexo: command not found</code></p>
<p>其实就是需要全局安装一下 hexo：<code>npm install -g hexo</code></p>
<p>还可以使用 npx 来执行，这样就不用全局安装了：<code>npx hexo</code>，npx 会自动下载缺失的模块，但是用完就删了，不会留下痕迹，下次再用还是要联网下载该模块。</p>
<h1 id="2022-11-22"><a href="#2022-11-22" class="headerlink" title="2022-11-22"></a>2022-11-22</h1><p>如何通过局域网把电子书传输到 kindle 呢？</p>
<ul>
<li><a href="https://www.bilibili.com/read/cv9457950" target="_blank" rel="noopener">https://www.bilibili.com/read/cv9457950</a></li>
</ul>
<p>答案是使用 calibre，通过这个软件搭建一个局域网服务器，然后用 kindle 的浏览器功能访问服务器网址，就可以下载电子书啦，非常的方便实用。我原先一直是通过发送到邮箱的方式来传输电子书的，这个是要走公网的，但这种方式对文件大小有限制，必须要小于 50M，而且传输速度也大不如局域网。</p>
<h1 id="2022-11-17"><a href="#2022-11-17" class="headerlink" title="2022-11-17"></a>2022-11-17</h1><p>js 中??是什么表达式</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">alert(username ?? <span class="string">"Guest"</span>);</span><br></pre></td></tr></table></figure>
<p>这里的双问号称为<strong>空值合并运算符</strong>，它是 ES2020 的一个新特性，它的作用是当一个表达式是 null 或者 undefined 时为变量设置一个默认值。</p>
<p>比||更精确一点。像<code>&#39;&#39;</code>，<code>0</code>，<code>false</code>这些都是实际值。有的时候是希望使用这些值的。这个语法糖的作用跟自己定义的 isUndef 差不多：</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">alert(isUndef(username) ? <span class="string">"Guest"</span> : username);</span><br></pre></td></tr></table></figure>
<p>终于可以不用自己实现一个函数来做这件事了。</p>
<h1 id="2022-11-16"><a href="#2022-11-16" class="headerlink" title="2022-11-16"></a>2022-11-16</h1><h2 id="trigger-和-Event"><a href="#trigger-和-Event" class="headerlink" title="trigger 和 Event"></a>trigger 和 Event</h2><p>jquery 写法：</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$(<span class="string">"xxx"</span>).trigger(<span class="string">"blur"</span>);</span><br></pre></td></tr></table></figure>
<p>原生 js 写法：</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">dom.dispatchEvent(<span class="keyword">new</span> Event(<span class="string">"blur"</span>));</span><br></pre></td></tr></table></figure>
<h1 id="2022-11-15"><a href="#2022-11-15" class="headerlink" title="2022-11-15"></a>2022-11-15</h1><p>try catch 能捕获异步的错误吗，答案是不能。但如果用 await 就可以。</p>
<p>参考资料：<a href="https://juejin.cn/post/6850418110907088910" target="_blank" rel="noopener">https://juejin.cn/post/6850418110907088910</a></p>
<p>以下代码能捕获到：</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">async</span> <span class="function"><span class="keyword">function</span> <span class="title">f</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="comment">// 异步，微任务</span></span><br><span class="line">  <span class="keyword">try</span> &#123;</span><br><span class="line">    <span class="keyword">await</span> <span class="keyword">new</span> <span class="built_in">Promise</span>(<span class="function"><span class="params">()</span> =&gt;</span> &#123;</span><br><span class="line">      <span class="keyword">throw</span> <span class="keyword">new</span> <span class="built_in">Error</span>(<span class="string">"gadsgsdg"</span>);</span><br><span class="line">    &#125;);</span><br><span class="line">  &#125; <span class="keyword">catch</span> (error) &#123;</span><br><span class="line">    <span class="built_in">console</span>.log(error);</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">f();</span><br></pre></td></tr></table></figure>
<p>以下代码不能捕获到：</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">async</span> <span class="function"><span class="keyword">function</span> <span class="title">f</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="comment">// 异步，微任务</span></span><br><span class="line">  <span class="keyword">try</span> &#123;</span><br><span class="line">    <span class="keyword">new</span> <span class="built_in">Promise</span>(<span class="function"><span class="params">()</span> =&gt;</span> &#123;</span><br><span class="line">      <span class="keyword">throw</span> <span class="keyword">new</span> <span class="built_in">Error</span>(<span class="string">"gadsgsdg"</span>);</span><br><span class="line">    &#125;);</span><br><span class="line">  &#125; <span class="keyword">catch</span> (error) &#123;</span><br><span class="line">    <span class="built_in">console</span>.log(error);</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">f();</span><br></pre></td></tr></table></figure>
<h1 id="2022-11-14"><a href="#2022-11-14" class="headerlink" title="2022-11-14"></a>2022-11-14</h1><p>一直以来都只会 import 和 export 的语法，但是不会 require 的。今天学习了一下：</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// module.js</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">test</span>(<span class="params">str</span>) </span>&#123;</span><br><span class="line">  <span class="built_in">console</span>.log(str);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="built_in">module</span>.exports = &#123;</span><br><span class="line">  a: <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="string">"exports from module"</span>);</span><br><span class="line">  &#125;,</span><br><span class="line">  test,</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// sample.js</span></span><br><span class="line"><span class="keyword">var</span> obj = <span class="built_in">require</span>(<span class="string">"./module.js"</span>);</span><br><span class="line">obj.a(); <span class="comment">// exports from module</span></span><br><span class="line"><span class="keyword">let</span> &#123; test &#125; = <span class="built_in">require</span>(<span class="string">"./module.js"</span>);</span><br><span class="line">test(<span class="string">"this is a test"</span>);</span><br></pre></td></tr></table></figure>
<h1 id="2022-11-07"><a href="#2022-11-07" class="headerlink" title="2022-11-07"></a>2022-11-07</h1><h2 id="clientHeight"><a href="#clientHeight" class="headerlink" title="clientHeight"></a>clientHeight</h2><p>最近 eda 项目在进行两个重构，重构完就是 2.0 版了，一个是原理图的数据驱动重构，一个是 UI 的 react 重构，我打算做个 List 组件，需要上虚拟滚动。</p>
<p>先来了解一下：<a href="https://developer.mozilla.org/zh-CN/docs/Web/API/Element/clientHeight" target="_blank" rel="noopener">clientHeight</a></p>
<p>clientHeight = CSS height + CSS padding - 水平滚动条高度（如果存在）</p>
<h2 id="连续点击鼠标次数"><a href="#连续点击鼠标次数" class="headerlink" title="连续点击鼠标次数"></a>连续点击鼠标次数</h2><p>在写 onClick 事件的时候，学到一个东西：<code>event.detail</code>，这个是个 number 类型，代表连续点击鼠标的次数，学习资料如下：</p>
<ul>
<li><a href="https://bobbyhadz.com/blog/react-double-click-event" target="_blank" rel="noopener">https://bobbyhadz.com/blog/react-double-click-event</a></li>
<li><a href="https://developer.mozilla.org/en-US/docs/Web/API/Element/click_event" target="_blank" rel="noopener">https://developer.mozilla.org/en-US/docs/Web/API/Element/click_event</a></li>
</ul>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> handleClick = <span class="function">(<span class="params">event</span>) =&gt;</span> &#123;</span><br><span class="line">  <span class="built_in">console</span>.log(event.detail);</span><br><span class="line">  <span class="keyword">switch</span> (event.detail) &#123;</span><br><span class="line">    <span class="keyword">case</span> <span class="number">1</span>: &#123;</span><br><span class="line">      <span class="built_in">console</span>.log(<span class="string">"single click"</span>);</span><br><span class="line">      <span class="keyword">break</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">case</span> <span class="number">2</span>: &#123;</span><br><span class="line">      <span class="built_in">console</span>.log(<span class="string">"double click"</span>);</span><br><span class="line">      <span class="keyword">break</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">case</span> <span class="number">3</span>: &#123;</span><br><span class="line">      <span class="built_in">console</span>.log(<span class="string">"triple click"</span>);</span><br><span class="line">      <span class="keyword">break</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">default</span>: &#123;</span><br><span class="line">      <span class="keyword">break</span>;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>
<h2 id="useState-的坑"><a href="#useState-的坑" class="headerlink" title="useState 的坑"></a>useState 的坑</h2><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> React, &#123; useState, useEffect &#125; <span class="keyword">from</span> <span class="string">"https://esm.sh/react@18"</span>;</span><br><span class="line"><span class="keyword">import</span> ReactDOM <span class="keyword">from</span> <span class="string">"https://esm.sh/react-dom@18"</span>;</span><br><span class="line"><span class="keyword">const</span> obj = &#123; <span class="attr">text</span>: <span class="string">"2"</span> &#125;;</span><br><span class="line"><span class="keyword">const</span> Hello = <span class="function">(<span class="params">&#123; props &#125;</span>) =&gt;</span> &#123;</span><br><span class="line">  <span class="built_in">console</span>.log(<span class="string">"render"</span>);</span><br><span class="line">  <span class="keyword">const</span> [bb, setBB] = useState(props);</span><br><span class="line">  useEffect(<span class="function"><span class="params">()</span> =&gt;</span> &#123;</span><br><span class="line">    <span class="comment">// let one = JSON.parse(JSON.stringify(obj))</span></span><br><span class="line">    <span class="comment">// one.text='3'</span></span><br><span class="line">    <span class="comment">// setBB(one);</span></span><br><span class="line">    <span class="comment">// 回调函数会被react调用，react会传入bb给回调函数</span></span><br><span class="line">    setBB(<span class="function">(<span class="params">obj</span>) =&gt;</span> &#123;</span><br><span class="line">      <span class="keyword">if</span> (bb === obj) &#123;</span><br><span class="line">        <span class="built_in">console</span>.log(<span class="literal">true</span>);</span><br><span class="line">      &#125;</span><br><span class="line">      obj.text = <span class="string">"3"</span>;</span><br><span class="line">      <span class="keyword">return</span> obj; <span class="comment">// 不会引起组件渲染</span></span><br><span class="line">      <span class="comment">// return JSON.parse(JSON.stringify(obj));  // 会引起组件渲染</span></span><br><span class="line">    &#125;);</span><br><span class="line">  &#125;, []);</span><br><span class="line">  <span class="keyword">return</span> <span class="xml"><span class="tag">&lt;<span class="name">div</span>&gt;</span>&#123;bb.text&#125;<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span>;</span><br><span class="line">&#125;;</span><br><span class="line"><span class="keyword">const</span> root = ReactDOM.createRoot(<span class="built_in">document</span>.getElementById(<span class="string">"root"</span>));</span><br><span class="line">root.render(<span class="xml"><span class="tag">&lt;<span class="name">Hello</span> <span class="attr">props</span>=<span class="string">&#123;obj&#125;</span>&gt;</span><span class="tag">&lt;/<span class="name">Hello</span>&gt;</span></span>);</span><br></pre></td></tr></table></figure>
<p>运行地址：<a href="https://codepen.io/liuqinh2s/pen/eYKdqeo?editors=0010" target="_blank" rel="noopener">https://codepen.io/liuqinh2s/pen/eYKdqeo?editors=0010</a></p>
<p>如果 useState 传入的对象的引用没有发生变化，它就不会更新。所以修改对象就只能深拷贝了。</p>
<h1 id="2022-11-06"><a href="#2022-11-06" class="headerlink" title="2022-11-06"></a>2022-11-06</h1><p>github 突然抽风，push 的时候报错：</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">➜  blog git:(master) git push</span><br><span class="line">kex_exchange_identification: <span class="built_in">read</span>: Connection reset by peer</span><br><span class="line">fatal: 无法读取远程仓库。</span><br><span class="line"></span><br><span class="line">请确认您有正确的访问权限并且仓库存在。</span><br></pre></td></tr></table></figure>
<p>之前也遇到过一次，主要参考这两篇文章：</p>
<ul>
<li><a href="https://getiot.tech/github/github-errata-port-443-connection-refused.html" target="_blank" rel="noopener">https://getiot.tech/github/github-errata-port-443-connection-refused.html</a></li>
<li><a href="https://www.jianshu.com/p/61b12cc1f818" target="_blank" rel="noopener">https://www.jianshu.com/p/61b12cc1f818</a></li>
</ul>
<p>上次是新建了一个本地配置文件：<code>~/.ssh/config</code>：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">Host github.com</span><br><span class="line">Hostname ssh.github.com</span><br><span class="line">Port 443</span><br></pre></td></tr></table></figure>
<p>当然这次是它自己又好了</p>
<h1 id="2022-11-05"><a href="#2022-11-05" class="headerlink" title="2022-11-05"></a>2022-11-05</h1><p><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/WeakMap" target="_blank" rel="noopener">WeakMap</a>，<a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/WeakSet" target="_blank" rel="noopener">WeakSet</a>是什么？</p>
<ol>
<li>它们的键都只能是对象</li>
<li>键如果没有被引用的话，会被回收（容器本身的引用不算），防止内存泄露</li>
<li>键都不可遍历（因为随时会被回收）</li>
</ol>
<h1 id="2022-11-02"><a href="#2022-11-02" class="headerlink" title="2022-11-02"></a>2022-11-02</h1><p>同事分享了一个案例，返回的是值类型，但依旧可以修改属性：</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> lib = <span class="function">(<span class="params">(</span>) =&gt;</span> &#123;</span><br><span class="line">  <span class="keyword">const</span> profile = &#123;</span><br><span class="line">    version: <span class="string">"1.0.1"</span>,</span><br><span class="line">    name: <span class="string">"clouser"</span>,</span><br><span class="line">  &#125;;</span><br><span class="line">  <span class="keyword">return</span> &#123;</span><br><span class="line">    <span class="keyword">get</span>(key) &#123;</span><br><span class="line">      <span class="keyword">return</span> profile[key];</span><br><span class="line">    &#125;,</span><br><span class="line">  &#125;;</span><br><span class="line">&#125;)();</span><br></pre></td></tr></table></figure>
<p>上例中，如果不动已有的代码，要修改 profile 的 name，怎么修改？</p>
<p>增量代码如下：</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> a = <span class="built_in">Symbol</span>(<span class="number">1</span>);</span><br><span class="line"><span class="built_in">Object</span>.defineProperty(<span class="built_in">Object</span>.prototype, a, &#123;</span><br><span class="line">  <span class="keyword">get</span>() &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="keyword">this</span>;</span><br><span class="line">  &#125;,</span><br><span class="line">&#125;);</span><br><span class="line"><span class="keyword">const</span> profile = lib.get(a);</span><br><span class="line">profile.name = <span class="string">"changed name"</span>;</span><br></pre></td></tr></table></figure>
<p>通过在 profile 的原型链上定义一个属性，然后属性的 get 方法中返回 profile 对象本身。</p>
<p>修复这个漏洞，可以这样：</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> profile = <span class="built_in">Object</span>.create(<span class="literal">null</span>);</span><br></pre></td></tr></table></figure>
<p>这样就让 profile 的原型是 null 了，要让 profile 的原型是 Object.prototype 则这样写：<code>const profile = Object.create(Object.prototype);</code></p>
<h1 id="2022-10-27"><a href="#2022-10-27" class="headerlink" title="2022-10-27"></a>2022-10-27</h1><p>遇到一个比较难的题目，看了答案才解出来。先是看了讨论里面的提示说用前缀和+单调队列，但其实跟单调队列没啥关系，毕竟队列本身存的是下标 <code>i</code>，却要转换成 <code>preSum[i]</code> 再去讨论单调性。而且这题一定要经过精妙的分析才能维护好这个查询队列（用于替代暴力解法中的第二层 for 循环，减少查找范围），最后才勉强发现这个查询队列类似单调队列，如果先直接写好单调队列的数据结构再去解题，怕是根本就想不清题目了。</p>
<p>另外时隔多年后，我又自己手写了<a href="https://gist.github.com/liuqinh2s/2a419b21947b55a1f77f88c8082f9cf6" target="_blank" rel="noopener">双链表</a>，但用在这题上居然反而超时了（用 js 自带的数组不会超时）</p>
<p>发现原来是因为搜索的时候，固定从前往后搜导致的，但像头尾操作的时候，应该直接指定节点根本就不用搜索，解决掉这个问题后，速度非常快了。</p>
<h1 id="2022-10-26"><a href="#2022-10-26" class="headerlink" title="2022-10-26"></a>2022-10-26</h1><p>.then 的优先级比 await 高，所以这样写是有区别的：</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">await</span> func().then(); <span class="comment">// 先执行.then</span></span><br><span class="line">(<span class="keyword">await</span> func()).then(); <span class="comment">// 先执行await</span></span><br></pre></td></tr></table></figure>
<h1 id="2022-10-19"><a href="#2022-10-19" class="headerlink" title="2022-10-19"></a>2022-10-19</h1><p>AI 作画现在很火，我也小玩了一把：<a href="https://6pen.art/" target="_blank" rel="noopener">https://6pen.art/</a></p>
<p>AI 作画网站收集：<a href="https://github.com/hua1995116/awesome-ai-painting" target="_blank" rel="noopener">https://github.com/hua1995116/awesome-ai-painting</a></p>
<h1 id="2022-10-17"><a href="#2022-10-17" class="headerlink" title="2022-10-17"></a>2022-10-17</h1><p>怎么验证，浏览器的 localStorage 是单个字段限制为 5M，还是整个 localStorage 限制为 5M。可以自己写代码验证：</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line">localStorage.setItem(</span><br><span class="line">  <span class="string">"a"</span>,</span><br><span class="line">  <span class="built_in">Array</span>(<span class="number">5</span> * <span class="number">1024</span> * <span class="number">1024</span> - <span class="number">1</span>)</span><br><span class="line">    .fill(<span class="string">"0"</span>)</span><br><span class="line">    .join(<span class="string">""</span>)</span><br><span class="line">); <span class="comment">// 通过</span></span><br><span class="line">localStorage.setItem(</span><br><span class="line">  <span class="string">"a"</span>,</span><br><span class="line">  <span class="built_in">Array</span>(<span class="number">5</span> * <span class="number">1024</span> * <span class="number">1024</span>)</span><br><span class="line">    .fill(<span class="string">"0"</span>)</span><br><span class="line">    .join(<span class="string">""</span>)</span><br><span class="line">); <span class="comment">// 不通过</span></span><br><span class="line">localStorage.setItem(</span><br><span class="line">  <span class="string">"aa"</span>,</span><br><span class="line">  <span class="built_in">Array</span>(<span class="number">5</span> * <span class="number">1024</span> * <span class="number">1024</span> - <span class="number">1</span>)</span><br><span class="line">    .fill(<span class="string">"0"</span>)</span><br><span class="line">    .join(<span class="string">""</span>)</span><br><span class="line">); <span class="comment">// 不通过</span></span><br></pre></td></tr></table></figure>
<p>找到空的 tab 输入上面的代码，再找个有 localStorage 的网站输入上面的代码，得到的验证结果是：</p>
<p>有 localStorage 的网站 tab 三个都通不过，空的 tab 能通过第一个。</p>
<p>由此得到结论，5M 的限制是针对整个 localStorage 而言的（不是单个字段），且是 key+value，而非单纯的 value。</p>
<p>另外我们还顺带验证了 js 的&#39;0&#39;是 1 字节大小。</p>
<h1 id="2022-10-13"><a href="#2022-10-13" class="headerlink" title="2022-10-13"></a>2022-10-13</h1><p>js 中的字符都是两字节的，怎么查看一个字符的编码呢，用<code>str.charCodeAt(0)</code>，从编码变字符用：<code>String.fromCharCode(code)</code></p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> code = <span class="string">"中"</span>.charCodeAt(<span class="number">0</span>);</span><br><span class="line"><span class="built_in">console</span>.log(code, code.toString(<span class="number">16</span>), <span class="built_in">escape</span>(<span class="string">"中"</span>), <span class="built_in">unescape</span>(<span class="string">"\u4E2D"</span>));</span><br><span class="line"><span class="keyword">const</span> str = <span class="built_in">String</span>.fromCharCode(code);</span><br><span class="line"><span class="built_in">console</span>.log(str);</span><br></pre></td></tr></table></figure>
<p>js 字符编码的故事：<a href="https://www.ruanyifeng.com/blog/2014/12/unicode.html" target="_blank" rel="noopener">Unicode 与 JavaScript 详解 - 阮一峰的网络日志</a></p>
<blockquote>
<p>什么情况下 charCodeAt 和 codePointAt 会得到不一样的值<br>在 BMP（基本多文种平面）里面的字符就是一样的结果，不在 BMP 里面就不一样</p>
</blockquote>
<h1 id="2022-10-11"><a href="#2022-10-11" class="headerlink" title="2022-10-11"></a>2022-10-11</h1><p>正则表达式中，圆括号是捕获里面的匹配项的意思，那么怎么不捕获呢？这样写：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">(?:x)</span><br></pre></td></tr></table></figure>
<p>官方文档：<a href="https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Guide/Regular_Expressions" target="_blank" rel="noopener">正则表达式</a></p>
<h1 id="2022-10-10"><a href="#2022-10-10" class="headerlink" title="2022-10-10"></a>2022-10-10</h1><p>昨天做了一道 leetcode，最后需要用 eval 来解析四则运算：<a href="https://leetcode.cn/problems/score-of-parentheses/" target="_blank" rel="noopener">856. 括号的分数</a></p>
<p>那么怎么手写一个四则运算解析器呢？答案是需要用到 AST，在网上看到一篇非常不错的文章：<a href="https://juejin.cn/post/6844903977667002375" target="_blank" rel="noopener">四则运算表达式如何转换成 AST</a>，看完之后感觉我也会了，虽然代码比较多，但非常简单易懂，值得学习其中的编程思维。</p>
<p>解决了一道动态规划题：<a href="https://leetcode.cn/problems/minimum-swaps-to-make-sequences-increasing/" target="_blank" rel="noopener">https://leetcode.cn/problems/minimum-swaps-to-make-sequences-increasing/</a></p>
<p>了解了一下<a href="https://developer.mozilla.org/zh-CN/docs/Web/API/Window/parent" target="_blank" rel="noopener">window.parent</a></p>
<h1 id="2022-09-21"><a href="#2022-09-21" class="headerlink" title="2022-09-21"></a>2022-09-21</h1><p>拉远端分支 git 命令：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">git fetch origin</span><br><span class="line">git checkout -b pro-ui/dev origin/pro-ui/dev</span><br></pre></td></tr></table></figure>
<p>删除本地分支 git 命令：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">git branch -D pro-ui/dev</span><br></pre></td></tr></table></figure>
<h1 id="2022-09-15"><a href="#2022-09-15" class="headerlink" title="2022-09-15"></a>2022-09-15</h1><p>最近感觉自己 git 方面的知识还是比较少，今天看到一个--no-track 参数，不懂什么意思。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">1. 创建新分支 git checkout -b name/newbranch --no-track origin/pro-xxx/dev</span><br><span class="line">2. 在远端创建并跟踪分支 git push --set-upstream origin name/newbranch</span><br></pre></td></tr></table></figure>
<p>一开始猜--no-track 是针对后面那个参数<code>origin/pro-xxx/dev</code>，但总感觉没要必要不跟踪这个分支呀，应该是要跟踪才对。后来才了解到，--no-track 是指不跟踪当前所在分支，而去跟踪<code>origin/pro-xxx/dev</code>，另外这个不是远端的分支，而是远端分支在本地对应的分支，因为经过试验，通过这个创建的分支并不是最新的代码，所以在创建新分支之前，最好先拉一下<code>pro-xxx/dev</code>的代码。</p>
<p>在不切换分支的情况下，拉指定远端分支的代码到本地指定分支：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">git pull origin pro-ui/dev:pro-ui/dev</span><br></pre></td></tr></table></figure>
<h1 id="2022-09-14"><a href="#2022-09-14" class="headerlink" title="2022-09-14"></a>2022-09-14</h1><p>关于 git 工作流，我们团队推了一个工作流方式，采用：</p>
<ol>
<li>新建临时分支</li>
<li>git rebase</li>
<li>merge request<br>的方式进行开发。</li>
</ol>
<p>之前一直都没用过 git rebase（不了解不敢用），今天抽空看了这篇文章：<a href="https://morningspace.github.io/tech/git-merge-stories-6/，对git" target="_blank" rel="noopener">https://morningspace.github.io/tech/git-merge-stories-6/，对git</a> rebase 算是基本理解了。</p>
<h1 id="2022-09-06"><a href="#2022-09-06" class="headerlink" title="2022-09-06"></a>2022-09-06</h1><p>看零度解说的时候，他讲到一个语音转文字的网站，我突然想起来微信好像自带了一个这个功能，于是试了一下，真的很方便，在输入语音的时候说完话往右上滑动就能以文字的形式发送出去了。而且微信好像还有自带的翻译，可以翻译英文，韩文什么的。微信都这么方便了，那就没有必要用其他的网站工具了。</p>
<h2 id="关于-git-工作习惯"><a href="#关于-git-工作习惯" class="headerlink" title="关于 git 工作习惯"></a>关于 git 工作习惯</h2><p>最好的习惯是开自己的分支，合并用 merge request。</p>
<p>如果硬要在 dev 分支开发的话，一定要贯彻远端优先原则，每次准备提交自己的代码了都做如下操作：</p>
<ol>
<li>git stash</li>
<li>git pull</li>
<li>git stash pop</li>
<li>解决可能存在的冲突</li>
<li>git commit</li>
<li>git push</li>
</ol>
<p>顺便说一下 git revert 会产生一条新的提交记录，如果不想产生提交记录就用 git reset。</p>
<p>今天发生了一个合并事故，我先 git commit，然后 pull 发现有冲突，但看起来很奇怪（多了 100 多个文件需要提交），我就想哪里出问题了，就 git revert 了一下，然后再 git pull，git cherry-pick 之前的 commit，然后 git push。最终导致的结果是另一位同事在 merge 时删除了某位同事的代码。总之这套做法很不好，以后还是用回上面提到的流程。</p>
<h1 id="2022-09-01"><a href="#2022-09-01" class="headerlink" title="2022-09-01"></a>2022-09-01</h1><p>当 cherry-pick 产生冲突，怎么退出 cherry-pick？</p>
<p>答案是用：<code>git cherry-pick --abort</code></p>
<p>cherry-pick 的参数挺多的，可以自己在命令行看一下：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line">$ git cherry-pick</span><br><span class="line">usage: git cherry-pick [&lt;options&gt;] &lt;commit-ish&gt;...</span><br><span class="line">   or: git cherry-pick &lt;subcommand&gt;</span><br><span class="line"></span><br><span class="line">    --quit                end revert or cherry-pick sequence</span><br><span class="line">    --continue            resume revert or cherry-pick sequence</span><br><span class="line">    --abort               cancel revert or cherry-pick sequence</span><br><span class="line">    --skip                skip current commit and continue</span><br><span class="line">    --cleanup &lt;mode&gt;      how to strip spaces and #comments from message</span><br><span class="line">    -n, --no-commit       don&apos;t automatically commit</span><br><span class="line">    -e, --edit            edit the commit message</span><br><span class="line">    -s, --signoff         add Signed-off-by:</span><br><span class="line">    -m, --mainline &lt;parent-number&gt;</span><br><span class="line">                          select mainline parent</span><br><span class="line">    --rerere-autoupdate   update the index with reused conflict resolution if possible</span><br><span class="line">    --strategy &lt;strategy&gt;</span><br><span class="line">                          merge strategy</span><br><span class="line">    -X, --strategy-option &lt;option&gt;</span><br><span class="line">                          option for merge strategy</span><br><span class="line">    -S, --gpg-sign[=&lt;key-id&gt;]</span><br><span class="line">                          GPG sign commit</span><br><span class="line">    -x                    append commit name</span><br><span class="line">    --ff                  allow fast-forward</span><br><span class="line">    --allow-empty         preserve initially empty commits</span><br><span class="line">    --allow-empty-message</span><br><span class="line">                          allow commits with empty messages</span><br><span class="line">    --keep-redundant-commits</span><br><span class="line">                          keep redundant, empty commits</span><br></pre></td></tr></table></figure>
<h1 id="2022-08-31"><a href="#2022-08-31" class="headerlink" title="2022-08-31"></a>2022-08-31</h1><p>git 合并的时候，如果本地代码过旧（比如本地代码是两个月前的），可能会发生一些意想不到的问题，合并的时候抛弃了线上分支的许多代码和文件，但 commit 记录里面却没有体现。这个时候想要 revert 发现报错了：</p>
<p><code>git revert is a merge but no -m</code></p>
<blockquote>
<p>因为需要回滚的 commit 是一个 merge 动作，需要显示给出-m（mainline）选择告诉 git 回滚具体哪一个 mainline。</p>
</blockquote>
<p>解决办法有两种，一种是 git reset 到合并前，然后 force push（这种办法的好处是不会产生多余的 commit），但如果开了分支保护，无法强推，就只好换另一种办法，还是 git revert，但要多加一个-m 参数：<a href="https://blog.csdn.net/yanlaifan/article/details/115761272" target="_blank" rel="noopener">https://blog.csdn.net/yanlaifan/article/details/115761272</a></p>
<p>先看看用:<code>git show commitHash</code>查看 merge 了哪两个 mainline，然后指定回滚到哪个 mainline：</p>
<p><code>git revert commitHash -m 2</code>，回滚到第二个 mainline。</p>
<p>这样的话就能成功 revert 了，虽然找回了之前 mainline2 的代码，但这种做法的缺点是 mainline1 和 mainline2 的所有不同的代码行的 commit 信息全部变成 revert 这个 commit 的信息了</p>
<h1 id="2022-08-25"><a href="#2022-08-25" class="headerlink" title="2022-08-25"></a>2022-08-25</h1><blockquote>
<p>原理：const 限定引用不可更改，as const 限定内容不可更改，当内容可以改的时候，显然 typeof 无法准确限定（只能限定到 string,number 这些通用的类型，没办法限定到&#39;a&#39;, 1 这些具体的值），当内容不可改了，自然会帮你缩减到具体值。</p>
</blockquote>
<p>typescript 的一些常见用法：</p>
<h2 id="使用数组中限定的-string"><a href="#使用数组中限定的-string" class="headerlink" title="使用数组中限定的 string"></a>使用数组中限定的 string</h2><figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> a = [<span class="string">"a"</span>, <span class="string">"b"</span>] <span class="keyword">as</span> <span class="keyword">const</span>;</span><br><span class="line"><span class="keyword">let</span> b: (<span class="keyword">typeof</span> a)[<span class="built_in">number</span>] = <span class="string">"c"</span>;</span><br></pre></td></tr></table></figure>
<p>上述代码会报错，因为 <code>typeof a[number]</code> 限定了 b 的类型是<code>&#39;a&#39;|&#39;b&#39;</code>，<code>as const</code>既可以让 a 是 readonly 类型，又可以让 <code>typeof a[number]</code> 从 string 类型缩窄到 <code>&#39;a&#39;|&#39;b&#39;</code></p>
<blockquote>
<p>typeof a 类型是 readonly [&#39;a&#39;, &#39;b&#39;]</p>
</blockquote>
<p>可以将上面的代码改写为：</p>
<figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> a: readonly [<span class="string">"a"</span>, <span class="string">"b"</span>] = [<span class="string">"a"</span>, <span class="string">"b"</span>];</span><br><span class="line"><span class="keyword">let</span> b: (<span class="keyword">typeof</span> a)[<span class="built_in">number</span>] = <span class="string">"c"</span>;</span><br></pre></td></tr></table></figure>
<p>但这个要写两遍数组，看起来不太好看</p>
<h2 id="使用对象中限定的-string"><a href="#使用对象中限定的-string" class="headerlink" title="使用对象中限定的 string"></a>使用对象中限定的 string</h2><figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> obj = &#123;</span><br><span class="line">  a: <span class="string">"a"</span>,</span><br><span class="line">  b: <span class="string">"b"</span>,</span><br><span class="line">&#125; <span class="keyword">as</span> <span class="keyword">const</span>;</span><br><span class="line"><span class="keyword">let</span> b: Item&lt;<span class="keyword">typeof</span> obj&gt; = <span class="string">"c"</span>;</span><br></pre></td></tr></table></figure>
<p>这样可以获取对象的 value，每多一层，就可以多加一个 Item。</p>
<p>那怎么获取对象的 key 呢？代码如下：<code>keyof typeof</code></p>
<figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> obj = &#123;</span><br><span class="line">  <span class="string">'a'</span>: <span class="string">'a'</span>,</span><br><span class="line">  <span class="string">'b'</span>: <span class="string">'b'</span></span><br><span class="line">  <span class="string">'c'</span>: &#123;</span><br><span class="line">    <span class="string">'d'</span>: <span class="string">'d'</span></span><br><span class="line">  &#125;</span><br><span class="line">&#125; <span class="keyword">as</span> <span class="keyword">const</span>;</span><br><span class="line"><span class="keyword">let</span> b: keyof <span class="keyword">typeof</span> obj = <span class="string">'d'</span>;</span><br></pre></td></tr></table></figure>
<p>而且这个是不用 as const 也可以的</p>
<h2 id="限定一个对象的-key-与另一个对象的-key-完全匹配"><a href="#限定一个对象的-key-与另一个对象的-key-完全匹配" class="headerlink" title="限定一个对象的 key 与另一个对象的 key 完全匹配"></a>限定一个对象的 key 与另一个对象的 key 完全匹配</h2><figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> <span class="keyword">enum</span> DOCTYPE &#123;</span><br><span class="line">  DEVICE = <span class="number">1</span>,</span><br><span class="line">  SYMBOL = <span class="number">2</span>,</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">let</span> a: Record&lt;DOCTYPE, <span class="built_in">string</span>&gt; = &#123;</span><br><span class="line">  [DOCTYPE.DEVICE]: <span class="string">"aaaa"</span>,</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>
<p>这样写会报错，应该少了一个 key。这个 Record 的作用就是新建一个对象，对象的 key 完全沿用旧对象的。</p>
<h2 id="如果不想限定完全一致，要怎么写"><a href="#如果不想限定完全一致，要怎么写" class="headerlink" title="如果不想限定完全一致，要怎么写"></a>如果不想限定完全一致，要怎么写</h2><figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> <span class="keyword">enum</span> DOCTYPE &#123;</span><br><span class="line">  DEVICE = <span class="number">1</span>,</span><br><span class="line">  SYMBOL = <span class="number">2</span>,</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">type</span> aa = &#123;</span><br><span class="line">  [key <span class="keyword">in</span> keyof <span class="keyword">typeof</span> DOCTYPE]?: <span class="built_in">string</span>;</span><br><span class="line">&#125;;</span><br><span class="line"><span class="keyword">let</span> a: aa = &#123;</span><br><span class="line">  [DOCTYPE.DEVICE]: <span class="string">"aaaa"</span>,</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>
<p>只需要在 key 后面加个问号，就跟其他的任意 key 一样处理（今天被这么一个简单的问题难住了，说明不会举一反三）</p>
<h2 id="怎么获取-enum-的-key-和-value-类型"><a href="#怎么获取-enum-的-key-和-value-类型" class="headerlink" title="怎么获取 enum 的 key 和 value 类型"></a>怎么获取 enum 的 key 和 value 类型</h2><figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">export</span> <span class="keyword">const</span> <span class="keyword">enum</span> Direction &#123;</span><br><span class="line">  a = <span class="string">"vertical"</span>,</span><br><span class="line">  b = <span class="string">"horizontal"</span>,</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">type</span> k = keyof <span class="keyword">typeof</span> Direction;</span><br><span class="line"><span class="keyword">type</span> v = <span class="string">`<span class="subst">$&#123;Direction&#125;</span>`</span>;</span><br></pre></td></tr></table></figure>
<h1 id="2022-08-23"><a href="#2022-08-23" class="headerlink" title="2022-08-23"></a>2022-08-23</h1><p>没什么用，但用起来很爽的快捷键，Vscode 清除没有用到的 import 语句：</p>
<p>Mac:<br>option+shift+O</p>
<p>windows:<br>Alt+shift+O</p>
<h2 id="高内聚，低耦合"><a href="#高内聚，低耦合" class="headerlink" title="高内聚，低耦合"></a>高内聚，低耦合</h2><ul>
<li>高内聚是减少了代码量，增加复用，避免改了这里还要改那里</li>
<li>低耦合是增加了代码量，减少复用，避免改了这里却动到了那里</li>
</ul>
<p>本质上都是为了少修改代码，减少工作量</p>
<h1 id="2022-08-01"><a href="#2022-08-01" class="headerlink" title="2022-08-01"></a>2022-08-01</h1><p>重新做了一遍这个 CSS 选择器训练：<a href="https://css-speedrun.netlify.app/" target="_blank" rel="noopener">CSS Speedrun | Test your CSS Skills</a></p>
<p>有些我还是用的挺少的，比如<code>:nth-child(2n+3)</code>，<code>img ~ p</code>，<code>a + span</code>，<code>:enable</code>，平常用的最多的应该就是属性选择器了，都还是靠加属性来标记的</p>
<h1 id="2022-07-25"><a href="#2022-07-25" class="headerlink" title="2022-07-25"></a>2022-07-25</h1><p>HTTP3.0 居然都有了，而且居然放弃了 TCP 作为传输层协议：<a href="https://mp.weixin.qq.com/s/LMjVtUshf67i1gbJI2zDSA" target="_blank" rel="noopener">HTTP 3.0 彻底放弃 TCP，TCP 到底做错了什么？</a></p>
<h2 id="npm-的依赖版本问题-，-，-以及不带前缀的区别"><a href="#npm-的依赖版本问题-，-，-以及不带前缀的区别" class="headerlink" title="npm 的依赖版本问题: ^，~，*以及不带前缀的区别"></a>npm 的依赖版本问题: <code>^</code>，<code>~</code>，<code>*</code>以及不带前缀的区别</h2><ul>
<li><code>~</code>会匹配最近的小版本依赖包，比如~1.2.3 会匹配所有 1.2.x 版本，但是不包括 1.3.0</li>
<li><code>^</code>会匹配最新的大版本依赖包，比如^1.2.3 会匹配所有 1.x.x 的包，包括 1.3.0，但是不包括 2.0.0</li>
<li>写<code>*</code>，这意味着安装最新版本的依赖包</li>
<li>版本号不带前缀，则固定安装这个版本</li>
</ul>
<p>最后 package-lock.json 会锁住版本，所以如果想要重新安装，要删掉里面的相关配置</p>
<h1 id="2022-07-22"><a href="#2022-07-22" class="headerlink" title="2022-07-22"></a>2022-07-22</h1><p>翻自己的豆列发现收藏了 15 篇文章，但没啥印象，于是一个一个打开看，其中有一篇是讲消费品味的，一直觉得自己在穿衣打扮方面注意得比较晚，上面推荐的几款东西，看起来还不错，到时候挑一些买。</p>
<p><a href="https://www.douban.com/note/540009246/?_i=8412550refpEge,8470363refpEge" target="_blank" rel="noopener">大学四年必备单品清单——男生篇</a></p>
<p><a href="https://www.chiphell.com/article-25725-1.html" target="_blank" rel="noopener">活动--CHH 第三届桌面 Show 活动</a></p>
<h1 id="2022-07-21"><a href="#2022-07-21" class="headerlink" title="2022-07-21"></a>2022-07-21</h1><p>帮组员解决一个 tinymce.js 在 nextjs 中报错的问题，原因是 tinymc.js 中使用了 navigator，服务端没有这个对象。</p>
<p>nextjs 遇到必须在客户端渲染的内容，要怎么办呢？答案是判断环境：</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">if</span>(<span class="keyword">typeof</span> <span class="built_in">window</span> !== <span class="string">'undefined'</span>)&#123;</span><br><span class="line">  <span class="comment">// 执行必须在客户端执行的代码</span></span><br><span class="line">  <span class="built_in">require</span>(<span class="string">'tinymce'</span>)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h1 id="2022-07-17"><a href="#2022-07-17" class="headerlink" title="2022-07-17"></a>2022-07-17</h1><p>猫砂要怎么选？今天做了一下功课</p>
<p>首先要知道猫砂的四个重要属性：</p>
<ul>
<li>易结块</li>
<li>吸味，除臭</li>
<li>尘少</li>
<li>不粘底，不粘铲</li>
</ul>
<p>然后是猫砂分类，主要分为这四类：</p>
<ul>
<li>膨润土猫砂<ul>
<li>优点：<strong>膨润土猫砂是历史最悠久的猫砂，在结团上面有非常出色的表现</strong>。膨润土猫砂的吸水性是不错的，可以将粪便里的水分和尿液完全吸收，凝结成一个大硬团，清理起来比较方便，而且比较符合猫咪在野外的感觉，<strong>对猫咪的脚感也比较好。且便宜。</strong></li>
<li>缺点：便宜的粉尘特别大，并且<strong>不能冲厕所</strong>。</li>
</ul>
</li>
<li>松木猫砂</li>
<li>水晶猫砂</li>
<li>豆腐猫砂<ul>
<li>优点：可以直接冲厕所</li>
</ul>
</li>
</ul>
<p>如果不考虑直接冲厕所的话，肯定是膨润土和混合猫砂最好。</p>
<h2 id="参考资料"><a href="#参考资料" class="headerlink" title="参考资料"></a>参考资料</h2><ul>
<li><a href="https://zhuanlan.zhihu.com/p/308486564" target="_blank" rel="noopener">新手膨润土猫砂推荐（含详细清单攻略）</a></li>
<li><a href="https://zhuanlan.zhihu.com/p/437674365" target="_blank" rel="noopener">2022 年猫砂选购推荐（膨润土、豆腐砂、混合砂）- 知乎</a></li>
</ul>
<p>第二篇文章的测试手法挺有意思的。</p>
<h1 id="2022-07-06"><a href="#2022-07-06" class="headerlink" title="2022-07-06"></a>2022-07-06</h1><p>目前 lceda 的原理图和面板项目都还是用的 svg 来做画布，但对于 svg 的很多东西其实我并不熟悉，今天看了一篇文章了解了一下 text 和 tspan 的 dx 和 dy 的用法：</p>
<p><a href="https://blog.csdn.net/zz00008888/article/details/121099382" target="_blank" rel="noopener">SVG 文本（一）text、tspan 的基本使用</a></p>
<p>dx 和 dy 可以是一串以空格分界的数字，这样就可以微调每个字符了，每个数字会影响之后的所有字符，而且多个 tspan 的 dx 和 dy 前一个 tspan 会影响后面的。这个设计看起来还不错。</p>
<h1 id="2022-07-05"><a href="#2022-07-05" class="headerlink" title="2022-07-05"></a>2022-07-05</h1><p>crypto.subtle 在不安全的上下文中是 undefined，比如当网站是 http 的时候。</p>
<p><a href="https://stackoverflow.com/questions/46468104/how-to-use-subtlecrypto-in-chrome-window-crypto-subtle-is-undefined" target="_blank" rel="noopener">How to use SubtleCrypto in chrome (window.crypto.subtle is undefined)</a></p>
<h1 id="2022-06-30"><a href="#2022-06-30" class="headerlink" title="2022-06-30"></a>2022-06-30</h1><p>textarea 中按住 ctrl，alt，shift 以及 win 这几个键，再按 enter，有的能换行有的不能：</p>
<p>能换行的：</p>
<ul>
<li>shift</li>
</ul>
<p>不能换行的（什么都不触发）：</p>
<ul>
<li>ctrl</li>
<li>alt</li>
<li>win</li>
</ul>
<blockquote>
<p>怎么控制光标位置：让输入框的 selectionStart 等于 selectionEnd</p>
</blockquote>
<h1 id="2022-06-23"><a href="#2022-06-23" class="headerlink" title="2022-06-23"></a>2022-06-23</h1><h2 id="异或交换"><a href="#异或交换" class="headerlink" title="异或交换"></a>异或交换</h2><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">swapTwoNumber</span>(<span class="params">a, b</span>)</span>&#123;</span><br><span class="line">  a ^= b;</span><br><span class="line">  b ^= a;</span><br><span class="line">  a ^= b;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>异或交换在交换同一个数（内存地址相同，而非仅仅数值相同）的时候，会把这个数变成 0，比如 swap(x,x)，由于执行第一步<code>a ^= b;</code>的时候，已经让 x 变成了 0，所以后面再执行剩下两步的时候也变不回来了。</p>
<h1 id="2022-06-17"><a href="#2022-06-17" class="headerlink" title="2022-06-17"></a>2022-06-17</h1><h2 id="弹框等待用户交互"><a href="#弹框等待用户交互" class="headerlink" title="弹框等待用户交互"></a>弹框等待用户交互</h2><p>如何实现：在一个弹框的回调（用户点击是或者否）之后才执行接下来的逻辑？</p>
<p>答案是：<strong>用 Promise 就可以阻断代码流程</strong>，弹框之后的逻辑必须等待弹框的回调函数中的 resolve 或 reject 被执行，才能接着执行，而回调函数则必须等待用户的点击，这样就实现了一个等待用户交互的逻辑。</p>
<h2 id="TS-表达一个对象类型"><a href="#TS-表达一个对象类型" class="headerlink" title="TS 表达一个对象类型"></a>TS 表达一个对象类型</h2><p>TS 我一直用的比较少，之前还想一个对象 key 和 value 都是 string，用 ts 怎么表示：<code>let v: {[key:string]:string}</code></p>
<h1 id="2022-06-16"><a href="#2022-06-16" class="headerlink" title="2022-06-16"></a>2022-06-16</h1><p>在使用 <a href="https://developer.mozilla.org/zh-CN/docs/Web/API/HTMLInputElement/setSelectionRange" target="_blank" rel="noopener">HTMLInputElement.setSelectionRange()</a>时发现一个问题，超出 input 的宽度的位置无法被定位到，也就是说它不会滚动文本，如果想滚动到指定位置怎么办呢？目前还不知道怎么解决。</p>
<h1 id="2022-06-15"><a href="#2022-06-15" class="headerlink" title="2022-06-15"></a>2022-06-15</h1><p>最近工作很杂乱，事情很多，今天了解了一下斜切是什么，我原先以为是平移+旋转，没想到根本不是，斜切其实是倾斜。最近同事在做斜切椭圆的四点控制，这是他写的关于图形变换的基础的博客：<a href="https://zengxiaoluan.com/matrix-image" target="_blank" rel="noopener">https://zengxiaoluan.com/matrix-image</a> 。从今天开始打算把之前 wordpress 被黑丢失的博客补一补了，主要是一些前端的面试考察点以及工作中遇到的问题和解决方案，大部分可能都想不起来了，能补多少是多少吧。浏览器书签和我来笔记都有点乱，有空也要整理一下。</p>
<h1 id="2022-06-12"><a href="#2022-06-12" class="headerlink" title="2022-06-12"></a>2022-06-12</h1><p>今早上一起来发现服务器居然连不上了，试了一下居然 ping 不通了，估计是这个 ip 又被墙了。为了尽快弄好翻墙的，我试了朋友发给我的 clashX 以及翻墙配置，真的不错，速度非常快。</p>
<p>主要参考了这篇文章：<a href="https://github.com/Hackl0us/SS-Rule-Snippet" target="_blank" rel="noopener">https://github.com/Hackl0us/SS-Rule-Snippet</a></p>
<p>Clash 项目地址：<a href="https://github.com/Dreamacro/clash" target="_blank" rel="noopener">https://github.com/Dreamacro/clash</a></p>
<p>ClashX 项目地址：<a href="https://github.com/yichengchen/clashX/" target="_blank" rel="noopener">https://github.com/yichengchen/clashX/</a></p>
<p>ClashX windows 下载地址：<a href="https://github.com/Fndroid/clash_for_windows_pkg/releases/tag/0.19.25" target="_blank" rel="noopener">https://github.com/Fndroid/clash_for_windows_pkg/releases/tag/0.19.25</a></p>
<p>ClashX Pro macOS 下载地址：<a href="https://install.appcenter.ms/users/clashx/apps/clashx-pro/distribution_groups/public" target="_blank" rel="noopener">https://install.appcenter.ms/users/clashx/apps/clashx-pro/distribution_groups/public</a></p>
<p>ClashX Android 下载地址：<a href="https://github.com/Kr328/ClashForAndroid/releases/tag/v2.5.9" target="_blank" rel="noopener">https://github.com/Kr328/ClashForAndroid/releases/tag/v2.5.9</a></p>
<p>购买链接：<a href="https://portal.shadowsocks.nz/login" target="_blank" rel="noopener">https://portal.shadowsocks.nz/login</a></p>
<p>Clash 文档：<a href="https://lancellc.gitbook.io/clash/" target="_blank" rel="noopener">https://lancellc.gitbook.io/clash/</a></p>
<p>发现修改 ClashX 的端口不生效，后来找到了原因，原来必须要修改 config.yaml 文件才行：<a href="https://github.com/yichengchen/clashX/#Advance" target="_blank" rel="noopener">https://github.com/yichengchen/clashX/#Advance</a> Config，其实默认配置里的注释也写了这个坑，但是我瞎了没看到：</p>
<p><img src="../images/2022/ClashX默认配置.jpg" alt="ClashX默认配置"></p>
<p>我是在 github 的 issue 里面搜到的，反正万事解决不了提 issue。</p>
<h1 id="2022-06-11"><a href="#2022-06-11" class="headerlink" title="2022-06-11"></a>2022-06-11</h1><h2 id="wordpress-博客被黑"><a href="#wordpress-博客被黑" class="headerlink" title="wordpress 博客被黑"></a>wordpress 博客被黑</h2><p>最近想把 wordpress 上的文章迁移到 github.io。今天一打开我的 wordpress 博客，突然直接跳到 wordpress 的安装界面，我感觉挺奇怪的，有种不好的预感。打开数据库一看果然又被黑了，除了 wordpress 数据库，顺带其他几个 mysql 的数据库也被黑了。因为我还在我服务器上跑着我自己写的量化交易的脚本，mysql 的某个数据库里面有币安的 api key，吓得我立马去币安删 api。我担心可能 linux 服务器的账号密码都被黑了，而且也有可能在我服务器放了什么其他可怕的病毒，干脆还是重置一下服务器，以及相关的所有账号密码。</p>
<p>上次我的 wordpress 被攻击还是 2016 年的事了，当时我才没用几个月，写了大概三篇文章，就被黑了，当时黑客留下来的是个 QQ，这次是个比特币地址：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">readme:</span><br><span class="line">To recover your lost Database send 0.0115 Bitcoin (BTC) to our Bitcoin address: bc1qtr4px3ngv80tz2j9e49jxcmtqthfnw8xhux4as  After this, contact us by email with your Server IP or Domain Name and a Proof of Payment (Payment ID). Your Database is downloaded and backed up on our servers. Backups that we have right now: chaobi, e_business, stock, wordpress. Any email without your server IP Address or Domain Name and a Proof of Payment together will be ignored. If we dont receive your payment in the next 10 Days, we will delete or leak your sensitive information.</span><br><span class="line"></span><br><span class="line">BTC_address:</span><br><span class="line">bc1qtr4px3ngv80tz2j9e49jxcmtqthfnw8xhux4as</span><br><span class="line"></span><br><span class="line">email:</span><br><span class="line">support@dbrestore2022.to</span><br></pre></td></tr></table></figure>
<p><img src="https://s2.loli.net/2022/06/11/rbelB5sHhZQLofY.png" alt="image.png"></p>
<p>可惜我写了这么多文章都还没有备份</p>
<h2 id="办理身份证"><a href="#办理身份证" class="headerlink" title="办理身份证"></a>办理身份证</h2><p>今天顺带把身份证重新办了一下，办理身份证前首先需要去照相馆照一张身份证证件照，然后再去派出所户政室办理。证件照需要上传到一个照片质量检测网站上进行核对，并产生一个编号。去户政室的时候提供这个编号他们就可以找到这个照片了。</p>
<p>我是在深圳本地宝上面查到当地派出所户政室的地址的：</p>
<p><a href="http://m.bendibao.com/bsy616684.html" target="_blank" rel="noopener">http://m.bendibao.com/bsy616684.html</a></p>
<p>景田的户政室已经从原来的地方搬到香蜜湖了，在高德地图上可以搜得到香蜜湖的户政室地址：<code>福田公安分局香蜜湖户政服务中心</code>，另外他们的办公时间也改了，下午 4 点就收摊了。</p>
<h1 id="2022-06-10"><a href="#2022-06-10" class="headerlink" title="2022-06-10"></a>2022-06-10</h1><p>今天发现一个 bug 跟 tagName 有关，原因是 document 没有 tagName，<strong>document.tagName 是 undefined</strong>，导致代码报错。</p>
<h2 id="toJSON-方法"><a href="#toJSON-方法" class="headerlink" title="toJSON()方法"></a>toJSON()方法</h2><p>一个对象定义了 toJSON 方法的话，JSON.stringify 就会去调用这个方法，返回定制化的字符串。</p>
<p>官方文档：<a href="https://developer.mozilla.org/zh-TW/docs/Web/JavaScript/Reference/Global_Objects/JSON/stringify" target="_blank" rel="noopener">https://developer.mozilla.org/zh-TW/docs/Web/JavaScript/Reference/Global_Objects/JSON/stringify</a></p>
<p>If an object being stringified has a property named toJSON whose value is a function, then the toJSON() method customizes JSON stringification behavior: instead of the object being serialized, the value returned by the toJSON() method when called will be serialized. JSON.stringify() calls toJSON with one parameter:</p>
<ul>
<li>if this object is a property value, the property name</li>
<li>if it is in an array, the index in the array, as a string</li>
<li>an empty string if JSON.stringify() was directly called on this object</li>
</ul>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> bonnie = &#123;</span><br><span class="line">  name: <span class="string">'Bonnie Washington'</span>,</span><br><span class="line">  age: <span class="number">17</span>,</span><br><span class="line">  class: 'Year 5 Wisdom',</span><br><span class="line">  isMonitor: <span class="literal">false</span>,</span><br><span class="line">  toJSON: <span class="function"><span class="keyword">function</span>(<span class="params">key</span>) </span>&#123;</span><br><span class="line">    <span class="comment">// Clone object to prevent accidentally performing modification on the original object</span></span><br><span class="line">    <span class="keyword">const</span> cloneObj = &#123; ...this &#125;;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">delete</span> cloneObj.age;</span><br><span class="line">    <span class="keyword">delete</span> cloneObj.isMonitor;</span><br><span class="line">    cloneObj.year = <span class="number">5</span>;</span><br><span class="line">    cloneObj.class = <span class="string">'Wisdom'</span>;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">if</span> (key) &#123;</span><br><span class="line">      cloneObj.code = key;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> cloneObj;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="built_in">JSON</span>.stringify(bonnie);</span><br><span class="line"><span class="comment">// Returns '&#123;"name":"Bonnie Washington","class":"Wisdom","year":5&#125;'</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> students = &#123;bonnie&#125;;</span><br><span class="line"><span class="built_in">JSON</span>.stringify(students);</span><br><span class="line"><span class="comment">// Returns '&#123;"bonnie":&#123;"name":"Bonnie Washington","class":"Wisdom","year":5,"code":"bonnie"&#125;&#125;'</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> monitorCandidate = [bonnie];</span><br><span class="line"><span class="built_in">JSON</span>.stringify(monitorCandidate)</span><br><span class="line"><span class="comment">// Returns '[&#123;"name":"Bonnie Washington","class":"Wisdom","year":5,"code":"0"&#125;]'</span></span><br></pre></td></tr></table></figure>
<h2 id="大型软件的设计很重要"><a href="#大型软件的设计很重要" class="headerlink" title="大型软件的设计很重要"></a>大型软件的设计很重要</h2><p>为 EDA 写了快三年代码了，我的感觉就是对于稍微复杂一点的软件，设计真的很重要。在新加某个需求后，可能因为不好的设计产生很多 bug，也有可能因为原先存在的代码设计不合理，导致新需求很难写，到处都要埋点。</p>
<p>我的 leader 写了这段话，我觉得很对：</p>
<blockquote>
<p>很多糟糕的设计隶属于某个更大的糟糕设计，而这个更大的糟糕设计可以被一两行精妙的代码整个代替掉，你在局部优化半天毫无意义。</p>
</blockquote>
<h1 id="2019-02-27"><a href="#2019-02-27" class="headerlink" title="2019-02-27"></a>2019-02-27</h1><p>Java 反射，反射的作用包括，在运行时判断一个对象所属的类，给某个未知的类新建一个对象，获取任意一个类的成员变量和方法，并调用。如果你是初学反射，这么说你一定不知道我在说什么。但举个例子就比较容易理解了。那就是用配置文件动态控制程序要加载的类：</p>
<p>举个例子我们的项目底层有时是用 mysql，有时用 oracle，需要动态地根据实际情况加载驱动类，这个时候反射就有用了，假设 com.java.dbtest.myqlConnection，com.java.dbtest.oracleConnection 这两个类我们要用，这时候我们的程序就写得比较动态化，通过 Class tc = Class.forName(&quot;com.java.dbtest.TestConnection&quot;);通过类的全类名让 jvm 在服务器中找到并加载这个类，而如果是 oracle 则传入的参数就变成另一个了。这时候就可以看到反射的好处了，这个动态性就体现出 java 的特性了！举多个例子，大家如果接触过 spring，会发现当你配置各种各样的 bean 时，是以配置文件的形式配置的，你需要用到哪些 bean 就配哪些，spring 容器就会根据你的需求去动态加载，你的程序就能健壮地运行。</p>
<p>在使用 Python 的时候我就通过用配置来控制代码。体验非常棒。其实反射的作用就是通过配置控制代码。</p>
<h2 id="是否要传数组长度的问题"><a href="#是否要传数组长度的问题" class="headerlink" title="是否要传数组长度的问题"></a>是否要传数组长度的问题</h2><p>Java 中数组是一个对象而非像 C++一样的原始类型，所以可以对数组求长度的时候是这么写：<code>arr.length()</code>，而 C++则没有这么方便的东西，所以传参的时候，Java 可以不传数组长度，C++必须要传：</p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">func(arr, lengthOfArr);</span><br></pre></td></tr></table></figure>
<h2 id="spring-boot"><a href="#spring-boot" class="headerlink" title="spring boot"></a>spring boot</h2><p>随着计算机的发展，在应用程序开发中，很多东西都慢慢工具化了，大量简单重复的工作直接交给计算机就好了，留给人们的只是业务逻辑跟架构调优。spring boot 2 就是一个非常好用的 Java web 集成框架。学习最好的方法就是通过 <strong>例子</strong> 来领悟和体会到其中抽象的知识（共性）。对于工具的使用则更加强调动手实践。</p>
<p>先参考一下网上的资料：</p>
<ul>
<li><a href="https://www.zhihu.com/question/53729800" target="_blank" rel="noopener">知乎：Spring Boot 要如何学习？</a></li>
<li><a href="https://www.bilibili.com/video/av44560321?from=search&amp;seid=7097190869964471137" target="_blank" rel="noopener">bilibili：【自用】尚硅谷 spring boot 全套视频教程</a></li>
</ul>
<a id="more"></a>
<h3 id="第一步快速入门"><a href="#第一步快速入门" class="headerlink" title="第一步快速入门"></a>第一步快速入门</h3><p>如果对 spring boot 一点都不了解的话，要先了解一下 spring boot 是什么，它的发展历程，从而建立起一个简单的印象。可以先看 B 站的教学视频的前几个概要介绍的视频。然后大致浏览一下需要学习的内容，你会发现都是按模块划分的，比如：工程配置、日志管理、数据库、缓存等等。</p>
<p>有了大概的了解，就可以动手写一个<code>hello world</code>了。</p>
<ul>
<li><a href="http://blog.didispace.com/spring-boot-learning-1/" target="_blank" rel="noopener">Spring Boot 快速入门</a></li>
<li><a href="http://blog.didispace.com/spring-initializr-in-intellij/" target="_blank" rel="noopener">使用 Intellij 中的 Spring Initializr 来快速构建 Spring Boot/Cloud 工程</a></li>
</ul>
<p>由于我以前做过<code>spring+springMVC+mybatis</code>的项目，所以学习 springboot2 对我来说是比较轻松的。</p>
<p>一般来说后端都会用到数据库，所以一个完整的 Hello World 程序怎么可以不接通数据库呢？</p>
<p><a href="https://www.bysocket.com/?p=1610" target="_blank" rel="noopener">Springboot 整合 Mybatis 的完整 Web 案例</a></p>
<blockquote>
<p>编程思想中有一条很重要的原则就是：<strong>尽量少的改动已有的代码</strong>，原因有很多，比如改动一个被多处使用的函数有可能会对很多地方造成影响。所以我们就要 <strong>尽量让我们的代码灵活起来，可重复用起来</strong>，Java 的反射就起到了这个作用，Spring 框架最重要的作用就是让灵活的部分变成配置，程序动态加载配置就能改变代码的行为。回调也同样是在贯彻这一思想。<strong>可重用</strong> 是编程思想的精髓之一，甚至所有的抽象就都是为了这一目的，无论是<code>变量</code>、<code>函数</code>、<code>对象</code>、<code>数据结构</code>、<code>库</code>、<code>API</code>都是把死的代码变成活的，把不能重复使用的代码变成可以重复使用的代码。<a href="#阿里和蚂蚁八荣八耻">阿里和蚂蚁八荣八耻</a></p>
</blockquote>
<h2 id="阿里和蚂蚁八荣八耻"><a href="#阿里和蚂蚁八荣八耻" class="headerlink" title="阿里和蚂蚁八荣八耻"></a>阿里和蚂蚁八荣八耻</h2><p>以动手实践为荣，以只看不练为耻。</p>
<p>以打印日志为荣，以出错不报为耻。</p>
<p>以局部变量为荣，以全局变量为耻。</p>
<p>以单元测试为荣，以手工测试为耻。</p>
<p>以代码重用为荣，以复制粘贴为耻。</p>
<p>以多态应用为荣，以分支判断为耻。</p>
<p>以定义常量为荣，以魔法数字为耻。</p>
<p>以总结思考为荣，以不求甚解为耻。</p>
<p>以可配置为荣 ，以硬编码为耻</p>
<p>以可互备为荣 ，以单点为耻</p>
<p>以可无状态为荣 ，以有状态为耻</p>
<p>以可随便重启为荣 ，以不能迁移为耻</p>
<p>以整体交付为荣，以部分交付为耻</p>
<p>以标准化为荣，以特殊化为耻</p>
<p>以自动化运维为荣，以人肉化运维为耻</p>
<p>以无人值守为荣，以人工值班为耻</p>
<h1 id="2019-02-20"><a href="#2019-02-20" class="headerlink" title="2019-02-20"></a>2019-02-20</h1><p>今天联合查询一个 40 万和 1 万的表，发现弄了索引都没啥效果，最后发现是字符集不同导致的。把两个索引的字符集弄成一样的就行了。还有一个问题，mysql8 没有缓存导致查询很慢，mysql5.7 有缓存第二次查询快的飞起。还有同一个语句 mysql8 花了 100 秒，mysql5.7 只花了 10 秒，原因可能是对语句的解释不一样。在将数据库导入到 mysql5.7 的时候遇到一个错误：<code>2006: mysql server has gone away</code>。使用：<code>set global max_allowed_packet=268435456;</code>解决了。应该是单笔 insert 太大导致的，把配置设高一点就 OK 了。</p>
<h1 id="2019-02-19"><a href="#2019-02-19" class="headerlink" title="2019-02-19"></a>2019-02-19</h1><p>今天终于解决了一个困扰我一年之久的问题，网易云音乐和知乎账号的登陆异常。我对比了不同的网络环境（IP），不同的账号（别人的知乎账号），不同的浏览器。组合测试最后发现既不是 IP 的单方面的问题，也不是账号的单方面问题，也不是浏览器的单方面的问题。而当我使用无痕浏览的时候并没有任何问题，所以应该是 chrome 浏览器记住了某些东西。最后发现问题出在 chrome 浏览器的账号同步上，可能是因为我的谷歌账号在历史上曾记录了一次知乎异常登陆的 cookie，所以之后的每一次登陆都使用这个 cookie，而且清空都是无效的，在你登陆的时候又会给你自动添加。之后我先登出 chrome 账号，并同时清空所有数据，然后再登陆知乎账号，然后再登陆 chrome 账号同步一次正确的知乎登陆。问题就得到了解决。</p>
<p>知乎问题的根源：</p>
<ul>
<li><a href="https://jiasule.v2ex.com/t/533482" target="_blank" rel="noopener">https://jiasule.v2ex.com/t/533482</a></li>
<li><a href="https://www.v2ex.com/t/521180" target="_blank" rel="noopener">https://www.v2ex.com/t/521180</a></li>
</ul>
<p>答案就是：发现一个在开启 IPFS 伴侣时，知乎的大部分接口都会报请求参数异常的 BUG。。</p>
<h1 id="2019-01-17"><a href="#2019-01-17" class="headerlink" title="2019-01-17"></a>2019-01-17</h1><p>一个奇怪的问题，我配置好了 github 的 ssh key，但每次 push 都跟我索要账号密码。原因是我 clone 的时候用的 http 模式，在项目的.git/config 里面可以修改，改为 ssh 模式即可。感谢 stackoverflow 的小哥：<a href="https://stackoverflow.com/questions/10909221/why-is-github-asking-for-username-password-when-following-the-instructions-on-sc" target="_blank" rel="noopener">Why is Github asking for username/password when following the instructions on screen and pushing a new repo?</a></p>
<h1 id="2018-11-28"><a href="#2018-11-28" class="headerlink" title="2018-11-28"></a>2018-11-28</h1><p>一切为了可重用。</p>
<p>代码写得能看懂便于维护，这样代码就能更长久的可重用。</p>
<p>代码模块化，是为了降低耦合，减少依赖，模块内部高内聚，模块之间低耦合，模块可重用。</p>
<p>模块的粒度应该以重用的灵活性为指导原则，不能一味追求小，但基本的客观规律是：比较小的模块更灵活，更容易重用。</p>
<p>一个设计良好的模块的客观标准是：可以随意组合，即插即用。</p>
<p>封装是为了更好的把代码的改动控制在模块内部，从而减少外部的改动需求。API 尽量不变，对外的接口尽量不变。<a href="http://wiki.jikexueyuan.com/project/java-enhancement/java-one.html" target="_blank" rel="noopener">理解 Java 的三大特性之封装</a></p>
<p>继承则是赤裸裸的在重用代码。</p>
<h1 id="2018-11-19"><a href="#2018-11-19" class="headerlink" title="2018-11-19"></a>2018-11-19</h1><p>看了某人的 spring boot 代码，发现后台的错误码和错误信息管理的一个优雅的做法：使用一个枚举类封装这两个属性，并使构造函数私有化。代码如下：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">enum</span> ExceptionMsg &#123;</span><br><span class="line">    SUCCESS(<span class="string">"000000"</span>, <span class="string">"操作成功"</span>),</span><br><span class="line">    FAILED(<span class="string">"999999"</span>, <span class="string">"操作失败"</span>),</span><br><span class="line">    ParamError(<span class="string">"000001"</span>, <span class="string">"参数错误！"</span>),</span><br><span class="line"></span><br><span class="line">    LoginNameOrPassWordError(<span class="string">"000100"</span>, <span class="string">"用户名或者密码错误！"</span>),</span><br><span class="line">    EmailUsed(<span class="string">"000101"</span>, <span class="string">"该邮箱已被注册"</span>),</span><br><span class="line">    UserNameUsed(<span class="string">"000102"</span>, <span class="string">"该登录名称已存在"</span>),</span><br><span class="line">    EmailNotRegister(<span class="string">"000103"</span>, <span class="string">"该邮箱地址未注册"</span>),</span><br><span class="line">    LinkOutdated(<span class="string">"000104"</span>, <span class="string">"该链接已过期，请重新请求"</span>),</span><br><span class="line">    PassWordError(<span class="string">"000105"</span>, <span class="string">"密码输入错误"</span>),</span><br><span class="line">    UserNameLengthLimit(<span class="string">"000106"</span>, <span class="string">"用户名长度超限"</span>),</span><br><span class="line">    LoginNameNotExists(<span class="string">"000107"</span>, <span class="string">"该用户未注册"</span>),</span><br><span class="line">    UserNameSame(<span class="string">"000108"</span>, <span class="string">"新用户名与原用户名一致"</span>),</span><br><span class="line"></span><br><span class="line">    FavoritesNameIsNull(<span class="string">"000200"</span>, <span class="string">"收藏夹名称不能为空"</span>),</span><br><span class="line">    FavoritesNameUsed(<span class="string">"000201"</span>, <span class="string">"收藏夹名称已被创建"</span>),</span><br><span class="line"></span><br><span class="line">    CollectExist(<span class="string">"000300"</span>, <span class="string">"该文章已被收藏"</span>),</span><br><span class="line"></span><br><span class="line">    FileEmpty(<span class="string">"000400"</span>, <span class="string">"上传文件为空"</span>),</span><br><span class="line">    LimitPictureSize(<span class="string">"000401"</span>, <span class="string">"图片大小必须小于2M"</span>),</span><br><span class="line">    LimitPictureType(<span class="string">"000402"</span>, <span class="string">"图片格式必须为'jpg'、'png'、'jpge'、'gif'、'bmp'"</span>);</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">private</span> <span class="title">ExceptionMsg</span><span class="params">(String code, String msg)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">this</span>.code = code;</span><br><span class="line">        <span class="keyword">this</span>.msg = msg;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> String code;</span><br><span class="line">    <span class="keyword">private</span> String msg;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> String <span class="title">getCode</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> code;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> String <span class="title">getMsg</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> msg;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h1 id="2018-11-03"><a href="#2018-11-03" class="headerlink" title="2018-11-03"></a>2018-11-03</h1><p>No programming language is perfect. There is not even a single best language; there are only languages well suited or perhaps poorly suited for particular purposes.</p>
<p>Shell scripting hearkens back to the classic UNIX philosophy of breaking complex projects into simpler subtasks, of chaining together components and utilities.</p>
<blockquote>
<p>Unix 的哲学就是将复杂的任务打破成多个简单的小任务，然后把工作流拼接起来。甚至在设计软件和工具型的程序时也是遵循这种思想，这种做法对程序员来说是一种直觉，这种思想就蕴含在编程中，但普通用户只喜欢傻瓜式操作。而 Windows 则倾向于迎合普通用户，打造集成环境，尽管许多集成环境都由不少重复的小轮子组成，但我们不缺硬盘空间和内存空间。</p>
</blockquote>
<p>运用抽象是走向代码优化的第一步。面向接口编程。面向抽象编程。</p>
<p>消除重复部分。 优秀设计的根本是：消除重复部分！（DRY = Don’t repeat yourself）</p>
<p>回调和多态都是为了解耦，实现更好的模块化，升级代码时候改动更少的代码</p>
<p>我发现我取消 Home、catagories、about、tags 等原生目录之后，打开博客网站的首页，有个点会停留在第一个目录上，也就是目前的“信息科学”这个目录上。所以我想恢复首页这个目录（之前取消这个目录是因为点击我的博客名，也就是我的网名：liuqinh2s 的时候，会跳转到首页，也就是网站根目录，我不想搞两个有相同作用的按钮，但其实我错了，用户并不知道那个可以点击，就像安卓的侧滑出菜单一样，用户并不知道侧滑可以出菜单，所以才需要一个菜单按钮），恢复这个首页目录是设计上的必要。</p>
<blockquote>
<p>设计思维就是要面向用户，不要以为用户知道那些隐含的功能点。</p>
</blockquote>
<ol>
<li>色彩的概念：色彩是物体发出或反射的光在视觉系统中的形成的反应，这种反应使人们得以从视觉上区分物体的大小、形状、结构和属性等外部特征。</li>
<li>色彩的三特性：亮度 Luminance，色调 Hue，饱和度 Saturation（色调的深浅程度）各种单色光饱和度最高，单色光中掺入白光越多，饱和度越低，白光占绝大部分时，饱和度接近于零，白光的饱和度等于零。注意区分亮度和饱和度。</li>
<li>色彩模型：RGB，CMYK（颜料的三原色：C 青，M 品，Y 黄，+K 黑，应用于印刷工业）。RGB 是加色模型，CMYK 是减色模型。HSV（H 是色相即色调，S 是饱和度（取值 0~100%），V 是亮度值 Value（取值 0~100%））。YUV。</li>
</ol>
<p>和分治算法比较类似，但不同的是分治算法把原问题划归为几个相互独立的子问题，从而一一解决，而动态规划则是针对子问题有重叠的情况的一种解决方案。</p>

        
      </div>
      
      
      
    </div>
    
    
    
  </div>


          </div>
          


          

  
    <div class="comments" id="comments">
      <div id="utterance-container"></div>
    </div>
  
  



        </div>
        
          
  
  <div class="sidebar-toggle">
    <div class="sidebar-toggle-line-wrap">
      <span class="sidebar-toggle-line sidebar-toggle-line-first"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-middle"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-last"></span>
    </div>
  </div>

  <aside id="sidebar" class="sidebar">
    
    <div class="sidebar-inner">

      

      
        <ul class="sidebar-nav motion-element">
          <li class="sidebar-nav-toc sidebar-nav-active" data-target="post-toc-wrap">
            Table of Contents
          </li>
          <li class="sidebar-nav-overview" data-target="site-overview-wrap">
            Overview
          </li>
        </ul>
      

      <section class="site-overview-wrap sidebar-panel">
        <div class="site-overview">
          <div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person">
            
              <img class="site-author-image" itemprop="image" src="https://i.loli.net/2019/05/20/5ce257002370387784.jpg" alt="liuqinh2s">
            
              <p class="site-author-name" itemprop="name">liuqinh2s</p>
              <p class="site-description motion-element" itemprop="description"></p>
          </div>

          <nav class="site-state motion-element">

            
              <div class="site-state-item site-state-posts">
              
                <a href="/archives/">
              
                  <span class="site-state-item-count">79</span>
                  <span class="site-state-item-name">posts</span>
                </a>
              </div>
            

            
              
              
              <div class="site-state-item site-state-categories">
                <a href="/categories/index.html">
                  <span class="site-state-item-count">24</span>
                  <span class="site-state-item-name">categories</span>
                </a>
              </div>
            

            
              
              
              <div class="site-state-item site-state-tags">
                <a href="/tags/index.html">
                  <span class="site-state-item-count">16</span>
                  <span class="site-state-item-name">tags</span>
                </a>
              </div>
            

          </nav>

          
            <div class="feed-link motion-element">
              <a href="/atom.xml" rel="alternate">
                <i class="fa fa-rss"></i>
                RSS
              </a>
            </div>
          

          
            <div class="links-of-author motion-element">
                
                  <span class="links-of-author-item">
                    <a href="https://github.com/liuqinh2s" target="_blank" title="GitHub">
                      
                        <i class="fa fa-fw fa-github"></i>GitHub</a>
                  </span>
                
                  <span class="links-of-author-item">
                    <a href="https://twitter.com/liuqinh2s" target="_blank" title="Twitter">
                      
                        <i class="fa fa-fw fa-twitter"></i>Twitter</a>
                  </span>
                
            </div>
          

          
          

          
          
            <div class="links-of-blogroll motion-element links-of-blogroll-block">
              <div class="links-of-blogroll-title">
                <i class="fa  fa-fw fa-link"></i>
                Links
              </div>
              <ul class="links-of-blogroll-list">
                
                  <li class="links-of-blogroll-item">
                    <a href="https://lianera.github.io" title="liam" target="_blank">liam</a>
                  </li>
                
                  <li class="links-of-blogroll-item">
                    <a href="https://jiyanggg.github.io/" title="jiyanggg" target="_blank">jiyanggg</a>
                  </li>
                
                  <li class="links-of-blogroll-item">
                    <a href="http://118.190.10.34/" title="曾小乱 – 在描绘他的生活倒影" target="_blank">曾小乱 – 在描绘他的生活倒影</a>
                  </li>
                
              </ul>
            </div>
          

          

        </div>
      </section>

      
      <!--noindex-->
        <section class="post-toc-wrap motion-element sidebar-panel sidebar-panel-active">
          <div class="post-toc">

            
              
            

            
              <div class="post-toc-content"><ol class="nav"><li class="nav-item nav-level-1"><a class="nav-link" href="#2023-11-14"><span class="nav-number">1.</span> <span class="nav-text">2023-11-14</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#2023-11-13"><span class="nav-number">2.</span> <span class="nav-text">2023-11-13</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#window-location-href-和-hash（-）"><span class="nav-number">2.1.</span> <span class="nav-text">window location href 和 hash（#）</span></a></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#2023-10-23"><span class="nav-number">3.</span> <span class="nav-text">2023-10-23</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#ts-项目使用-js-包"><span class="nav-number">3.1.</span> <span class="nav-text">ts 项目使用 js 包</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#nginx-同一端口不同路径映射到不同项目"><span class="nav-number">3.2.</span> <span class="nav-text">nginx 同一端口不同路径映射到不同项目</span></a></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#2023-10-20"><span class="nav-number">4.</span> <span class="nav-text">2023-10-20</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#2023-10-18"><span class="nav-number">5.</span> <span class="nav-text">2023-10-18</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#如何发布自己的-npm-包？"><span class="nav-number">5.1.</span> <span class="nav-text">如何发布自己的 npm 包？</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#npm-依赖包版本号"><span class="nav-number">5.2.</span> <span class="nav-text">npm 依赖包版本号</span></a></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#2023-10-17"><span class="nav-number">6.</span> <span class="nav-text">2023-10-17</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#2023-10-16"><span class="nav-number">7.</span> <span class="nav-text">2023-10-16</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#2023-08-11"><span class="nav-number">8.</span> <span class="nav-text">2023-08-11</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#2023-08-10"><span class="nav-number">9.</span> <span class="nav-text">2023-08-10</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#2023-08-07"><span class="nav-number">10.</span> <span class="nav-text">2023-08-07</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#html-空格自动合并的问题"><span class="nav-number">10.1.</span> <span class="nav-text">html 空格自动合并的问题</span></a></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#2023-08-02"><span class="nav-number">11.</span> <span class="nav-text">2023-08-02</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#2023-07-26"><span class="nav-number">12.</span> <span class="nav-text">2023-07-26</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#localeCompare"><span class="nav-number">12.1.</span> <span class="nav-text">localeCompare</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#对象遍历的速度比较"><span class="nav-number">12.2.</span> <span class="nav-text">对象遍历的速度比较</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#for-of-和-for-in"><span class="nav-number">12.3.</span> <span class="nav-text">for of 和 for in</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#for-of和-C-语言语法的遍历速度比较"><span class="nav-number">12.4.</span> <span class="nav-text">for of和 C 语言语法的遍历速度比较</span></a></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#2023-07-19"><span class="nav-number">13.</span> <span class="nav-text">2023-07-19</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#2023-07-17"><span class="nav-number">14.</span> <span class="nav-text">2023-07-17</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#importmap"><span class="nav-number">14.1.</span> <span class="nav-text">importmap</span></a></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#2023-07-08"><span class="nav-number">15.</span> <span class="nav-text">2023-07-08</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#2023-07-07"><span class="nav-number">16.</span> <span class="nav-text">2023-07-07</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#2023-07-06"><span class="nav-number">17.</span> <span class="nav-text">2023-07-06</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#2023-06-15"><span class="nav-number">18.</span> <span class="nav-text">2023-06-15</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#2023-06-13"><span class="nav-number">19.</span> <span class="nav-text">2023-06-13</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#2023-06-10"><span class="nav-number">20.</span> <span class="nav-text">2023-06-10</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#使用-VPS-挖矿挖点本回来"><span class="nav-number">20.1.</span> <span class="nav-text">使用 VPS 挖矿挖点本回来</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#下载-github-release-文件"><span class="nav-number">20.2.</span> <span class="nav-text">下载 github release 文件</span></a></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#2023-06-08"><span class="nav-number">21.</span> <span class="nav-text">2023-06-08</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#2023-06-07"><span class="nav-number">22.</span> <span class="nav-text">2023-06-07</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#vite-打包使用相对路径"><span class="nav-number">22.1.</span> <span class="nav-text">vite 打包使用相对路径</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#ResizeObserver"><span class="nav-number">22.2.</span> <span class="nav-text">ResizeObserver</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#nginx"><span class="nav-number">22.3.</span> <span class="nav-text">nginx</span></a></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#2023-06-06"><span class="nav-number">23.</span> <span class="nav-text">2023-06-06</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#centos-安装-nginx"><span class="nav-number">23.1.</span> <span class="nav-text">centos 安装 nginx</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#显卡挖矿"><span class="nav-number">23.2.</span> <span class="nav-text">显卡挖矿</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#hexo-部署后，CNAME-会被自动删除，怎么办？"><span class="nav-number">23.3.</span> <span class="nav-text">hexo 部署后，CNAME 会被自动删除，怎么办？</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#拿图片生成-icon"><span class="nav-number">23.4.</span> <span class="nav-text">拿图片生成 icon</span></a></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#2023-06-05"><span class="nav-number">24.</span> <span class="nav-text">2023-06-05</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#utterances"><span class="nav-number">24.1.</span> <span class="nav-text">utterances</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#网格布局"><span class="nav-number">24.2.</span> <span class="nav-text">网格布局</span></a></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#2023-06-02"><span class="nav-number">25.</span> <span class="nav-text">2023-06-02</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#2023-06-01"><span class="nav-number">26.</span> <span class="nav-text">2023-06-01</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#正则表达式的坑"><span class="nav-number">26.1.</span> <span class="nav-text">正则表达式的坑</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#UI-美学"><span class="nav-number">26.2.</span> <span class="nav-text">UI 美学</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#雪碧图"><span class="nav-number">26.3.</span> <span class="nav-text">雪碧图</span></a></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#2023-05-30"><span class="nav-number">27.</span> <span class="nav-text">2023-05-30</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#2023-05-29"><span class="nav-number">28.</span> <span class="nav-text">2023-05-29</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#Wayland-与-VNC-有什么区别呢"><span class="nav-number">28.1.</span> <span class="nav-text">Wayland 与 VNC 有什么区别呢</span></a></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#2023-05-27"><span class="nav-number">29.</span> <span class="nav-text">2023-05-27</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#2023-05-26"><span class="nav-number">30.</span> <span class="nav-text">2023-05-26</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#2023-05-24"><span class="nav-number">31.</span> <span class="nav-text">2023-05-24</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#2023-05-20"><span class="nav-number">32.</span> <span class="nav-text">2023-05-20</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#2023-05-18"><span class="nav-number">33.</span> <span class="nav-text">2023-05-18</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#2023-05-15"><span class="nav-number">34.</span> <span class="nav-text">2023-05-15</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#2023-05-14"><span class="nav-number">35.</span> <span class="nav-text">2023-05-14</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#2023-05-10"><span class="nav-number">36.</span> <span class="nav-text">2023-05-10</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#express-use-next"><span class="nav-number">36.1.</span> <span class="nav-text">express use next</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#vscode-上移一行代码的快捷键"><span class="nav-number">36.2.</span> <span class="nav-text">vscode 上移一行代码的快捷键</span></a></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#2023-05-03"><span class="nav-number">37.</span> <span class="nav-text">2023-05-03</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#2023-05-02"><span class="nav-number">38.</span> <span class="nav-text">2023-05-02</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#2023-04-28"><span class="nav-number">39.</span> <span class="nav-text">2023-04-28</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#2023-04-21"><span class="nav-number">40.</span> <span class="nav-text">2023-04-21</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#2023-04-18"><span class="nav-number">41.</span> <span class="nav-text">2023-04-18</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#scrollbar-的研究"><span class="nav-number">41.1.</span> <span class="nav-text">scrollbar 的研究</span></a></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#2023-03-20"><span class="nav-number">42.</span> <span class="nav-text">2023-03-20</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#2023-03-08"><span class="nav-number">43.</span> <span class="nav-text">2023-03-08</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#2023-03-02"><span class="nav-number">44.</span> <span class="nav-text">2023-03-02</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#2023-02-28"><span class="nav-number">45.</span> <span class="nav-text">2023-02-28</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#2023-02-23"><span class="nav-number">46.</span> <span class="nav-text">2023-02-23</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#2023-02-14"><span class="nav-number">47.</span> <span class="nav-text">2023-02-14</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#2023-02-10"><span class="nav-number">48.</span> <span class="nav-text">2023-02-10</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#useContext-的使用"><span class="nav-number">48.1.</span> <span class="nav-text">useContext 的使用</span></a></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#2023-02-09"><span class="nav-number">49.</span> <span class="nav-text">2023-02-09</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#2023-02-08"><span class="nav-number">50.</span> <span class="nav-text">2023-02-08</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#2023-02-07"><span class="nav-number">51.</span> <span class="nav-text">2023-02-07</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#2023-01-30"><span class="nav-number">52.</span> <span class="nav-text">2023-01-30</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#2023-01-12"><span class="nav-number">53.</span> <span class="nav-text">2023-01-12</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#2023-01-10"><span class="nav-number">54.</span> <span class="nav-text">2023-01-10</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#2023-01-09"><span class="nav-number">55.</span> <span class="nav-text">2023-01-09</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#2023-01-08"><span class="nav-number">56.</span> <span class="nav-text">2023-01-08</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#2023-01-07"><span class="nav-number">57.</span> <span class="nav-text">2023-01-07</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#calibre-分享电子书到-kindle，书名自动变拼音"><span class="nav-number">57.1.</span> <span class="nav-text">calibre 分享电子书到 kindle，书名自动变拼音</span></a></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#2023-01-06"><span class="nav-number">58.</span> <span class="nav-text">2023-01-06</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#CSS-揭秘读书笔记"><span class="nav-number">58.1.</span> <span class="nav-text">CSS 揭秘读书笔记</span></a></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#2023-01-05"><span class="nav-number">59.</span> <span class="nav-text">2023-01-05</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#2023-01-03"><span class="nav-number">60.</span> <span class="nav-text">2023-01-03</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#CSS-解密读书笔记"><span class="nav-number">60.1.</span> <span class="nav-text">CSS 解密读书笔记</span></a></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#2022-12-21"><span class="nav-number">61.</span> <span class="nav-text">2022-12-21</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#2022-12-14"><span class="nav-number">62.</span> <span class="nav-text">2022-12-14</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#搜索引擎小技巧"><span class="nav-number">62.1.</span> <span class="nav-text">搜索引擎小技巧</span></a></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#2022-12-12"><span class="nav-number">63.</span> <span class="nav-text">2022-12-12</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#深入对比对象"><span class="nav-number">63.1.</span> <span class="nav-text">深入对比对象</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#文本溢出常用处理手段"><span class="nav-number">63.2.</span> <span class="nav-text">文本溢出常用处理手段</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#width-100-和-auto-的区别"><span class="nav-number">63.3.</span> <span class="nav-text">width 100%和 auto 的区别</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#一个单词是不会换行的"><span class="nav-number">63.4.</span> <span class="nav-text">一个单词是不会换行的</span></a></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#2022-12-09"><span class="nav-number">64.</span> <span class="nav-text">2022-12-09</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#Http-请求的数据格式"><span class="nav-number">64.1.</span> <span class="nav-text">Http 请求的数据格式</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#flex，flex-grow，flex-shrink，flex-basis"><span class="nav-number">64.2.</span> <span class="nav-text">flex，flex-grow，flex-shrink，flex-basis</span></a></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#2022-12-08"><span class="nav-number">65.</span> <span class="nav-text">2022-12-08</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#react-怎么区分父组件发起的渲染，还是子组件自身发起的渲染"><span class="nav-number">65.1.</span> <span class="nav-text">react 怎么区分父组件发起的渲染，还是子组件自身发起的渲染</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#如何打包-chrome-扩展程序"><span class="nav-number">65.2.</span> <span class="nav-text">如何打包 chrome 扩展程序</span></a></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#2022-12-07"><span class="nav-number">66.</span> <span class="nav-text">2022-12-07</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#2022-12-06"><span class="nav-number">67.</span> <span class="nav-text">2022-12-06</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#2022-12-05"><span class="nav-number">68.</span> <span class="nav-text">2022-12-05</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#css-两种盒模型"><span class="nav-number">68.1.</span> <span class="nav-text">css 两种盒模型</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#react-受控组件和非受控组件"><span class="nav-number">68.2.</span> <span class="nav-text">react 受控组件和非受控组件</span></a></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#2022-12-02"><span class="nav-number">69.</span> <span class="nav-text">2022-12-02</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#2022-12-01"><span class="nav-number">70.</span> <span class="nav-text">2022-12-01</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#2022-11-27"><span class="nav-number">71.</span> <span class="nav-text">2022-11-27</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#2022-11-26"><span class="nav-number">72.</span> <span class="nav-text">2022-11-26</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#2022-11-25"><span class="nav-number">73.</span> <span class="nav-text">2022-11-25</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#2022-11-24"><span class="nav-number">74.</span> <span class="nav-text">2022-11-24</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#安装-win11-arm64-位"><span class="nav-number">74.1.</span> <span class="nav-text">安装 win11 arm64 位</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#激活-jetbrains-家的软件"><span class="nav-number">74.2.</span> <span class="nav-text">激活 jetbrains 家的软件</span></a></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#2022-11-23"><span class="nav-number">75.</span> <span class="nav-text">2022-11-23</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#2022-11-22"><span class="nav-number">76.</span> <span class="nav-text">2022-11-22</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#2022-11-17"><span class="nav-number">77.</span> <span class="nav-text">2022-11-17</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#2022-11-16"><span class="nav-number">78.</span> <span class="nav-text">2022-11-16</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#trigger-和-Event"><span class="nav-number">78.1.</span> <span class="nav-text">trigger 和 Event</span></a></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#2022-11-15"><span class="nav-number">79.</span> <span class="nav-text">2022-11-15</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#2022-11-14"><span class="nav-number">80.</span> <span class="nav-text">2022-11-14</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#2022-11-07"><span class="nav-number">81.</span> <span class="nav-text">2022-11-07</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#clientHeight"><span class="nav-number">81.1.</span> <span class="nav-text">clientHeight</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#连续点击鼠标次数"><span class="nav-number">81.2.</span> <span class="nav-text">连续点击鼠标次数</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#useState-的坑"><span class="nav-number">81.3.</span> <span class="nav-text">useState 的坑</span></a></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#2022-11-06"><span class="nav-number">82.</span> <span class="nav-text">2022-11-06</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#2022-11-05"><span class="nav-number">83.</span> <span class="nav-text">2022-11-05</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#2022-11-02"><span class="nav-number">84.</span> <span class="nav-text">2022-11-02</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#2022-10-27"><span class="nav-number">85.</span> <span class="nav-text">2022-10-27</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#2022-10-26"><span class="nav-number">86.</span> <span class="nav-text">2022-10-26</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#2022-10-19"><span class="nav-number">87.</span> <span class="nav-text">2022-10-19</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#2022-10-17"><span class="nav-number">88.</span> <span class="nav-text">2022-10-17</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#2022-10-13"><span class="nav-number">89.</span> <span class="nav-text">2022-10-13</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#2022-10-11"><span class="nav-number">90.</span> <span class="nav-text">2022-10-11</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#2022-10-10"><span class="nav-number">91.</span> <span class="nav-text">2022-10-10</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#2022-09-21"><span class="nav-number">92.</span> <span class="nav-text">2022-09-21</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#2022-09-15"><span class="nav-number">93.</span> <span class="nav-text">2022-09-15</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#2022-09-14"><span class="nav-number">94.</span> <span class="nav-text">2022-09-14</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#2022-09-06"><span class="nav-number">95.</span> <span class="nav-text">2022-09-06</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#关于-git-工作习惯"><span class="nav-number">95.1.</span> <span class="nav-text">关于 git 工作习惯</span></a></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#2022-09-01"><span class="nav-number">96.</span> <span class="nav-text">2022-09-01</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#2022-08-31"><span class="nav-number">97.</span> <span class="nav-text">2022-08-31</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#2022-08-25"><span class="nav-number">98.</span> <span class="nav-text">2022-08-25</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#使用数组中限定的-string"><span class="nav-number">98.1.</span> <span class="nav-text">使用数组中限定的 string</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#使用对象中限定的-string"><span class="nav-number">98.2.</span> <span class="nav-text">使用对象中限定的 string</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#限定一个对象的-key-与另一个对象的-key-完全匹配"><span class="nav-number">98.3.</span> <span class="nav-text">限定一个对象的 key 与另一个对象的 key 完全匹配</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#如果不想限定完全一致，要怎么写"><span class="nav-number">98.4.</span> <span class="nav-text">如果不想限定完全一致，要怎么写</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#怎么获取-enum-的-key-和-value-类型"><span class="nav-number">98.5.</span> <span class="nav-text">怎么获取 enum 的 key 和 value 类型</span></a></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#2022-08-23"><span class="nav-number">99.</span> <span class="nav-text">2022-08-23</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#高内聚，低耦合"><span class="nav-number">99.1.</span> <span class="nav-text">高内聚，低耦合</span></a></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#2022-08-01"><span class="nav-number">100.</span> <span class="nav-text">2022-08-01</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#2022-07-25"><span class="nav-number">101.</span> <span class="nav-text">2022-07-25</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#npm-的依赖版本问题-，-，-以及不带前缀的区别"><span class="nav-number">101.1.</span> <span class="nav-text">npm 的依赖版本问题: ^，~，*以及不带前缀的区别</span></a></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#2022-07-22"><span class="nav-number">102.</span> <span class="nav-text">2022-07-22</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#2022-07-21"><span class="nav-number">103.</span> <span class="nav-text">2022-07-21</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#2022-07-17"><span class="nav-number">104.</span> <span class="nav-text">2022-07-17</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#参考资料"><span class="nav-number">104.1.</span> <span class="nav-text">参考资料</span></a></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#2022-07-06"><span class="nav-number">105.</span> <span class="nav-text">2022-07-06</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#2022-07-05"><span class="nav-number">106.</span> <span class="nav-text">2022-07-05</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#2022-06-30"><span class="nav-number">107.</span> <span class="nav-text">2022-06-30</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#2022-06-23"><span class="nav-number">108.</span> <span class="nav-text">2022-06-23</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#异或交换"><span class="nav-number">108.1.</span> <span class="nav-text">异或交换</span></a></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#2022-06-17"><span class="nav-number">109.</span> <span class="nav-text">2022-06-17</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#弹框等待用户交互"><span class="nav-number">109.1.</span> <span class="nav-text">弹框等待用户交互</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#TS-表达一个对象类型"><span class="nav-number">109.2.</span> <span class="nav-text">TS 表达一个对象类型</span></a></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#2022-06-16"><span class="nav-number">110.</span> <span class="nav-text">2022-06-16</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#2022-06-15"><span class="nav-number">111.</span> <span class="nav-text">2022-06-15</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#2022-06-12"><span class="nav-number">112.</span> <span class="nav-text">2022-06-12</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#2022-06-11"><span class="nav-number">113.</span> <span class="nav-text">2022-06-11</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#wordpress-博客被黑"><span class="nav-number">113.1.</span> <span class="nav-text">wordpress 博客被黑</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#办理身份证"><span class="nav-number">113.2.</span> <span class="nav-text">办理身份证</span></a></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#2022-06-10"><span class="nav-number">114.</span> <span class="nav-text">2022-06-10</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#toJSON-方法"><span class="nav-number">114.1.</span> <span class="nav-text">toJSON()方法</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#大型软件的设计很重要"><span class="nav-number">114.2.</span> <span class="nav-text">大型软件的设计很重要</span></a></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#2019-02-27"><span class="nav-number">115.</span> <span class="nav-text">2019-02-27</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#是否要传数组长度的问题"><span class="nav-number">115.1.</span> <span class="nav-text">是否要传数组长度的问题</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#spring-boot"><span class="nav-number">115.2.</span> <span class="nav-text">spring boot</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#第一步快速入门"><span class="nav-number">115.2.1.</span> <span class="nav-text">第一步快速入门</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#阿里和蚂蚁八荣八耻"><span class="nav-number">115.3.</span> <span class="nav-text">阿里和蚂蚁八荣八耻</span></a></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#2019-02-20"><span class="nav-number">116.</span> <span class="nav-text">2019-02-20</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#2019-02-19"><span class="nav-number">117.</span> <span class="nav-text">2019-02-19</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#2019-01-17"><span class="nav-number">118.</span> <span class="nav-text">2019-01-17</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#2018-11-28"><span class="nav-number">119.</span> <span class="nav-text">2018-11-28</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#2018-11-19"><span class="nav-number">120.</span> <span class="nav-text">2018-11-19</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#2018-11-03"><span class="nav-number">121.</span> <span class="nav-text">2018-11-03</span></a></li></ol></div>
            

          </div>
        </section>
      <!--/noindex-->
      

      

    </div>
  </aside>


        
      </div>
    </main>

    <footer id="footer" class="footer">
      <div class="footer-inner">
        <div class="copyright">&copy; <span itemprop="copyrightYear">2023</span>
  <span class="with-love">
    <i class="fa fa-user"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">liuqinh2s</span>

  
    <span class="post-meta-divider">|</span>
    <span class="post-meta-item-icon">
      <i class="fa fa-area-chart"></i>
    </span>
    
      <span class="post-meta-item-text">Site words total count&#58;</span>
    
    <span title="Site words total count">95.1k</span>
  
</div>


  <div class="powered-by">Powered by <a class="theme-link" target="_blank" href="https://hexo.io">Hexo</a></div>



  <span class="post-meta-divider">|</span>



  <div class="theme-info">Theme &mdash; <a class="theme-link" target="_blank" href="https://github.com/iissnan/hexo-theme-next">NexT.Pisces</a> v5.1.4</div>




        
<div class="busuanzi-count">
  <script async src="https://busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script>

  
    <span class="site-uv">
      <i class="fa fa-user"></i>
      <span class="busuanzi-value" id="busuanzi_value_site_uv"></span>
      
    </span>
  

  
    <span class="site-pv">
      <i class="fa fa-eye"></i>
      <span class="busuanzi-value" id="busuanzi_value_site_pv"></span>
      
    </span>
  
</div>








        
      </div>
    </footer>

    
      <div class="back-to-top">
        <i class="fa fa-arrow-up"></i>
        
      </div>
    

    

  </div>

  

<script type="text/javascript">
  if (Object.prototype.toString.call(window.Promise) !== '[object Function]') {
    window.Promise = null;
  }
</script>









  












  
  
    <script type="text/javascript" src="/lib/jquery/index.js?v=2.1.3"></script>
  

  
  
    <script type="text/javascript" src="/lib/fastclick/lib/fastclick.min.js?v=1.0.6"></script>
  

  
  
    <script type="text/javascript" src="/lib/jquery_lazyload/jquery.lazyload.js?v=1.9.7"></script>
  

  
  
    <script type="text/javascript" src="/lib/velocity/velocity.min.js?v=1.2.1"></script>
  

  
  
    <script type="text/javascript" src="/lib/velocity/velocity.ui.min.js?v=1.2.1"></script>
  

  
  
    <script type="text/javascript" src="/lib/fancybox/source/jquery.fancybox.pack.js?v=2.1.5"></script>
  


  


  <script type="text/javascript" src="/js/src/utils.js?v=5.1.4"></script>

  <script type="text/javascript" src="/js/src/motion.js?v=5.1.4"></script>



  
  


  <script type="text/javascript" src="/js/src/affix.js?v=5.1.4"></script>

  <script type="text/javascript" src="/js/src/schemes/pisces.js?v=5.1.4"></script>



  
  <script type="text/javascript" src="/js/src/scrollspy.js?v=5.1.4"></script>
<script type="text/javascript" src="/js/src/post-details.js?v=5.1.4"></script>



  


  <script type="text/javascript" src="/js/src/bootstrap.js?v=5.1.4"></script>



  


  




	





  





  













<script type="text/javascript">
(function(){
    var e=document.createElement("script");
    e.type="text/javascript",
    e.async=!0,
    e.setAttribute("issue-term","pathname"),
    e.setAttribute("theme","github-light"),
    e.setAttribute("repo","liuqinh2s/blog-comment"),
    e.crossorigin="anonymous",
    e.src="https://utteranc.es/client.js";
    var utterance_container = document.getElementById("utterance-container");
    utterance_container && utterance_container.appendChild(e);
    })()
</script>

  

  <script type="text/javascript">
    // Popup Window;
    var isfetched = false;
    var isXml = true;
    // Search DB path;
    var search_path = "search.xml";
    if (search_path.length === 0) {
      search_path = "search.xml";
    } else if (/json$/i.test(search_path)) {
      isXml = false;
    }
    var path = "/" + search_path;
    // monitor main search box;

    var onPopupClose = function (e) {
      $('.popup').hide();
      $('#local-search-input').val('');
      $('.search-result-list').remove();
      $('#no-result').remove();
      $(".local-search-pop-overlay").remove();
      $('body').css('overflow', '');
    }

    function proceedsearch() {
      $("body")
        .append('<div class="search-popup-overlay local-search-pop-overlay"></div>')
        .css('overflow', 'hidden');
      $('.search-popup-overlay').click(onPopupClose);
      $('.popup').toggle();
      var $localSearchInput = $('#local-search-input');
      $localSearchInput.attr("autocapitalize", "none");
      $localSearchInput.attr("autocorrect", "off");
      $localSearchInput.focus();
    }

    // search function;
    var searchFunc = function(path, search_id, content_id) {
      'use strict';

      // start loading animation
      $("body")
        .append('<div class="search-popup-overlay local-search-pop-overlay">' +
          '<div id="search-loading-icon">' +
          '<i class="fa fa-spinner fa-pulse fa-5x fa-fw"></i>' +
          '</div>' +
          '</div>')
        .css('overflow', 'hidden');
      $("#search-loading-icon").css('margin', '20% auto 0 auto').css('text-align', 'center');

      $.ajax({
        url: path,
        dataType: isXml ? "xml" : "json",
        async: true,
        success: function(res) {
          // get the contents from search data
          isfetched = true;
          $('.popup').detach().appendTo('.header-inner');
          var datas = isXml ? $("entry", res).map(function() {
            return {
              title: $("title", this).text(),
              content: $("content",this).text(),
              url: $("url" , this).text()
            };
          }).get() : res;
          var input = document.getElementById(search_id);
          var resultContent = document.getElementById(content_id);
          var inputEventFunction = function() {
            var searchText = input.value.trim().toLowerCase();
            var keywords = searchText.split(/[\s\-]+/);
            if (keywords.length > 1) {
              keywords.push(searchText);
            }
            var resultItems = [];
            if (searchText.length > 0) {
              // perform local searching
              datas.forEach(function(data) {
                var isMatch = false;
                var hitCount = 0;
                var searchTextCount = 0;
                var title = data.title.trim();
                var titleInLowerCase = title.toLowerCase();
                var content = data.content.trim().replace(/<[^>]+>/g,"");
                var contentInLowerCase = content.toLowerCase();
                var articleUrl = decodeURIComponent(data.url);
                var indexOfTitle = [];
                var indexOfContent = [];
                // only match articles with not empty titles
                if(title != '') {
                  keywords.forEach(function(keyword) {
                    function getIndexByWord(word, text, caseSensitive) {
                      var wordLen = word.length;
                      if (wordLen === 0) {
                        return [];
                      }
                      var startPosition = 0, position = [], index = [];
                      if (!caseSensitive) {
                        text = text.toLowerCase();
                        word = word.toLowerCase();
                      }
                      while ((position = text.indexOf(word, startPosition)) > -1) {
                        index.push({position: position, word: word});
                        startPosition = position + wordLen;
                      }
                      return index;
                    }

                    indexOfTitle = indexOfTitle.concat(getIndexByWord(keyword, titleInLowerCase, false));
                    indexOfContent = indexOfContent.concat(getIndexByWord(keyword, contentInLowerCase, false));
                  });
                  if (indexOfTitle.length > 0 || indexOfContent.length > 0) {
                    isMatch = true;
                    hitCount = indexOfTitle.length + indexOfContent.length;
                  }
                }

                // show search results

                if (isMatch) {
                  // sort index by position of keyword

                  [indexOfTitle, indexOfContent].forEach(function (index) {
                    index.sort(function (itemLeft, itemRight) {
                      if (itemRight.position !== itemLeft.position) {
                        return itemRight.position - itemLeft.position;
                      } else {
                        return itemLeft.word.length - itemRight.word.length;
                      }
                    });
                  });

                  // merge hits into slices

                  function mergeIntoSlice(text, start, end, index) {
                    var item = index[index.length - 1];
                    var position = item.position;
                    var word = item.word;
                    var hits = [];
                    var searchTextCountInSlice = 0;
                    while (position + word.length <= end && index.length != 0) {
                      if (word === searchText) {
                        searchTextCountInSlice++;
                      }
                      hits.push({position: position, length: word.length});
                      var wordEnd = position + word.length;

                      // move to next position of hit

                      index.pop();
                      while (index.length != 0) {
                        item = index[index.length - 1];
                        position = item.position;
                        word = item.word;
                        if (wordEnd > position) {
                          index.pop();
                        } else {
                          break;
                        }
                      }
                    }
                    searchTextCount += searchTextCountInSlice;
                    return {
                      hits: hits,
                      start: start,
                      end: end,
                      searchTextCount: searchTextCountInSlice
                    };
                  }

                  var slicesOfTitle = [];
                  if (indexOfTitle.length != 0) {
                    slicesOfTitle.push(mergeIntoSlice(title, 0, title.length, indexOfTitle));
                  }

                  var slicesOfContent = [];
                  while (indexOfContent.length != 0) {
                    var item = indexOfContent[indexOfContent.length - 1];
                    var position = item.position;
                    var word = item.word;
                    // cut out 100 characters
                    var start = position - 20;
                    var end = position + 80;
                    if(start < 0){
                      start = 0;
                    }
                    if (end < position + word.length) {
                      end = position + word.length;
                    }
                    if(end > content.length){
                      end = content.length;
                    }
                    slicesOfContent.push(mergeIntoSlice(content, start, end, indexOfContent));
                  }

                  // sort slices in content by search text's count and hits' count

                  slicesOfContent.sort(function (sliceLeft, sliceRight) {
                    if (sliceLeft.searchTextCount !== sliceRight.searchTextCount) {
                      return sliceRight.searchTextCount - sliceLeft.searchTextCount;
                    } else if (sliceLeft.hits.length !== sliceRight.hits.length) {
                      return sliceRight.hits.length - sliceLeft.hits.length;
                    } else {
                      return sliceLeft.start - sliceRight.start;
                    }
                  });

                  // select top N slices in content

                  var upperBound = parseInt('1');
                  if (upperBound >= 0) {
                    slicesOfContent = slicesOfContent.slice(0, upperBound);
                  }

                  // highlight title and content

                  function highlightKeyword(text, slice) {
                    var result = '';
                    var prevEnd = slice.start;
                    slice.hits.forEach(function (hit) {
                      result += text.substring(prevEnd, hit.position);
                      var end = hit.position + hit.length;
                      result += '<b class="search-keyword">' + text.substring(hit.position, end) + '</b>';
                      prevEnd = end;
                    });
                    result += text.substring(prevEnd, slice.end);
                    return result;
                  }

                  var resultItem = '';

                  if (slicesOfTitle.length != 0) {
                    resultItem += "<li><a href='" + articleUrl + "' class='search-result-title'>" + highlightKeyword(title, slicesOfTitle[0]) + "</a>";
                  } else {
                    resultItem += "<li><a href='" + articleUrl + "' class='search-result-title'>" + title + "</a>";
                  }

                  slicesOfContent.forEach(function (slice) {
                    resultItem += "<a href='" + articleUrl + "'>" +
                      "<p class=\"search-result\">" + highlightKeyword(content, slice) +
                      "...</p>" + "</a>";
                  });

                  resultItem += "</li>";
                  resultItems.push({
                    item: resultItem,
                    searchTextCount: searchTextCount,
                    hitCount: hitCount,
                    id: resultItems.length
                  });
                }
              })
            };
            if (keywords.length === 1 && keywords[0] === "") {
              resultContent.innerHTML = '<div id="no-result"><i class="fa fa-search fa-5x" /></div>'
            } else if (resultItems.length === 0) {
              resultContent.innerHTML = '<div id="no-result"><i class="fa fa-frown-o fa-5x" /></div>'
            } else {
              resultItems.sort(function (resultLeft, resultRight) {
                if (resultLeft.searchTextCount !== resultRight.searchTextCount) {
                  return resultRight.searchTextCount - resultLeft.searchTextCount;
                } else if (resultLeft.hitCount !== resultRight.hitCount) {
                  return resultRight.hitCount - resultLeft.hitCount;
                } else {
                  return resultRight.id - resultLeft.id;
                }
              });
              var searchResultList = '<ul class=\"search-result-list\">';
              resultItems.forEach(function (result) {
                searchResultList += result.item;
              })
              searchResultList += "</ul>";
              resultContent.innerHTML = searchResultList;
            }
          }

          if ('auto' === 'auto') {
            input.addEventListener('input', inputEventFunction);
          } else {
            $('.search-icon').click(inputEventFunction);
            input.addEventListener('keypress', function (event) {
              if (event.keyCode === 13) {
                inputEventFunction();
              }
            });
          }

          // remove loading animation
          $(".local-search-pop-overlay").remove();
          $('body').css('overflow', '');

          proceedsearch();
        }
      });
    }

    // handle and trigger popup window;
    $('.popup-trigger').click(function(e) {
      e.stopPropagation();
      if (isfetched === false) {
        searchFunc(path, 'local-search-input', 'local-search-result');
      } else {
        proceedsearch();
      };
    });

    $('.popup-btn-close').click(onPopupClose);
    $('.popup').click(function(e){
      e.stopPropagation();
    });
    $(document).on('keyup', function (event) {
      var shouldDismissSearchPopup = event.which === 27 &&
        $('.search-popup').is(':visible');
      if (shouldDismissSearchPopup) {
        onPopupClose();
      }
    });
  </script>





  

  

  
<script>
(function(){
    var bp = document.createElement('script');
    var curProtocol = window.location.protocol.split(':')[0];
    if (curProtocol === 'https') {
        bp.src = 'https://zz.bdstatic.com/linksubmit/push.js';        
    }
    else {
        bp.src = 'http://push.zhanzhang.baidu.com/push.js';
    }
    var s = document.getElementsByTagName("script")[0];
    s.parentNode.insertBefore(bp, s);
})();
</script>


  
  

  
  
    <script type="text/x-mathjax-config">
      MathJax.Hub.Config({
        tex2jax: {
          inlineMath: [ ['$','$'], ["\\(","\\)"]  ],
          processEscapes: true,
          skipTags: ['script', 'noscript', 'style', 'textarea', 'pre', 'code']
        }
      });
    </script>

    <script type="text/x-mathjax-config">
      MathJax.Hub.Queue(function() {
        var all = MathJax.Hub.getAllJax(), i;
        for (i=0; i < all.length; i += 1) {
          all[i].SourceElement().parentNode.className += ' has-jax';
        }
      });
    </script>
    <script type="text/javascript" src="https://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>
  


  

  

   
<script src="https://cdn.jsdelivr.net/npm/moment@2.22.2/moment.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/moment-precise-range-plugin@1.3.0/moment-precise-range.min.js"></script>
<script>
  function timer() {
    var ages = moment.preciseDiff(moment(),moment(20170101,"YYYYMMDD"));
    ages = ages.replace(/years?/, "年");
    ages = ages.replace(/months?/, "月");
    ages = ages.replace(/days?/, "天");
    ages = ages.replace(/hours?/, "小时");
    ages = ages.replace(/minutes?/, "分");
    ages = ages.replace(/seconds?/, "秒");
    ages = ages.replace(/\d+/g, '<span style="color:#1890ff">$&</span>');
    div.innerHTML = `本站已运行 ${ages}`;
  }
  var div = document.createElement("div");
  //插入到copyright之后
  var copyright = document.querySelector(".copyright");
  document.querySelector(".footer-inner").insertBefore(div, copyright.nextSibling);
  timer();
  setInterval("timer()",1000)
</script>

</body>
</html>
