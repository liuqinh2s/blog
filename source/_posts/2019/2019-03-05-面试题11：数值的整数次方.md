---
title: 面试题11：数值的整数次方
categories: [读书笔记, 《剑指offer》]
comments: true
---

## 题目

实现函数double Power(double base, int exponent)，求base的exponent次方。不得使用库函数，同时不需要考虑大数问题。

<!--more-->

## 解答

看起来挺简单的一道题，但要考虑不少特殊输入，比如exponent是负数怎么办？base是0怎么办，会产生除以零的错误。

```java
public class Solution {
    public double Power(double base, int exponent) throws Exception{
        if(equal(base, 0.0) && exponent<0){
            throw new Exception("Zero can not be divided!");
        }
        double result = PowerWithUnsigedExponent(base, Math.abs(exponent));
        if(exponent<0){
            result = 1.0/result;
        }
        return result;
    }

    private double PowerWithUnsigedExponent(double base, int exponent) throws Exception{
        if(exponent==0){
            return 1;
        }else if(exponent==1){
            return base;
        }
        double result = PowerWithUnsigedExponent(base, exponent>>1);
        result*=result;
        if((exponent&0x1)==1){
            result*=base;
        }
        return result;
    }

    private boolean equal(double a, double b){
        if(a-b>-0.0000001&&a-b<0.0000001){
            return true;
        }else{
            return false;
        }
    }
}
```